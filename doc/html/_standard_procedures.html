<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.17">
<meta name="author" content="Erick Gallesio">
<title>STklos Reference Manual : (version 1.70)</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
pre.rouge table td { padding: 5px; }
pre.rouge table pre { margin: 0; }
pre.rouge .c, pre.rouge .ch, pre.rouge .cd, pre.rouge .cpf {
  color: #75715e;
  font-style: italic;
}
pre.rouge .cm {
  color: #75715e;
  font-style: italic;
}
pre.rouge .c1 {
  color: #75715e;
  font-style: italic;
}
pre.rouge .cp {
  color: #75715e;
  font-weight: bold;
}
pre.rouge .cs {
  color: #75715e;
  font-weight: bold;
  font-style: italic;
}
pre.rouge .err {
  color: #960050;
  background-color: #1e0010;
}
pre.rouge .gi {
  color: #ffffff;
  background-color: #324932;
}
pre.rouge .gd {
  color: #ffffff;
  background-color: #493131;
}
pre.rouge .ge {
  color: #000000;
  font-style: italic;
}
pre.rouge .gr {
  color: #aa0000;
}
pre.rouge .gt {
  color: #aa0000;
}
pre.rouge .gh {
  color: #999999;
}
pre.rouge .go {
  color: #888888;
}
pre.rouge .gp {
  color: #555555;
}
pre.rouge .gs {
  font-weight: bold;
}
pre.rouge .gu {
  color: #aaaaaa;
}
pre.rouge .k, pre.rouge .kv {
  color: #66d9ef;
  font-weight: bold;
}
pre.rouge .kc {
  color: #66d9ef;
  font-weight: bold;
}
pre.rouge .kd {
  color: #66d9ef;
  font-weight: bold;
}
pre.rouge .kp {
  color: #66d9ef;
  font-weight: bold;
}
pre.rouge .kr {
  color: #66d9ef;
  font-weight: bold;
}
pre.rouge .kt {
  color: #66d9ef;
  font-weight: bold;
}
pre.rouge .kn {
  color: #f92672;
  font-weight: bold;
}
pre.rouge .ow {
  color: #f92672;
  font-weight: bold;
}
pre.rouge .o {
  color: #f92672;
  font-weight: bold;
}
pre.rouge .mf {
  color: #ae81ff;
}
pre.rouge .mh {
  color: #ae81ff;
}
pre.rouge .il {
  color: #ae81ff;
}
pre.rouge .mi {
  color: #ae81ff;
}
pre.rouge .mo {
  color: #ae81ff;
}
pre.rouge .m, pre.rouge .mb, pre.rouge .mx {
  color: #ae81ff;
}
pre.rouge .se {
  color: #ae81ff;
}
pre.rouge .sa {
  color: #66d9ef;
  font-weight: bold;
}
pre.rouge .sb {
  color: #e6db74;
}
pre.rouge .sc {
  color: #e6db74;
}
pre.rouge .sd {
  color: #e6db74;
}
pre.rouge .s2 {
  color: #e6db74;
}
pre.rouge .sh {
  color: #e6db74;
}
pre.rouge .si {
  color: #e6db74;
}
pre.rouge .sx {
  color: #e6db74;
}
pre.rouge .sr {
  color: #e6db74;
}
pre.rouge .s1 {
  color: #e6db74;
}
pre.rouge .ss {
  color: #e6db74;
}
pre.rouge .s, pre.rouge .dl {
  color: #e6db74;
}
pre.rouge .na {
  color: #a6e22e;
}
pre.rouge .nc {
  color: #a6e22e;
  font-weight: bold;
}
pre.rouge .nd {
  color: #a6e22e;
  font-weight: bold;
}
pre.rouge .ne {
  color: #a6e22e;
  font-weight: bold;
}
pre.rouge .nf, pre.rouge .fm {
  color: #a6e22e;
  font-weight: bold;
}
pre.rouge .no {
  color: #66d9ef;
}
pre.rouge .bp {
  color: #f8f8f2;
}
pre.rouge .nb {
  color: #f8f8f2;
}
pre.rouge .ni {
  color: #f8f8f2;
}
pre.rouge .nn {
  color: #f8f8f2;
}
pre.rouge .vc {
  color: #f8f8f2;
}
pre.rouge .vg {
  color: #f8f8f2;
}
pre.rouge .vi {
  color: #f8f8f2;
}
pre.rouge .nv, pre.rouge .vm {
  color: #f8f8f2;
}
pre.rouge .w {
  color: #f8f8f2;
}
pre.rouge .nl {
  color: #f8f8f2;
  font-weight: bold;
}
pre.rouge .nt {
  color: #f92672;
}
pre.rouge {
  color: #f8f8f2;
  background-color: #49483e;
}
</style>
<!-- Generate a nice TOC -->
<script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
<script src="https://code.jquery.com/ui/1.11.4/jquery-ui.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tocify/1.9.0/javascripts/jquery.tocify.min.js"></script>
<!-- We do not need the tocify CSS because the asciidoc CSS already provides most of what we neeed -->

<style>
.tocify-header {
    font-style: italic;
}

.tocify-subheader {
    font-style: normal;
    font-size: 90%;
}

.tocify ul {
    margin: 0;
 }

.tocify-focus {
    color: #7a2518;
    background-color: rgba(0, 0, 0, 0.1);
}

.tocify-focus > a {
    color: #7a2518;
}
</style>

<script type="text/javascript">
    $(function () {
        // Add a new container for the tocify toc into the existing toc so we can re-use its
        // styling
        $("#toc").append("<div id='generated-toc'></div>");
        $("#generated-toc").tocify({
            extendPage: true,
            context: "#content",
            highlightOnScroll: true,
            hideEffect: "slideUp",
            // Use the IDs that asciidoc already provides so that TOC links and intra-document
            // links are the same. Anything else might confuse users when they create bookmarks.
            hashGenerator: function(text, element) {
                return $(element).attr("id");
            },
            // Smooth scrolling doesn't work properly if we use the asciidoc IDs
            smoothScroll: false,
            // Set to 'none' to use the tocify classes
            theme: "none",
            // Handle book (may contain h1) and article (only h2 deeper)
            selectors: $( "#content" ).has( "h1" ).size() > 0 ? "h1,h2,h3,h4,h5" : "h2,h3,h4,h5",
            ignoreSelector: ".discrete"
        });

        // Switch between static asciidoc toc and dynamic tocify toc based on browser size
        // This is set to match the media selectors in the asciidoc CSS
        // Without this, we keep the dynamic toc even if it is moved from the side to preamble
        // position which will cause odd scrolling behavior
        var handleTocOnResize = function() {
            if ($(document).width() < 768) {
                $("#generated-toc").hide();
                $(".sectlevel0").show();
                $(".sectlevel1").show();
            }
            else {
                $("#generated-toc").show();
                $(".sectlevel0").hide();
                $(".sectlevel1").hide();
            }
        }

        $(window).resize(handleTocOnResize);
        handleTocOnResize();
    });
</script>
<style>.toc-current{font-weight: bold;} .toc-root{font-family: "Open Sans","DejaVu Sans",sans-serif;
                       font-size: 0.9em;} #content{display: flex; flex-direction: column; flex: 1 1 auto;}
             .nav-footer{text-align: center; margin-top: auto;}
             .nav-footer > p > a {white-space: nowrap;}</style>
</head>
<body id="_standard_procedures" class="book toc2 toc-left">
<div id="header">
<h1>STklos Reference Manual : (version 1.70)</h1>
<div class="details">
<span id="author" class="author">Erick Gallesio</span><br>
<span id="email" class="email"><a href="mailto:eg@unice.fr">eg@unice.fr</a></span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<p><span class="toc-root"><a href="stklos-ref-multi.html">STklos Reference Manual : (version 1.70)</a></span></p><ul class="sectlevel1">
<li><a href="_preface.html">Preface</a>
</li>
<li><a href="_introduction.html">1. Introduction</a>
</li>
<li><a href="_expressions.html">2. Expressions</a>
</li>
<li><a href="_program_structure.html">3. Program structure</a>
</li>
<li><a href="_standard_procedures.html"><span class="toc-current">4. Standard Procedures</span></a>
<ul class="sectlevel2">
<li><a href="_standard_procedures.html#_equivalence_predicates">4.1. Equivalence predicates</a>
</li>
<li><a href="_standard_procedures.html#_numbers">4.2. Numbers</a>
</li>
<li><a href="_standard_procedures.html#_booleans">4.3. Booleans</a>
</li>
<li><a href="_standard_procedures.html#_pairs_and_lists">4.4. Pairs and lists</a>
</li>
<li><a href="_standard_procedures.html#_symbols">4.5. Symbols</a>
</li>
<li><a href="_standard_procedures.html#_characters">4.6. Characters</a>
</li>
<li><a href="_standard_procedures.html#_strings">4.7. Strings</a>
</li>
<li><a href="_standard_procedures.html#_vectors">4.8. Vectors</a>
</li>
<li><a href="_standard_procedures.html#_structures">4.9. Structures</a>
</li>
<li><a href="_standard_procedures.html#_bytevectors">4.10. Bytevectors</a>
</li>
<li><a href="_standard_procedures.html#_control_features">4.11. Control features</a>
</li>
<li><a href="_standard_procedures.html#_input_and_output">4.12. Input and Output</a>
</li>
<li><a href="_standard_procedures.html#_system_interface">4.13. System interface</a>
</li>
<li><a href="_standard_procedures.html#_keywords">4.14. Keywords</a>
</li>
<li><a href="_standard_procedures.html#_hash_tables">4.15. Hash Tables</a>
</li>
<li><a href="_standard_procedures.html#_dates_and_times">4.16. Dates and Times</a>
</li>
<li><a href="_standard_procedures.html#_boxes">4.17. Boxes</a>
</li>
<li><a href="_standard_procedures.html#_processes">4.18. Processes</a>
</li>
<li><a href="_standard_procedures.html#_sockets">4.19. Sockets</a>
</li>
<li><a href="_standard_procedures.html#_signals">4.20. Signals</a>
</li>
<li><a href="_standard_procedures.html#_parameter_objects">4.21. Parameter Objects</a>
</li>
<li><a href="_standard_procedures.html#_misc">4.22. Misc</a>
</li>
</ul>
</li>
<li><a href="_regular_expressions.html">5. Regular Expressions</a>
</li>
<li><a href="_pattern_matching.html">6. Pattern Matching</a>
</li>
<li><a href="_exceptions_and_conditions.html">7. Exceptions and Conditions</a>
</li>
<li><a href="_stklos_object_system.html">8. STklos Object System</a>
</li>
<li><a href="_threads_mutexes_and_condition_variables.html">9. Threads, Mutexes and Condition Variables</a>
</li>
<li><a href="_customizations.html">10. Customizations</a>
</li>
<li><a href="_the_scmpkg_package_system.html">11. The ScmPkg Package System</a>
</li>
<li><a href="_foreign_function_interface.html">12. Foreign Function Interface</a>
</li>
<li><a href="_using_the_slib_package.html">13. Using the SLIB package</a>
</li>
<li><a href="_srfis.html">14. SRFIs</a>
</li>
<li><a href="_bibliography.html">Bibliography</a>
</li>
<li><a href="_libraries.html">Appendix C: STklos Libraries</a>
</li>
<li><a href="FDL.html">Appendix D: GNU Free Documentation License</a>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_standard_procedures">4. Standard Procedures</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_equivalence_predicates">4.1. Equivalence predicates</h3>
<div class="paragraph">
<p>A predicate is a procedure that always returns a boolean value
(<code>#t</code> or <code>#f</code>). An equivalence predicate is the
computational analogue of a mathematical equivalence relation (it
is symmetric, reflexive, and transitive).  Of the equivalence
predicates described in this section, <code>eq?</code> is the finest
or most discriminating, and <code>equal?</code> is the coarsest.
<code>Eqv?</code> is slightly less discriminating than <code>eq?</code>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(eqv? obj1 obj2)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>The <code>eqv?</code> procedure defines a useful equivalence relation on objects.
Briefly, it returns <code>#t</code> if <code>obj1</code> and <code>obj2</code> should normally be regarded
as the same object. This relation is left slightly open to interpretation,
but the following partial specification of <code>eqv?</code> holds for all
implementations of Scheme.</p>
</div>
<div class="paragraph">
<p>The <code>eqv?</code> procedure returns <code>#t</code> if:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>obj1</code> and <code>obj2</code> are both <code>#t</code> or both <code>#f</code>.</p>
</li>
<li>
<p><code>obj1</code> and <code>obj2</code> are both symbols and</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nb">string=?</span> <span class="p">(</span><span class="nb">symbol-&gt;string</span> <span class="nv">obj1</span><span class="p">)</span>
          <span class="p">(</span><span class="nb">symbol-&gt;string</span> <span class="nv">obj2</span><span class="p">))</span>     <span class="nv">=&gt;</span>  <span class="no">#t</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This assumes that neither <code>obj1</code> nor <code>obj2</code> is an
"uninterned symbol".
</td>
</tr>
</table>
</div>
</li>
<li>
<p><code>obj1</code> and <code>obj2</code> are both keywords and</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nb">string=?</span> <span class="p">(</span><span class="nf">keyword-&gt;string</span> <span class="nv">obj1</span><span class="p">)</span>
          <span class="p">(</span><span class="nf">keyword-&gt;string</span> <span class="nv">obj2</span><span class="p">))</span>    <span class="nv">=&gt;</span>  <span class="no">#t</span></code></pre>
</div>
</div>
</li>
<li>
<p><code>obj1</code> and <code>obj2</code> are both numbers, are <em><a href="_standard_procedures.html#numeq">numerically equal</a></em>,
and are either both exact or both inexact.</p>
</li>
<li>
<p><code>obj1</code> and <code>obj2</code> are both characters and are the same character
according to the <em><a href="_standard_procedures.html#chareq"><code>char=?</code> procedure</a>`</em>.</p>
</li>
<li>
<p>both <code>obj1</code> and <code>obj2</code> are the empty list.</p>
</li>
<li>
<p><code>obj1</code> and <code>obj2</code> are pairs, vectors, or strings that denote
the same locations in the store.</p>
</li>
<li>
<p><code>obj1</code> and <code>obj2</code> are procedures whose location tags are equal.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>STklos extends R<sup>5</sup>RS <code>eqv?</code> to take into account
the keyword type. Here are some examples:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nb">eqv?</span> <span class="ss">'a</span> <span class="ss">'a</span><span class="p">)</span>                     <span class="nv">=&gt;</span>  <span class="no">#t</span>
<span class="p">(</span><span class="nb">eqv?</span> <span class="ss">'a</span> <span class="ss">'b</span><span class="p">)</span>                     <span class="nv">=&gt;</span>  <span class="no">#f</span>
<span class="p">(</span><span class="nb">eqv?</span> <span class="mi">2</span> <span class="mi">2</span><span class="p">)</span>                       <span class="nv">=&gt;</span>  <span class="no">#t</span>
<span class="p">(</span><span class="nb">eqv?</span> <span class="nv">:foo</span> <span class="nv">:foo</span><span class="p">)</span>                 <span class="nv">=&gt;</span>  <span class="no">#t</span>
<span class="p">(</span><span class="nb">eqv?</span> <span class="o">#</span><span class="nv">:foo</span> <span class="nv">:foo</span><span class="p">)</span>                <span class="nv">=&gt;</span>  <span class="no">#t</span>
<span class="p">(</span><span class="nb">eqv?</span> <span class="nv">:foo</span> <span class="nv">:bar</span><span class="p">)</span>                 <span class="nv">=&gt;</span>  <span class="no">#f</span>
<span class="p">(</span><span class="nb">eqv?</span> <span class="o">'</span><span class="p">()</span> <span class="o">'</span><span class="p">())</span>                   <span class="nv">=&gt;</span>  <span class="no">#t</span>
<span class="p">(</span><span class="nb">eqv?</span> <span class="mi">100000000</span> <span class="mi">100000000</span><span class="p">)</span>       <span class="nv">=&gt;</span>  <span class="no">#t</span>
<span class="p">(</span><span class="nb">eqv?</span> <span class="p">(</span><span class="nb">cons</span> <span class="mi">1</span> <span class="mi">2</span><span class="p">)</span> <span class="p">(</span><span class="nb">cons</span> <span class="mi">1</span> <span class="mi">2</span><span class="p">))</span>     <span class="nv">=&gt;</span>  <span class="no">#f</span>
<span class="p">(</span><span class="nb">eqv?</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">()</span> <span class="mi">1</span><span class="p">)</span>
      <span class="p">(</span><span class="k">lambda</span> <span class="p">()</span> <span class="mi">2</span><span class="p">))</span>             <span class="nv">=&gt;</span>  <span class="no">#f</span>
<span class="p">(</span><span class="nb">eqv?</span> <span class="no">#f</span> <span class="ss">'nil</span><span class="p">)</span>                   <span class="nv">=&gt;</span>  <span class="no">#f</span>
<span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">p</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">x</span><span class="p">)</span> <span class="nv">x</span><span class="p">)))</span>
  <span class="p">(</span><span class="nb">eqv?</span> <span class="nv">p</span> <span class="nv">p</span><span class="p">))</span>                    <span class="nv">=&gt;</span>  <span class="no">#t</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The following examples illustrate cases in which the above rules do
not fully specify the behavior of <code>eqv?</code>. All that can be said about
such cases is that the value returned by eqv? must be a boolean.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nb">eqv?</span> <span class="s">""</span> <span class="s">""</span><span class="p">)</span>             <span class="nv">=&gt;</span>  <span class="nv">unspecified</span>
<span class="p">(</span><span class="nb">eqv?</span> <span class="o">'#</span><span class="p">()</span> <span class="o">'#</span><span class="p">())</span>         <span class="nv">=&gt;</span>  <span class="nv">unspecified</span>
<span class="p">(</span><span class="nb">eqv?</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">x</span><span class="p">)</span> <span class="nv">x</span><span class="p">)</span>
      <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">x</span><span class="p">)</span> <span class="nv">x</span><span class="p">))</span>    <span class="nv">=&gt;</span>  <span class="nv">unspecified</span>
<span class="p">(</span><span class="nb">eqv?</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">x</span><span class="p">)</span> <span class="nv">x</span><span class="p">)</span>
      <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">y</span><span class="p">)</span> <span class="nv">y</span><span class="p">))</span>    <span class="nv">=&gt;</span>  <span class="nv">unspecified</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In fact, the value returned by STklos depends of
the way code is entered and can yield <code>#t</code> in some cases and <code>#f</code>
in others.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>See R<sup>5</sup>RS for more details on <code>eqv?</code>.</p>
</div>
<div id="eqprim" class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(eq? obj1 obj2)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>Eq?</code> is similar to <code>eqv?</code> except that in some cases it is capable of
discerning distinctions finer than those detectable by <code>eqv?</code>.</p>
</div>
<div class="paragraph">
<p><code>Eq?</code> and <code>eqv?</code> are guaranteed to have the same behavior on symbols,
keywords, booleans, the empty list, pairs, procedures, and non-empty strings
and vectors. <code>Eq?</code>'s behavior on numbers and characters is
implementation-dependent, but it will always return either true or false,
and will return true only when <code>eqv?</code> would also return true.
<code>Eq?</code> may also behave differently from <code>eqv?</code> on empty vectors
and empty strings.<br>
Note that:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>STklos extends R<sup>5</sup>RS <code>eq?</code> to take into account  the keyword type.</p>
</li>
<li>
<p>In STklos, comparison of character returns <code>#t</code> for identical
characters and <code>#f</code> otherwise.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nb">eq?</span> <span class="ss">'a</span> <span class="ss">'a</span><span class="p">)</span>                     <span class="nv">=&gt;</span>  <span class="no">#t</span>
<span class="p">(</span><span class="nb">eq?</span> <span class="o">'</span><span class="p">(</span><span class="nf">a</span><span class="p">)</span> <span class="o">'</span><span class="p">(</span><span class="nf">a</span><span class="p">))</span>                 <span class="nv">=&gt;</span>  <span class="nv">unspecified</span>
<span class="p">(</span><span class="nb">eq?</span> <span class="p">(</span><span class="nb">list</span> <span class="ss">'a</span><span class="p">)</span> <span class="p">(</span><span class="nb">list</span> <span class="ss">'a</span><span class="p">))</span>       <span class="nv">=&gt;</span>  <span class="no">#f</span>
<span class="p">(</span><span class="nb">eq?</span> <span class="s">"a"</span> <span class="s">"a"</span><span class="p">)</span>                   <span class="nv">=&gt;</span>  <span class="nv">unspecified</span>
<span class="p">(</span><span class="nb">eq?</span> <span class="s">""</span> <span class="s">""</span><span class="p">)</span>                     <span class="nv">=&gt;</span>  <span class="nv">unspecified</span>
<span class="p">(</span><span class="nb">eq?</span> <span class="nv">:foo</span> <span class="nv">:foo</span><span class="p">)</span>                 <span class="nv">=&gt;</span>  <span class="no">#t</span>
<span class="p">(</span><span class="nb">eq?</span> <span class="nv">:foo</span> <span class="nv">:bar</span><span class="p">)</span>                 <span class="nv">=&gt;</span>  <span class="no">#f</span>
<span class="p">(</span><span class="nb">eq?</span> <span class="o">'</span><span class="p">()</span> <span class="o">'</span><span class="p">())</span>                   <span class="nv">=&gt;</span>  <span class="no">#t</span>
<span class="p">(</span><span class="nb">eq?</span> <span class="mi">2</span> <span class="mi">2</span><span class="p">)</span>                       <span class="nv">=&gt;</span>  <span class="nv">unspecified</span>
<span class="p">(</span><span class="nb">eq?</span> <span class="o">#</span><span class="nv">A</span> <span class="o">#</span><span class="nv">A</span><span class="p">)</span>                     <span class="nv">=&gt;</span>  <span class="no">#t</span> <span class="p">(</span><span class="nf">unspecified</span> <span class="nv">in</span> <span class="nv">r5rs</span><span class="p">)</span>
<span class="p">(</span><span class="nb">eq?</span> <span class="nv">car</span> <span class="nv">car</span><span class="p">)</span>                   <span class="nv">=&gt;</span>  <span class="no">#t</span>
<span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">n</span> <span class="p">(</span><span class="nb">+</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)))</span>
  <span class="p">(</span><span class="nb">eq?</span> <span class="nv">n</span> <span class="nv">n</span><span class="p">))</span>                    <span class="nv">=&gt;</span>  <span class="no">#t</span> <span class="p">(</span><span class="nf">unspecified</span> <span class="nv">in</span> <span class="nv">r5rs</span><span class="p">)</span>
<span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">x</span> <span class="o">'</span><span class="p">(</span><span class="nf">a</span><span class="p">)))</span>
  <span class="p">(</span><span class="nb">eq?</span> <span class="nv">x</span> <span class="nv">x</span><span class="p">))</span>                    <span class="nv">=&gt;</span>  <span class="no">#t</span>
<span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">x</span> <span class="o">'#</span><span class="p">()))</span>
  <span class="p">(</span><span class="nb">eq?</span> <span class="nv">x</span> <span class="nv">x</span><span class="p">))</span>                    <span class="nv">=&gt;</span>  <span class="no">#t</span>
<span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">p</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">x</span><span class="p">)</span> <span class="nv">x</span><span class="p">)))</span>
  <span class="p">(</span><span class="nb">eq?</span> <span class="nv">p</span> <span class="nv">p</span><span class="p">))</span>                    <span class="nv">=&gt;</span>  <span class="no">#t</span>
<span class="p">(</span><span class="nb">eq?</span> <span class="nv">:foo</span> <span class="nv">:foo</span><span class="p">)</span>                 <span class="nv">=&gt;</span>  <span class="no">#t</span>
<span class="p">(</span><span class="nb">eq?</span> <span class="nv">:bar</span> <span class="nv">bar:</span><span class="p">)</span>                 <span class="nv">=&gt;</span>  <span class="no">#t</span>
<span class="p">(</span><span class="nb">eq?</span> <span class="nv">:bar</span> <span class="nv">:foo</span><span class="p">)</span>                 <span class="nv">=&gt;</span>  <span class="no">#f</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(equal? obj1 obj2)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>Equal?</code> recursively compares the contents of pairs, vectors, and
strings, applying <code>eqv?</code> on other objects such as numbers and symbols.
A rule of thumb is that objects are generally <code>equal?</code> if they print the
same. <code>Equal?</code> always terminates even if its arguments are circular
data structures.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nb">equal?</span> <span class="ss">'a</span> <span class="ss">'a</span><span class="p">)</span>                  <span class="nv">=&gt;</span>  <span class="no">#t</span>
<span class="p">(</span><span class="nb">equal?</span> <span class="o">'</span><span class="p">(</span><span class="nf">a</span><span class="p">)</span> <span class="o">'</span><span class="p">(</span><span class="nf">a</span><span class="p">))</span>              <span class="nv">=&gt;</span>  <span class="no">#t</span>
<span class="p">(</span><span class="nb">equal?</span> <span class="o">'</span><span class="p">(</span><span class="nf">a</span> <span class="p">(</span><span class="nf">b</span><span class="p">)</span> <span class="nv">c</span><span class="p">)</span>
        <span class="o">'</span><span class="p">(</span><span class="nf">a</span> <span class="p">(</span><span class="nf">b</span><span class="p">)</span> <span class="nv">c</span><span class="p">))</span>             <span class="nv">=&gt;</span>  <span class="no">#t</span>
<span class="p">(</span><span class="nb">equal?</span> <span class="s">"abc"</span> <span class="s">"abc"</span><span class="p">)</span>            <span class="nv">=&gt;</span>  <span class="no">#t</span>
<span class="p">(</span><span class="nb">equal?</span> <span class="mi">2</span> <span class="mi">2</span><span class="p">)</span>                    <span class="nv">=&gt;</span>  <span class="no">#t</span>
<span class="p">(</span><span class="nb">equal?</span> <span class="p">(</span><span class="nb">make-vector</span> <span class="mi">5</span> <span class="ss">'a</span><span class="p">)</span>
        <span class="p">(</span><span class="nb">make-vector</span> <span class="mi">5</span> <span class="ss">'a</span><span class="p">))</span>     <span class="nv">=&gt;</span>  <span class="no">#t</span>
<span class="p">(</span><span class="nb">equal?</span> <span class="o">'#</span><span class="mi">1</span><span class="nv">=</span><span class="p">(</span><span class="nf">a</span> <span class="nv">b</span> <span class="o">.</span> <span class="o">#</span><span class="mi">1</span><span class="o">#</span><span class="p">)</span>
        <span class="o">'#</span><span class="mi">2</span><span class="nv">=</span><span class="p">(</span><span class="nf">a</span> <span class="nv">b</span> <span class="nv">a</span> <span class="nv">b</span> <span class="o">.</span> <span class="o">#</span><span class="mi">2</span><span class="o">#</span><span class="p">))</span>    <span class="nv">=&gt;</span>  <span class="no">#t</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
A rule of thumb is that objects are generally
<code>equal?</code> if they print the same.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_numbers">4.2. Numbers</h3>
<div class="paragraph">
<p>R<sup>5</sup>RS description of numbers is quite long and will not be given here.
STklos support the full number tower as described in R<sup>5</sup>RS; see this
document for a complete description.</p>
</div>
<div class="paragraph">
<p><strong><em>STklos</em></strong> extends the number syntax of R5RS with the following
inexact numerical constants: <code>+inf.0</code> (infinity), <code>-inf.0</code> (negative
infinity), <code>+nan.0</code> (not a number), and <code>-nan.0</code> (not a number).</p>
</div>
<div class="paragraph">
<p>



</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(number? obj)</code></strong><br>
<strong><code>(complex? obj)</code></strong><br>
<strong><code>(real? obj)</code></strong><br>
<strong><code>(rational? obj)</code></strong><br>
<strong><code>(integer? obj)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>These numerical type predicates can be applied to any kind of
argument, including non-numbers. They return <code>#t</code> if the object is of
the named type, and otherwise they return <code>#f</code>. In general, if a type
predicate is true of a number then all higher type predicates are
also true of that number. Consequently, if a type predicate is
false of a number, then all lower type predicates are also false of
that number.</p>
</div>
<div class="paragraph">
<p>If <code>z</code> is an inexact complex number, then <code>(real? z)</code> is true if and
only if <code>(zero? (imag-part z))</code> is true. If <code>x</code> is an inexact real
number, then <code>(integer? x)</code> is true if and only if
<code>(and (finite? x) (= x (round x)))</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme">  <span class="p">(</span><span class="nb">complex?</span> <span class="mi">3</span><span class="nv">+4i</span><span class="p">)</span>         <span class="nv">=&gt;</span>  <span class="no">#t</span>
  <span class="p">(</span><span class="nb">complex?</span> <span class="mi">3</span><span class="p">)</span>            <span class="nv">=&gt;</span>  <span class="no">#t</span>
  <span class="p">(</span><span class="nb">real?</span> <span class="mi">3</span><span class="p">)</span>               <span class="nv">=&gt;</span>  <span class="no">#t</span>
  <span class="p">(</span><span class="nb">real?</span> <span class="mf">-2.5</span><span class="nv">+0</span><span class="o">.</span><span class="mi">0</span><span class="nv">i</span><span class="p">)</span>       <span class="nv">=&gt;</span>  <span class="no">#t</span>
  <span class="p">(</span><span class="nb">real?</span> <span class="mx">#e1</span><span class="nv">e10</span><span class="p">)</span>          <span class="nv">=&gt;</span>  <span class="no">#t</span>
  <span class="p">(</span><span class="nb">rational?</span> <span class="mi">6</span><span class="nv">/10</span><span class="p">)</span>        <span class="nv">=&gt;</span>  <span class="no">#t</span>
  <span class="p">(</span><span class="nb">rational?</span> <span class="mi">6</span><span class="nv">/3</span><span class="p">)</span>         <span class="nv">=&gt;</span>  <span class="no">#t</span>
  <span class="p">(</span><span class="nb">integer?</span> <span class="mi">3</span><span class="nv">+0i</span><span class="p">)</span>         <span class="nv">=&gt;</span>  <span class="no">#t</span>
  <span class="p">(</span><span class="nb">integer?</span> <span class="mf">3.0</span><span class="p">)</span>          <span class="nv">=&gt;</span>  <span class="no">#t</span>
  <span class="p">(</span><span class="nb">integer?</span> <span class="mf">3.2</span><span class="p">)</span>          <span class="nv">=&gt;</span>  <span class="no">#f</span>
  <span class="p">(</span><span class="nb">integer?</span> <span class="mi">8</span><span class="nv">/4</span><span class="p">)</span>          <span class="nv">=&gt;</span>  <span class="no">#t</span>
  <span class="p">(</span><span class="nb">integer?</span> <span class="s">"no"</span><span class="p">)</span>         <span class="nv">=&gt;</span>  <span class="no">#f</span>
  <span class="p">(</span><span class="nb">complex?</span> <span class="m">+inf.0</span><span class="p">)</span>       <span class="nv">=&gt;</span>  <span class="no">#t</span>
  <span class="p">(</span><span class="nb">real?</span> <span class="m">-inf.0</span><span class="p">)</span>          <span class="nv">=&gt;</span>  <span class="no">#t</span>
  <span class="p">(</span><span class="nb">rational?</span> <span class="m">+inf.0</span><span class="p">)</span>      <span class="nv">=&gt;</span>  <span class="no">#f</span>
  <span class="p">(</span><span class="nb">integer?</span> <span class="m">-inf.0</span><span class="p">)</span>       <span class="nv">=&gt;</span>  <span class="no">#f</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(exact? z)</code></strong><br>
<strong><code>(inexact? z)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>These numerical predicates provide tests for the exactness of a
quantity. For any Scheme number, precisely one of these predicates
is true.</p>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(inexact z)</code></strong><br>
<strong><code>(exact z)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>These R<sup>7</sup>RS procedures correspond to the R<sup>5</sup>RS <code>exact&#8594;inexact</code>
and <code>inexact&#8594;exact</code> procedure respectively</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(exact&#8594;integer? z)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns  #t if z is both exact and an integer; otherwise returns #f.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">exact-integer?</span> <span class="mi">32</span><span class="p">)</span>   <span class="nv">=&gt;</span> <span class="no">#t</span>
<span class="p">(</span><span class="nf">exact-integer?</span> <span class="mf">32.0</span><span class="p">)</span> <span class="nv">=&gt;</span> <span class="no">#f</span>
<span class="p">(</span><span class="nf">exact-integer?</span> <span class="mi">32</span><span class="nv">/5</span><span class="p">)</span> <span class="nv">=&gt;</span> <span class="no">#f</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(bignum? x)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>This predicates returns <code>#t</code> if <code>x</code> is an integer number too large to be
represented with a native integer.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">bignum?</span> <span class="p">(</span><span class="nb">expt</span> <span class="mi">2</span> <span class="mi">300</span><span class="p">))</span>     <span class="nv">=&gt;</span> <span class="o">`</span><span class="no">#t</span><span class="o">`</span>   <span class="c1">;; (very likely)</span>
<span class="p">(</span><span class="nf">bignum?</span> <span class="mi">12</span><span class="p">)</span>               <span class="nv">=&gt;</span> <span class="o">`</span><span class="no">#f</span><span class="o">`</span>
<span class="p">(</span><span class="nf">bignum?</span> <span class="s">"no"</span><span class="p">)</span>             <span class="nv">=&gt;</span> <span class="o">`</span><span class="no">#f</span><span class="o">`</span></code></pre>
</div>
</div>
<div id="numeq" class="paragraph">
<p>



</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(= z1 z2 z3 &#8230;&#8203;)</code></strong><br>
<strong><code>(&lt; x1 x2 x3 &#8230;&#8203;)</code></strong><br>
<strong><code>(&gt; x1 x2 x3 &#8230;&#8203;)</code></strong><br>
<strong><code>(&#8656; x1 x2 x3 &#8230;&#8203;)</code></strong><br>
<strong><code>(&gt;= x1 x2 x3 &#8230;&#8203;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>These procedures return <code>#t</code> if their arguments are (respectively):
equal, monotonically increasing, monotonically decreasing,
monotonically nondecreasing, or monotonically nonincreasing.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nb">=</span> <span class="m">+inf.0</span> <span class="m">+inf.0</span><span class="p">)</span>           <span class="nv">=&gt;</span>  <span class="no">#t</span>
<span class="p">(</span><span class="nb">=</span> <span class="m">-inf.0</span> <span class="m">+inf.0</span><span class="p">)</span>           <span class="nv">=&gt;</span>  <span class="no">#f</span>
<span class="p">(</span><span class="nb">=</span> <span class="m">-inf.0</span> <span class="m">-inf.0</span><span class="p">)</span>           <span class="nv">=&gt;</span>  <span class="no">#t</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>For any finite real number x:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nb">&lt;</span> <span class="m">-inf.0</span> <span class="nv">x</span> <span class="m">+inf.0</span><span class="p">)</span>         <span class="nv">=&gt;</span>  <span class="no">#t</span>
<span class="p">(</span><span class="nb">&gt;</span> <span class="m">+inf.0</span> <span class="nv">x</span> <span class="m">-inf.0</span><span class="p">)</span>         <span class="nv">=&gt;</span>  <span class="no">#t</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>





</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(finite? z)</code></strong><br>
<strong><code>(infinite? z)</code></strong><br>
<strong><code>(zero? z)</code></strong><br>
<strong><code>(positive? x)</code></strong><br>
<strong><code>(negative? x)</code></strong><br>
<strong><code>(odd? n)</code></strong><br>
<strong><code>(even? n)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>These numerical predicates test a number for a particular property,
returning <code>#t</code> or <code>#f</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nb">positive?</span> <span class="m">+inf.0</span><span class="p">)</span>          <span class="nv">==&gt;</span>  <span class="no">#t</span>
<span class="p">(</span><span class="nb">negative?</span> <span class="m">-inf.0</span><span class="p">)</span>          <span class="nv">==&gt;</span>  <span class="no">#t</span>
<span class="p">(</span><span class="nf">finite?</span> <span class="m">-inf.0</span><span class="p">)</span>            <span class="nv">==&gt;</span>  <span class="no">#f</span>
<span class="p">(</span><span class="nf">infinite?</span> <span class="m">+inf.0</span><span class="p">)</span>          <span class="nv">==&gt;</span>  <span class="no">#t</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(nan? z)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>The <code>nan?</code> procedure returns #t on <code>+nan.0</code>, and on complex
numbers if their real or imaginary parts or both are <code>+nan.0</code>.
Otherwise it returns #f.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">nan?</span> <span class="nv">+nan</span><span class="o">.</span><span class="mi">0</span><span class="p">)</span>          <span class="nv">=&gt;</span>  <span class="no">#t</span>
<span class="p">(</span><span class="nf">nan?</span> <span class="mi">32</span><span class="p">)</span>              <span class="nv">=&gt;</span>  <span class="no">#f</span>
<span class="p">(</span><span class="nf">nan?</span> <span class="nv">+nan</span><span class="o">.</span><span class="mi">0</span><span class="nv">+5</span><span class="o">.</span><span class="mi">0</span><span class="nv">i</span><span class="p">)</span>     <span class="nv">=&gt;</span>  <span class="no">#t</span>
<span class="p">(</span><span class="nf">nan?</span> <span class="mi">1</span><span class="nv">+2i</span><span class="p">)</span>            <span class="nv">=&gt;</span>  <span class="no">#f</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(make-nan negative? quiet? payload)</code></strong><br>
<strong><code>(make-nan negative? quiet? payload float)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns a NaN whose sign bit is equal to <code>negative?</code>  (<code>#t</code> for negative,
<code>#f</code> for positive), whose quiet bit is equal to quiet? (<code>#t</code> for quiet,
<code>#f</code> for signaling), and whose payload is the positive exact integer payload.
It is an error if payload is larger than a NaN can hold.</p>
</div>
<div class="paragraph">
<p>The optional parameter <code>float</code>, is never used in <strong><em>STklos</em></strong>.</p>
</div>
<div class="paragraph">
<p>This function is defined in <strong><a href="http://srfi.schemers.org/srfi-208/srfi-208.html">SRFI-208</a></strong>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(nan-negative? nan)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>returns <code>#t</code> if the sign bit of <code>nan</code> is set and <code>#f</code> otherwise.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(nan-quiet? nan)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>returns <code>#t</code> if <code>nan</code> is a quiet NaN.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(nan-payload nan)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>returns  the payload bits of <code>nan</code> as a positive exact integer.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(nan=? nan1 nan2)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns <code>#t</code> if <code>nan1</code> and <code>nan2</code> have the same sign, quiet bit,
and payload; and <code>#f</code> otherwise.</p>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(max x1 x2 &#8230;&#8203;)</code></strong><br>
<strong><code>(min x1 x2 &#8230;&#8203;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>These procedures return the maximum or minimum of their arguments.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nb">max</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">)</span>              <span class="nv">=&gt;</span>  <span class="mi">4</span>    <span class="c1">; exact</span>
<span class="p">(</span><span class="nb">max</span> <span class="mf">3.9</span> <span class="mi">4</span><span class="p">)</span>            <span class="nv">=&gt;</span>  <span class="mf">4.0</span>  <span class="c1">; inexact</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>For any real number x:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nb">max</span> <span class="m">+inf.0</span> <span class="nv">x</span><span class="p">)</span>         <span class="nv">=&gt;</span>  <span class="m">+inf.0</span>
<span class="p">(</span><span class="nb">min</span> <span class="m">-inf.0</span> <span class="nv">x</span><span class="p">)</span>         <span class="nv">=&gt;</span>  <span class="m">-inf.0</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If any argument is inexact, then the result will also be
inexact
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>




</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(floor/ n1 n2)</code></strong><br>
<strong><code>(floor-quotient n1 n2)</code></strong><br>
<strong><code>(floor-remainder n1 n2)</code></strong><br>
<strong><code>(truncate/ n1 n2)</code></strong><br>
<strong><code>(truncate-quotient n1 n2)</code></strong><br>
<strong><code>(truncate-remainder n1 n2)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>These procedures implement number-theoretic (integer) division.  It is
an error if <code>n2</code> is zero. The procedures ending in '/' return two integers;
the other procedures return an integer.  All the procedures compute a
quotient <code>q</code> and remainder <code>r</code> such that <code>n1=n2*q+r</code>.</p>
</div>
<div class="paragraph">
<p>See R<sup>7</sup>RS for more information.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">floor/</span> <span class="mi">5</span> <span class="mi">2</span><span class="p">)</span>         <span class="nv">=&gt;</span> <span class="mi">2</span> <span class="mi">1</span>
<span class="p">(</span><span class="nf">floor/</span> <span class="mi">-5</span> <span class="mi">2</span><span class="p">)</span>        <span class="nv">=&gt;</span> <span class="mi">-3</span> <span class="mi">1</span>
<span class="p">(</span><span class="nf">floor/</span> <span class="mi">5</span> <span class="mi">-2</span><span class="p">)</span>        <span class="nv">=&gt;</span> <span class="mi">-3</span> <span class="mi">-1</span>
<span class="p">(</span><span class="nf">floor/</span> <span class="mi">-5</span> <span class="mi">-2</span><span class="p">)</span>       <span class="nv">=&gt;</span> <span class="mi">2</span> <span class="mi">-1</span>
<span class="p">(</span><span class="nf">truncate/</span> <span class="mi">5</span> <span class="mi">2</span><span class="p">)</span>      <span class="nv">=&gt;</span> <span class="mi">2</span> <span class="mi">1</span>
<span class="p">(</span><span class="nf">truncate/</span> <span class="mi">-5</span> <span class="mi">2</span><span class="p">)</span>     <span class="nv">=&gt;</span> <span class="mi">-2</span> <span class="mi">-1</span>
<span class="p">(</span><span class="nf">truncate/</span> <span class="mi">5</span> <span class="mi">-2</span><span class="p">)</span>     <span class="nv">=&gt;</span> <span class="mi">-2</span> <span class="mi">1</span>
<span class="p">(</span><span class="nf">truncate/</span> <span class="mi">-5</span> <span class="mi">-2</span><span class="p">)</span>    <span class="nv">=&gt;</span> <span class="mi">2</span> <span class="mi">-1</span>
<span class="p">(</span><span class="nf">truncate/</span> <span class="mf">-5.0</span> <span class="mi">-2</span><span class="p">)</span>  <span class="nv">=&gt;</span> <span class="mf">2.0</span> <span class="mf">-1.0</span><span class="nv">%</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(+ z1 &#8230;&#8203;)</code></strong><br>
<strong><code>(</strong> z1 &#8230;&#8203;)</code>*<br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>These procedures return the sum or product of their arguments.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nb">+</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">)</span>                 <span class="nv">=&gt;</span>  <span class="mi">7</span>
<span class="p">(</span><span class="nb">+</span> <span class="mi">3</span><span class="p">)</span>                   <span class="nv">=&gt;</span>  <span class="mi">3</span>
<span class="p">(</span><span class="nb">+</span><span class="p">)</span>                     <span class="nv">=&gt;</span>  <span class="mi">0</span>
<span class="p">(</span><span class="nb">+</span> <span class="m">+inf.0</span> <span class="m">+inf.0</span><span class="p">)</span>       <span class="nv">=&gt;</span>  <span class="m">+inf.0</span>
<span class="p">(</span><span class="nb">+</span> <span class="m">+inf.0</span> <span class="m">-inf.0</span><span class="p">)</span>       <span class="nv">=&gt;</span>  <span class="nv">+nan</span><span class="o">.</span><span class="mi">0</span>
<span class="p">(</span><span class="nb">*</span> <span class="mi">4</span><span class="p">)</span>                   <span class="nv">=&gt;</span>  <span class="mi">4</span>
<span class="p">(</span><span class="nb">*</span><span class="p">)</span>                     <span class="nv">=&gt;</span>  <span class="mi">1</span>
<span class="p">(</span><span class="nb">*</span> <span class="mi">5</span> <span class="m">+inf.0</span><span class="p">)</span>            <span class="nv">=&gt;</span>  <span class="m">+inf.0</span>
<span class="p">(</span><span class="nb">*</span> <span class="mi">-5</span> <span class="m">+inf.0</span><span class="p">)</span>           <span class="nv">=&gt;</span>  <span class="m">-inf.0</span>
<span class="p">(</span><span class="nb">*</span> <span class="m">+inf.0</span> <span class="m">+inf.0</span><span class="p">)</span>       <span class="nv">=&gt;</span>  <span class="m">+inf.0</span>
<span class="p">(</span><span class="nb">*</span> <span class="m">+inf.0</span> <span class="m">-inf.0</span><span class="p">)</span>       <span class="nv">=&gt;</span>  <span class="m">-inf.0</span>
<span class="p">(</span><span class="nb">*</span> <span class="mi">0</span> <span class="m">+inf.0</span><span class="p">)</span>            <span class="nv">=&gt;</span>  <span class="nv">+nan</span><span class="o">.</span><span class="mi">0</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For any finite number z:
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme">      <span class="p">(</span><span class="nb">+</span> <span class="m">+inf.0</span> <span class="nv">z</span><span class="p">)</span>      <span class="nv">=&gt;</span>  <span class="m">+inf.0</span>
      <span class="p">(</span><span class="nb">+</span> <span class="m">-inf.0</span> <span class="nv">z</span><span class="p">)</span>      <span class="nv">=&gt;</span>  <span class="m">-inf.0</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(- z)</code></strong><br>
<strong><code>(- z1 z2)</code></strong><br>
<strong><code>(/ z)</code></strong><br>
<strong><code>(/ z1 z2 &#8230;&#8203;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>With two or more arguments, these procedures return the difference or quotient
of their arguments, associating to the left. With one argument, however,
they return the additive or multiplicative inverse of their argument.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nb">-</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">)</span>                 <span class="nv">=&gt;</span>  <span class="mi">-1</span>
<span class="p">(</span><span class="nb">-</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span><span class="p">)</span>               <span class="nv">=&gt;</span>  <span class="mi">-6</span>
<span class="p">(</span><span class="nb">-</span> <span class="mi">3</span><span class="p">)</span>                   <span class="nv">=&gt;</span>  <span class="mi">-3</span>
<span class="p">(</span><span class="nb">-</span> <span class="m">+inf.0</span> <span class="m">+inf.0</span><span class="p">)</span>       <span class="nv">=&gt;</span> <span class="nv">+nan</span><span class="o">.</span><span class="mi">0</span>
<span class="p">(</span><span class="nb">/</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span><span class="p">)</span>               <span class="nv">=&gt;</span>  <span class="mi">3</span><span class="nv">/20</span>
<span class="p">(</span><span class="nb">/</span> <span class="mi">3</span><span class="p">)</span>                   <span class="nv">=&gt;</span>  <span class="mi">1</span><span class="nv">/3</span>
<span class="p">(</span><span class="nb">/</span> <span class="mf">0.0</span><span class="p">)</span>                 <span class="nv">=&gt;</span> <span class="m">+inf.0</span>
<span class="p">(</span><span class="nb">/</span> <span class="mi">0</span><span class="p">)</span>                   <span class="nv">=&gt;</span> <span class="nv">error</span> <span class="p">(</span><span class="nf">division</span> <span class="nv">by</span> <span class="mi">0</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(abs x)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>Abs</code> returns the absolute value of its argument.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nb">abs</span> <span class="mi">-7</span><span class="p">)</span>                <span class="nv">=&gt;</span>  <span class="mi">7</span>
<span class="p">(</span><span class="nb">abs</span> <span class="m">-inf.0</span><span class="p">)</span>            <span class="nv">=&gt;</span> <span class="m">+inf.0</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>

</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(quotient n1 n2)</code></strong><br>
<strong><code>(remainder n1 n2)</code></strong><br>
<strong><code>(modulo n1 n2)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>These procedures implement number-theoretic (integer) division. n2 should
be non-zero. All three procedures return integers.</p>
</div>
<div class="paragraph">
<p>If <code>n1/n2</code> is an integer:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nb">quotient</span> <span class="nv">n1</span> <span class="nv">n2</span><span class="p">)</span>   <span class="nv">=&gt;</span> <span class="nv">n1/n2</span>
<span class="p">(</span><span class="nb">remainder</span> <span class="nv">n1</span> <span class="nv">n2</span><span class="p">)</span>  <span class="nv">=&gt;</span> <span class="mi">0</span>
<span class="p">(</span><span class="nb">modulo</span> <span class="nv">n1</span> <span class="nv">n2</span><span class="p">)</span>     <span class="nv">=&gt;</span> <span class="mi">0</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If n1/n2 is not an integer:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nb">quotient</span> <span class="nv">n1</span> <span class="nv">n2</span><span class="p">)</span>   <span class="nv">=&gt;</span> <span class="nv">nq</span>
<span class="p">(</span><span class="nb">remainder</span> <span class="nv">n1</span> <span class="nv">n2</span><span class="p">)</span>  <span class="nv">=&gt;</span> <span class="nv">nr</span>
<span class="p">(</span><span class="nb">modulo</span> <span class="nv">n1</span> <span class="nv">n2</span><span class="p">)</span>     <span class="nv">=&gt;</span> <span class="nv">nm</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>where <code>nq</code> is <code>n1/n2</code> rounded towards zero, 0 &lt; abs(nr) &lt; abs(n2),
0 &lt; abs(nm) &lt; abs(n2), <code>nr</code> and <code>nm</code> differ from n1 by a multiple of n2,
<code>nr</code> has the same sign as n1, and <code>nm</code> has the same sign as n2.</p>
</div>
<div class="paragraph">
<p>From this we can conclude that for integers <code>n1</code> and <code>n2</code> with <code>n2</code> not
equal to 0,</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"> <span class="p">(</span><span class="nb">=</span> <span class="nv">n1</span> <span class="p">(</span><span class="nb">+</span> <span class="p">(</span><span class="nb">*</span> <span class="nv">n2</span> <span class="p">(</span><span class="nb">quotient</span> <span class="nv">n1</span> <span class="nv">n2</span><span class="p">))</span>
          <span class="p">(</span><span class="nb">remainder</span> <span class="nv">n1</span> <span class="nv">n2</span><span class="p">)))</span>   <span class="nv">=&gt;</span>  <span class="no">#t</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>provided all numbers involved in that computation are exact.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nb">modulo</span> <span class="mi">13</span> <span class="mi">4</span><span class="p">)</span>           <span class="nv">=&gt;</span>  <span class="mi">1</span>
<span class="p">(</span><span class="nb">remainder</span> <span class="mi">13</span> <span class="mi">4</span><span class="p">)</span>        <span class="nv">=&gt;</span>  <span class="mi">1</span>

<span class="p">(</span><span class="nb">modulo</span> <span class="mi">-13</span> <span class="mi">4</span><span class="p">)</span>          <span class="nv">=&gt;</span>  <span class="mi">3</span>
<span class="p">(</span><span class="nb">remainder</span> <span class="mi">-13</span> <span class="mi">4</span><span class="p">)</span>       <span class="nv">=&gt;</span>  <span class="mi">-1</span>

<span class="p">(</span><span class="nb">modulo</span> <span class="mi">13</span> <span class="mi">-4</span><span class="p">)</span>          <span class="nv">=&gt;</span>  <span class="mi">-3</span>
<span class="p">(</span><span class="nb">remainder</span> <span class="mi">13</span> <span class="mi">-4</span><span class="p">)</span>       <span class="nv">=&gt;</span>  <span class="mi">1</span>

<span class="p">(</span><span class="nb">modulo</span> <span class="mi">-13</span> <span class="mi">-4</span><span class="p">)</span>         <span class="nv">=&gt;</span>  <span class="mi">-1</span>
<span class="p">(</span><span class="nb">remainder</span> <span class="mi">-13</span> <span class="mi">-4</span><span class="p">)</span>      <span class="nv">=&gt;</span>  <span class="mi">-1</span>

<span class="p">(</span><span class="nb">remainder</span> <span class="mi">-13</span> <span class="mf">-4.0</span><span class="p">)</span>    <span class="nv">=&gt;</span>  <span class="mf">-1.0</span>  <span class="c1">; inexact</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(gcd n1 &#8230;&#8203;)</code></strong><br>
<strong><code>(lcm n1 &#8230;&#8203;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>These procedures return the greatest common divisor or least common
multiple of their arguments. The result is always non-negative.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nb">gcd</span> <span class="mi">32</span> <span class="mi">-36</span><span class="p">)</span>            <span class="nv">=&gt;</span>  <span class="mi">4</span>
<span class="p">(</span><span class="nb">gcd</span><span class="p">)</span>                   <span class="nv">=&gt;</span>  <span class="mi">0</span>
<span class="p">(</span><span class="nb">lcm</span> <span class="mi">32</span> <span class="mi">-36</span><span class="p">)</span>            <span class="nv">=&gt;</span>  <span class="mi">288</span>
<span class="p">(</span><span class="nb">lcm</span> <span class="mf">32.0</span> <span class="mi">-36</span><span class="p">)</span>          <span class="nv">=&gt;</span>  <span class="mf">288.0</span>  <span class="c1">; inexact</span>
<span class="p">(</span><span class="nb">lcm</span><span class="p">)</span>                   <span class="nv">=&gt;</span>  <span class="mi">1</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(numerator q)</code></strong><br>
<strong><code>(denominator q)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>These procedures return the numerator or denominator of their argument; the
result is computed as if the argument was represented as a fraction in
lowest terms. The denominator is always positive. The denominator of
0 is defined to be 1.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nb">numerator</span> <span class="p">(</span><span class="nb">/</span> <span class="mi">6</span> <span class="mi">4</span><span class="p">))</span>  <span class="nv">=&gt;</span>  <span class="mi">3</span>
<span class="p">(</span><span class="nb">denominator</span> <span class="p">(</span><span class="nb">/</span> <span class="mi">6</span> <span class="mi">4</span><span class="p">))</span>  <span class="nv">=&gt;</span>  <span class="mi">2</span>
<span class="p">(</span><span class="nb">denominator</span>
<span class="p">(</span><span class="nb">exact-&gt;inexact</span> <span class="p">(</span><span class="nb">/</span> <span class="mi">6</span> <span class="mi">4</span><span class="p">)))</span> <span class="nv">=&gt;</span> <span class="mf">2.0</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>


</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(floor x)</code></strong><br>
<strong><code>(ceiling x)</code></strong><br>
<strong><code>(truncate x)</code></strong><br>
<strong><code>(round x)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>These procedures return integers. <code>Floor</code> returns the largest integer not
larger than <code>x</code>. <code>Ceiling</code> returns the smallest integer not smaller than <code>x</code>.
<code>Truncate</code> returns the integer closest to <code>x</code> whose absolute value is not
larger than the absolute value of <code>x</code>. <code>Round</code> returns the closest integer
to <code>x</code>, rounding to even when <code>x</code> is halfway between two integers.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<code>Round</code> rounds to even for consistency with the default
rounding mode specified by the IEEE floating point standard.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If the argument to one of these procedures is inexact, then the
result will also be inexact. If an exact value is needed, the result should
be passed to the <code>inexact&#8594;exact</code> procedure.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nb">floor</span> <span class="mf">-4.3</span><span class="p">)</span>          <span class="nv">=&gt;</span>  <span class="mf">-5.0</span>
<span class="p">(</span><span class="nb">ceiling</span> <span class="mf">-4.3</span><span class="p">)</span>        <span class="nv">=&gt;</span>  <span class="mf">-4.0</span>
<span class="p">(</span><span class="nb">truncate</span> <span class="mf">-4.3</span><span class="p">)</span>       <span class="nv">=&gt;</span>  <span class="mf">-4.0</span>
<span class="p">(</span><span class="nb">round</span> <span class="mf">-4.3</span><span class="p">)</span>          <span class="nv">=&gt;</span>  <span class="mf">-4.0</span>

<span class="p">(</span><span class="nb">floor</span> <span class="mf">3.5</span><span class="p">)</span>           <span class="nv">=&gt;</span>  <span class="mf">3.0</span>
<span class="p">(</span><span class="nb">ceiling</span> <span class="mf">3.5</span><span class="p">)</span>         <span class="nv">=&gt;</span>  <span class="mf">4.0</span>
<span class="p">(</span><span class="nb">truncate</span> <span class="mf">3.5</span><span class="p">)</span>        <span class="nv">=&gt;</span>  <span class="mf">3.0</span>
<span class="p">(</span><span class="nb">round</span> <span class="mf">3.5</span><span class="p">)</span>           <span class="nv">=&gt;</span>  <span class="mf">4.0</span>  <span class="c1">; inexact</span>

<span class="p">(</span><span class="nb">round</span> <span class="mi">7</span><span class="nv">/2</span><span class="p">)</span>           <span class="nv">=&gt;</span>  <span class="mi">4</span>    <span class="c1">; exact</span>
<span class="p">(</span><span class="nb">round</span> <span class="mi">7</span><span class="p">)</span>             <span class="nv">=&gt;</span>  <span class="mi">7</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(rationalize x y)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Rationalize returns the simplest rational number differing from <code>x</code>
by no more than <code>y</code>. A rational number <code>r1</code> is simpler than another
rational number <code>r2</code> if <code>r1</code> = <code>p1/q1</code> and <code>r2</code> = <code>p2/q2</code> (in lowest
terms) and abs(p1) &#8656; abs(p2) and abs(q1) &#8656; abs(q2). Thus <code>3/5</code> is
simpler than <code>4/7</code>. Although not all rationals are comparable in
this ordering  (consider <code>2/7</code> and <code>3/5</code>) any interval contains a
rational number that
is simpler than every other rational number in that interval (the
simpler <code>2/5</code> lies between <code>2/7</code> and <code>3/5</code>). Note that <code>0</code> = <code>0/1</code> is the
simplest rational of all.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nb">rationalize</span>
   <span class="p">(</span><span class="nb">inexact-&gt;exact</span> <span class="o">.</span><span class="mi">3</span><span class="p">)</span> <span class="mi">1</span><span class="nv">/10</span><span class="p">)</span>  <span class="nv">=&gt;</span> <span class="mi">1</span><span class="nv">/3</span>    <span class="c1">; exact</span>
<span class="p">(</span><span class="nb">rationalize</span> <span class="o">.</span><span class="mi">3</span> <span class="mi">1</span><span class="nv">/10</span><span class="p">)</span>         <span class="nv">=&gt;</span> <span class="mx">#i1</span><span class="nv">/3</span>  <span class="c1">; inexact</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>






</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(exp z)</code></strong><br>
<strong><code>(log z)</code></strong><br>
<strong><code>(log z b)</code></strong><br>
<strong><code>(sin z)</code></strong><br>
<strong><code>(cos z)</code></strong><br>
<strong><code>(tan z)</code></strong><br>
<strong><code>(asin z)</code></strong><br>
<strong><code>(acos z)</code></strong><br>
<strong><code>(atan z)</code></strong><br>
<strong><code>(atan y x)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>These procedures compute the usual transcendental functions. <code>Log</code> computes the
natural logarithm of z (not the base ten logarithm). <code>Asin</code>, <code>acos</code>,
and <code>atan</code> compute arcsine, arccosine, and  arctangent, respectively.
The two-argument variant of <code>log</code> computes the logarithm of x in base b as</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nb">/</span> <span class="p">(</span><span class="nb">log</span> <span class="nv">x</span><span class="p">)</span> <span class="p">(</span><span class="nb">log</span> <span class="nv">b</span><span class="p">))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The two-argument variant of <code>atan</code> computes</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nb">angle</span> <span class="p">(</span><span class="nb">make-rectangular</span> <span class="nv">x</span> <span class="nv">y</span><span class="p">))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>When it is possible these procedures produce a real result from a real
argument.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(sqrt z)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the principal square root of <code>z</code>. The result will have either
positive real part, or zero real part and non-negative imaginary part.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(square z)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the square of <code>z</code>. This is equivalent to <code>(* z z)</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">square</span> <span class="mi">42</span><span class="p">)</span>     <span class="nv">=&gt;</span> <span class="mi">1764</span>
<span class="p">(</span><span class="nf">square</span> <span class="mf">2.0</span><span class="p">)</span>    <span class="nv">=&gt;</span> <span class="mf">4.0</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(exact-integer-sqrt k)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns two non negatives integers <code>s</code> and <code>r</code> where
<code>k=s<strong>2+r</code> and <code>k&lt;(s+1)</strong>2</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">exact-integer-sqrt</span> <span class="mi">4</span><span class="p">)</span>     <span class="nv">=&gt;</span> <span class="mi">2</span> <span class="mi">0</span>
<span class="p">(</span><span class="nf">exact-integer-sqrt</span> <span class="mi">5</span><span class="p">)</span>     <span class="nv">=&gt;</span> <span class="mi">2</span> <span class="mi">1</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(expt z1 z2)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns <code>z1</code> raised to the power <code>z2</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>0,(sup "z")</code> is 1 if <code>z = 0</code> and <code>0</code> otherwise.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>




</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(make-rectangular x1 x2)</code></strong><br>
<strong><code>(make-polar x3 x)</code></strong><br>
<strong><code>(real-part z)</code></strong><br>
<strong><code>(imag-part z)</code></strong><br>
<strong><code>(magnitude z)</code></strong><br>
<strong><code>(angle z)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>If x1, x2, x3, and x4 are real numbers and z is a complex number such that</p>
</div>
<div class="paragraph">
<p><code>z = x1 + x2.i = x3 . e,(sup "i.x4")</code></p>
</div>
<div class="paragraph">
<p>Then</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nb">make-rectangular</span> <span class="nv">x1</span> <span class="nv">x2</span><span class="p">)</span>       <span class="nv">=&gt;</span> <span class="nv">z</span>
<span class="p">(</span><span class="nb">make-polar</span> <span class="nv">x3</span> <span class="nv">x4</span><span class="p">)</span>             <span class="nv">=&gt;</span> <span class="nv">z</span>
<span class="p">(</span><span class="nb">real-part</span> <span class="nv">z</span><span class="p">)</span>                  <span class="nv">=&gt;</span> <span class="nv">x1</span>
<span class="p">(</span><span class="nb">imag-part</span> <span class="nv">z</span><span class="p">)</span>                  <span class="nv">=&gt;</span> <span class="nv">x2</span>
<span class="p">(</span><span class="nb">magnitude</span> <span class="nv">z</span><span class="p">)</span>                  <span class="nv">=&gt;</span> <span class="nv">abs</span><span class="p">(</span><span class="nf">x3</span><span class="p">)</span>
<span class="p">(</span><span class="nb">angle</span> <span class="nv">z</span><span class="p">)</span>                      <span class="nv">=&gt;</span> <span class="nv">xa</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>where
<code>-,(symbol "pi") &lt; xa &#8656; ,(symbol "pi")</code> with <code>xa = x4 + 2,(symbol "pi")n</code>
for some integer n.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nb">angle</span> <span class="m">+inf.0</span><span class="p">)</span>                 <span class="nv">=&gt;</span> <span class="mf">0.0</span>
<span class="p">(</span><span class="nb">angle</span> <span class="m">-inf.0</span><span class="p">)</span>                 <span class="nv">=&gt;</span> <span class="mf">3.14159265358979</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>Magnitude</code> is the same as <code>abs</code> for a real argument.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(exact&#8594;inexact z)</code></strong><br>
<strong><code>(inexact&#8594;exact z)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>Exact&#8594;inexact</code> returns an inexact representation of z.
The value returned is the inexact number that is numerically closest to
the argument.
<code>Inexact&#8594;exact</code> returns an exact representation of z.
The value returned is the exact number that is numerically closest to
the argument.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(number&#8594;string z)</code></strong><br>
<strong><code>(number&#8594;string z radix)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>Radix</code> must be an exact integer, either 2, 8, 10, or 16. If omitted, radix
defaults to 10. The procedure <code>number&#8594;string</code> takes a number and a radix
and returns as a string an external representation of the given number in
the given radix such that</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">number</span> <span class="nv">number</span><span class="p">)</span>
      <span class="p">(</span><span class="nf">radix</span> <span class="nv">radix</span><span class="p">))</span>
  <span class="p">(</span><span class="nb">eqv?</span> <span class="nv">number</span>
       <span class="p">(</span><span class="nb">string-&gt;number</span> <span class="p">(</span><span class="nb">number-&gt;string</span> <span class="nv">number</span> <span class="nv">radix</span><span class="p">)</span> <span class="nv">radix</span><span class="p">)))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>is true. It is an error if no possible result makes this expression true.</p>
</div>
<div class="paragraph">
<p>If <code>z</code> is inexact, the radix is 10, and the above expression can be
satisfied by a result that contains a decimal point, then the result
contains a decimal point and is expressed using the minimum number of digits
(exclusive of exponent and trailing zeroes) needed to make the above expression
true; otherwise the format of the result is unspecified.</p>
</div>
<div class="paragraph">
<p>The result returned by <code>number&#8594;string</code> never contains an explicit radix
prefix.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The error case can occur only when <code>z</code> is not a complex number or
is a complex number with a non-rational real or imaginary part.
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
If <code>z</code> is an inexact number represented using flonums, and
the radix is 10, then the above expression is normally satisfied by a result
containing a decimal point. The unspecified case allows for infinities,
NaNs, and non-flonum representations.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(string&#8594;number string)</code></strong><br>
<strong><code>(string&#8594;number string radix)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns a number of the maximally precise representation expressed by the
given <code>string</code>. <code>Radix</code> must be an exact integer, either 2, 8, 10, or 16.
If supplied, <code>radix</code> is a default radix that may be overridden by an explicit
radix prefix in <code>string</code> (e.g. ,(code "\"#o177\"")). If <code>radix</code> is not
 supplied, then
the default radix is 10. If <code>string</code> is not a syntactically valid notation
for a number, then <code>string&#8594;number</code> returns <code>#f</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nb">string-&gt;number</span> <span class="s">"100"</span><span class="p">)</span>        <span class="nv">=&gt;</span>  <span class="mi">100</span>
<span class="p">(</span><span class="nb">string-&gt;number</span> <span class="s">"100"</span> <span class="mi">16</span><span class="p">)</span>     <span class="nv">=&gt;</span>  <span class="mi">256</span>
<span class="p">(</span><span class="nb">string-&gt;number</span> <span class="s">"1e2"</span><span class="p">)</span>        <span class="nv">=&gt;</span>  <span class="mf">100.0</span>
<span class="p">(</span><span class="nb">string-&gt;number</span> <span class="s">"15##"</span><span class="p">)</span>       <span class="nv">=&gt;</span>  <span class="mf">1500.0</span>
<span class="p">(</span><span class="nb">string-&gt;number</span> <span class="s">"+inf.0"</span><span class="p">)</span>     <span class="nv">=&gt;</span>  <span class="m">+inf.0</span>
<span class="p">(</span><span class="nb">string-&gt;number</span> <span class="s">"-inf.0"</span><span class="p">)</span>     <span class="nv">=&gt;</span>  <span class="m">-inf.0</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>



</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(bit-and n1 n2 &#8230;&#8203;)</code></strong><br>
<strong><code>(bit-or n1 n2 &#8230;&#8203;)</code></strong><br>
<strong><code>(bit-xor n1 n2 &#8230;&#8203;)</code></strong><br>
<strong><code>(bit-not n)</code></strong><br>
<strong><code>(bit-shift n m)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>These procedures allow the manipulation of integers as bit fields.
The integers can be of arbitrary length. <code>Bit-and</code>, <code>bit-or</code> and
<code>bit-xor</code> respectively compute the bitwise ,(emph "and"), inclusive and
exclusive ,(emph "or"). <code>bit-not</code> returns the bitwise ,(emph "not") of <code>n</code>.
<code>bit-shift</code> returns the bitwise ,(emph "shift") of <code>n</code>. The integer <code>n</code>
is shifted left by <code>m</code> bits; If <code>m</code> is negative, <code>n</code> is shifted right by
<code>-m</code> bits.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">bit-or</span> <span class="mi">5</span> <span class="mi">3</span><span class="p">)</span>       <span class="nv">=&gt;</span> <span class="mi">7</span>
<span class="p">(</span><span class="nf">bit-xor</span> <span class="mi">5</span> <span class="mi">3</span><span class="p">)</span>      <span class="nv">=&gt;</span> <span class="mi">6</span>
<span class="p">(</span><span class="nf">bit-and</span> <span class="mi">5</span> <span class="mi">3</span><span class="p">)</span>      <span class="nv">=&gt;</span> <span class="mi">1</span>
<span class="p">(</span><span class="nf">bit-not</span> <span class="mi">5</span><span class="p">)</span>        <span class="nv">=&gt;</span> <span class="mi">-6</span>
<span class="p">(</span><span class="nf">bit-or</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">4</span> <span class="mi">8</span><span class="p">)</span>   <span class="nv">=&gt;</span> <span class="mi">15</span>
<span class="p">(</span><span class="nf">bit-shift</span> <span class="mi">5</span> <span class="mi">3</span><span class="p">)</span>    <span class="nv">=&gt;</span> <span class="mi">40</span>
<span class="p">(</span><span class="nf">bit-shift</span> <span class="mi">5</span> <span class="mi">-1</span><span class="p">)</span>   <span class="nv">=&gt;</span> <span class="mi">2</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(random-integer n)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Return an integer in the range \[0, &#8230;&#8203;, <code>n</code>\[.  Subsequent results of
this procedure appear to be independent uniformly distributed over
the range \[0, &#8230;&#8203;, <code>n</code>\[. The argument <code>n</code> must be a positive integer,
otherwise an error is signaled. This function is equivalent to the eponym
function of SRFI-27 (see ,(link-srfi 27) definition for more details).</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(random-real)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Return a real number <code>r</code> such that <code>0 &lt; r &lt; 1</code>.
Subsequent results of this procedure appear to be independent uniformly
distributed. This function is equivalent to the eponym
function of SRFI-27 (see ,(link-srfi 27) definition for more details).</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(decode-float n)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>decode-float</code> returns three exact integers: <code>significand</code>, <code>exponent</code>
and <code>sign</code> (where <code>-1 &#8656; sign &#8656; 1</code>). The values returned by <code>decode-float</code>
satisfy:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="nv">n</span> <span class="nv">=</span> <span class="p">(</span><span class="nb">*</span> <span class="nv">sign</span> <span class="nv">significand</span> <span class="p">(</span><span class="nb">expt</span> <span class="mi">2</span> <span class="nv">exponent</span><span class="p">))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Here is an example of <code>decode-float</code> usage.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">receive</span> <span class="nv">l</span> <span class="p">(</span><span class="nf">decode-float</span> <span class="mf">-1.234</span><span class="p">)</span> <span class="nv">l</span><span class="p">)</span>
                    <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">5557441940175192</span> <span class="mi">-52</span> <span class="mi">-1</span><span class="p">)</span>
<span class="p">(</span><span class="nb">exact-&gt;inexact</span> <span class="p">(</span><span class="nb">*</span> <span class="mi">-1</span>
                    <span class="mi">5557441940175192</span>
                    <span class="p">(</span><span class="nb">expt</span> <span class="mi">2</span> <span class="mi">-52</span><span class="p">)))</span>
                    <span class="nv">=&gt;</span> <span class="mf">-1.234</span></code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_fixnums">4.2.1. Fixnums</h4>
<div class="paragraph">
<p>
<strong><em>STklos</em></strong> defines small integers as fixnums. Operations on fixnums
are generally faster than operations which accept general numbers.
Fixnums operations, as described below, may produce results which are incorrect
if some temporary computation falls outside the range of fixnum. These
functions should be used only when speed really matters.</p>
</div>
<div class="paragraph">
<p>The functions defined in this section are conform to the ones defined in
<strong><a href="http://srfi.schemers.org/srfi-143/srfi-143.html">SRFI-143</a></strong> (<em>Fixnums</em>)</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(fixnum? obj)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns <code>#t</code> if obj is an exact integer within the fixnum range,
<code>#f</code> otherwise.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(fixnum-width)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the number of bits used to represent a fixnum number</p>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(least-fixnum)</code></strong><br>
<strong><code>(greatest-fixnum)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>These procedures return the minimum value and the maximum value of
the fixnum range.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(fxzero? obj)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>fxzero?</code> returns <code>#t</code> if <code>obj</code> is the fixnum zero and returns
<code>#f</code> if it is a non-zero fixnum.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme">  <span class="p">(</span><span class="nf">fxzero?</span> <span class="no">#f</span><span class="p">)</span>             <span class="nv">=&gt;</span>  <span class="nv">error</span>
  <span class="p">(</span><span class="nf">fxzero?</span> <span class="p">(</span><span class="nb">expt</span> <span class="mi">100</span> <span class="mi">100</span><span class="p">))</span> <span class="nv">=&gt;</span>  <span class="nv">error</span>
  <span class="p">(</span><span class="nf">fxzero?</span> <span class="mi">0</span><span class="p">)</span>              <span class="nv">=&gt;</span>  <span class="no">#t</span>
  <span class="p">(</span><span class="nf">fxzero?</span> <span class="mi">1</span><span class="p">)</span>              <span class="nv">=&gt;</span>  <span class="no">#f</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(fxpositive? obj)</code></strong><br>
<strong><code>(fxnegative? obj)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>fxpositive?</code> returns <code>#t</code> if <code>obj</code> is a positive fixnum and returns
<code>#f</code> if it is a non-positive fixnum. <code>fxnegative?</code> can be used to test
if a fixnum is negative.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme">  <span class="p">(</span><span class="nf">fxpositive?</span> <span class="no">#f</span><span class="p">)</span>             <span class="nv">=&gt;</span>  <span class="nv">error</span>
  <span class="p">(</span><span class="nf">fxpositive?</span> <span class="p">(</span><span class="nb">expt</span> <span class="mi">100</span> <span class="mi">100</span><span class="p">))</span> <span class="nv">=&gt;</span>  <span class="nv">error</span>
  <span class="p">(</span><span class="nf">fxpositive?</span> <span class="mi">0</span><span class="p">)</span>              <span class="nv">=&gt;</span>  <span class="no">#f</span>
  <span class="p">(</span><span class="nf">fxpositive?</span> <span class="mi">1</span><span class="p">)</span>              <span class="nv">=&gt;</span>  <span class="no">#t</span>
  <span class="p">(</span><span class="nf">fxpositive?</span> <span class="mi">-1</span><span class="p">)</span>             <span class="nv">=&gt;</span>  <span class="no">#f</span>
  <span class="p">(</span><span class="nf">fxnegative?</span> <span class="mi">0</span><span class="p">)</span>              <span class="nv">=&gt;</span>  <span class="no">#f</span>
  <span class="p">(</span><span class="nf">fxnegative?</span> <span class="mi">1</span><span class="p">)</span>              <span class="nv">=&gt;</span>  <span class="no">#f</span>
  <span class="p">(</span><span class="nf">fxnegative?</span> <span class="mi">-1</span><span class="p">)</span>             <span class="nv">=&gt;</span>  <span class="no">#t</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(fxodd? obj)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>fxodd?</code> returns <code>#t</code> if <code>obj</code> is a odd fixnum and returns
<code>#f</code> if it is an even fixnum.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme">  <span class="p">(</span><span class="nf">fxodd?</span> <span class="no">#f</span><span class="p">)</span>             <span class="nv">=&gt;</span>  <span class="nv">error</span>
  <span class="p">(</span><span class="nf">fxodd?</span> <span class="p">(</span><span class="nb">expt</span> <span class="mi">100</span> <span class="mi">100</span><span class="p">))</span> <span class="nv">=&gt;</span>  <span class="nv">error</span>
  <span class="p">(</span><span class="nf">fxodd?</span> <span class="mi">0</span><span class="p">)</span>              <span class="nv">=&gt;</span>  <span class="no">#f</span>
  <span class="p">(</span><span class="nf">fxodd?</span> <span class="mi">1</span><span class="p">)</span>              <span class="nv">=&gt;</span>  <span class="no">#t</span>
  <span class="p">(</span><span class="nf">fxodd?</span> <span class="mi">4</span><span class="p">)</span>              <span class="nv">=&gt;</span>  <span class="no">#f</span>
  <span class="p">(</span><span class="nf">fxeven?</span> <span class="mi">0</span><span class="p">)</span>             <span class="nv">=&gt;</span>  <span class="no">#t</span>
  <span class="p">(</span><span class="nf">fxeven?</span> <span class="mi">1</span><span class="p">)</span>             <span class="nv">=&gt;</span>  <span class="no">#f</span>
  <span class="p">(</span><span class="nf">fxeven?</span> <span class="mi">4</span><span class="p">)</span>             <span class="nv">=&gt;</span>  <span class="no">#t</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>






</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(fx+ fx1 fx2)</code></strong><br>
<strong><code>(fx- fx1 fx2)</code></strong><br>
<strong><code>(fx</strong> fx1 fx2)</code>*<br>
<strong><code>(fxquotient fx1 fx2)</code></strong><br>
<strong><code>(fxremainder fx1 fx2)</code></strong><br>
<strong><code>(fxmodulo fx1 fx2)</code></strong><br>
<strong><code>(fxabs fx)</code></strong><br>
<strong><code>(fxneg fx)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>These procedures compute (respectively) the sum, the difference, the product,
the quotient and the remainder and modulo of the fixnums <code>fx1</code> and <code>fx2</code>.
The call of  <code>fx-</code> with one parameter <code>fx</code> computes the opposite of <code>fx</code>, and
is equivalent in a call of <code>fxneg</code> with this parameter. <code>fxabs</code>
computes the absolute value of <code>fx</code>.</p>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(fxsquare fx1)</code></strong><br>
<strong><code>(fxsqrt fx1)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>These procedures compute (respectively) the square and the square root
of the fixnum <code>fx1</code>.
<code>fxsqrt</code> id semantically equivalent to exact-integer-sqrt (not sqrt), so
that <code>(fxsqrt n)</code> returns two values <code>a</code>, <code>b</code>, such that <code>a*a+b</code>=<code>n</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme">  <span class="p">(</span><span class="nf">fxsqrt</span> <span class="no">#f</span><span class="p">)</span>             <span class="nv">=&gt;</span>  <span class="nv">error</span>
  <span class="p">(</span><span class="nf">fxdqrt</span> <span class="p">(</span><span class="nb">expt</span> <span class="mi">100</span> <span class="mi">100</span><span class="p">))</span> <span class="nv">=&gt;</span>  <span class="nv">error</span>
  <span class="p">(</span><span class="nf">fxsqrt</span> <span class="mi">-1</span><span class="p">)</span>             <span class="nv">=&gt;</span>  <span class="nv">error</span>
  <span class="p">(</span><span class="nf">fxsqrt</span> <span class="mi">0</span><span class="p">)</span>              <span class="nv">=&gt;</span>  <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span>
  <span class="p">(</span><span class="nf">fxsqrt</span> <span class="mi">1</span><span class="p">)</span>              <span class="nv">=&gt;</span>  <span class="mi">1</span><span class="o">,</span> <span class="mi">0</span>
  <span class="p">(</span><span class="nf">fxsqrt</span> <span class="mi">6</span><span class="p">)</span>              <span class="nv">=&gt;</span>  <span class="mi">2</span><span class="o">,</span> <span class="mi">2</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(fxmax fx1 fx2 &#8230;&#8203;)</code></strong><br>
<strong><code>(fxmin fx1 fx2 &#8230;&#8203;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>These procedures return the maximum or minimum of their fixnum arguments.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">fxmax</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">)</span>              <span class="nv">=&gt;</span>  <span class="mi">4</span>
<span class="p">(</span><span class="nf">fxmax</span> <span class="mf">3.9</span> <span class="mi">4</span><span class="p">)</span>            <span class="nv">=&gt;</span>  <span class="nv">error</span>
<span class="p">(</span><span class="nf">fxmax</span><span class="p">)</span>                  <span class="nv">=&gt;</span>  <span class="nv">error</span>
<span class="p">(</span><span class="nf">fxmax</span> <span class="mi">2</span> <span class="mi">-1</span> <span class="mi">3</span><span class="p">)</span>           <span class="nv">=&gt;</span>  <span class="mi">3</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>



</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(fx&lt;? fx1 fx2 &#8230;&#8203;)</code></strong><br>
<strong><code>(fx&#8656;? fx1 fx2 &#8230;&#8203;)</code></strong><br>
<strong><code>(fx&gt;? fx1 fx2 &#8230;&#8203;)</code></strong><br>
<strong><code>(fx&gt;=? fx1 fx2 &#8230;&#8203;)</code></strong><br>
<strong><code>(fx=? fx1 fx2 &#8230;&#8203;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>These are SRFI-143 procedures that compare the fixnums <code>fx1</code>, <code>fx2</code>, and so on.
<code>fx&lt;?</code> and <code>fx&gt;?</code> return <code>#t</code> if the arguments are in strictly
increasing/decreasing order;
<code>fx&#8656;?</code> and <code>fx&gt;=?</code> do the same, but admit equal neighbors;
<code>fx=?</code> returns <code>#t</code> if the arguments are all equal.</p>
</div>
<div class="paragraph">
<p>


</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(fxnot fx1)</code></strong><br>
<strong><code>(fxand fx &#8230;&#8203;)</code></strong><br>
<strong><code>(fxior fx &#8230;&#8203;)</code></strong><br>
<strong><code>(fxxor fx &#8230;&#8203;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>These procedures are specified in SRFI-143, and they return
(respectively) the bitwise not, and, inclusive or and exclusive
or of their arguments, which must be fixnums.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">fxnot</span> <span class="mi">1</span><span class="p">)</span>              <span class="nv">=&gt;</span> <span class="mi">-2</span>
<span class="p">(</span><span class="nf">fxnot</span> <span class="mi">0</span><span class="p">)</span>              <span class="nv">=&gt;</span> <span class="mi">-1</span>
<span class="p">(</span><span class="nf">fxand</span> <span class="mh">#x1010</span> <span class="mh">#x1011</span><span class="p">)</span>  <span class="nv">=&gt;</span> <span class="mi">4112</span>  <span class="c1">; = #x1010</span>
<span class="p">(</span><span class="nf">fxior</span> <span class="mh">#x1010</span> <span class="mh">#x1011</span><span class="p">)</span>  <span class="nv">=&gt;</span> <span class="mi">4113</span>  <span class="c1">; = #x1011</span>
<span class="p">(</span><span class="nf">fxxor</span> <span class="mh">#x1010</span> <span class="mh">#x1011</span><span class="p">)</span>  <span class="nv">=&gt;</span> <span class="mi">1</span>     <span class="c1">; = #x0001</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>

</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(fxarithmetic-shift-right fx count)</code></strong><br>
<strong><code>(fxarithmetic-shift-left fx count)</code></strong><br>
<strong><code>(fxarithmetic-shift fx count)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>These procedures are specified in SRFI-143, and they perform
bitwise right-shift, left-shft and shift with arbitrary direction
on fixnums. The strictly left and right shifts are more efficient.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">fxarithmetic-shift-right</span> <span class="mb">#b100110</span> <span class="mi">3</span><span class="p">)</span> <span class="nv">=&gt;</span>   <span class="mi">4</span> <span class="c1">; = #b100</span>
<span class="p">(</span><span class="nf">fxarithmetic-shift-left</span>  <span class="mb">#b100110</span> <span class="mi">3</span><span class="p">)</span> <span class="nv">=&gt;</span> <span class="mi">304</span> <span class="c1">; = #b100110000</span>
<span class="p">(</span><span class="nf">fxarithmetic-shift</span> <span class="mb">#b101</span> <span class="mi">2</span><span class="p">)</span>          <span class="nv">=&gt;</span> <span class="mi">20</span>  <span class="c1">; = #b10100</span>
<span class="p">(</span><span class="nf">fxarithmetic-shift</span> <span class="mb">#b101</span> <span class="mi">-2</span><span class="p">)</span>         <span class="nv">=&gt;</span>  <span class="mi">1</span>  <span class="c1">; =#b1</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(fxlength fx)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>This is a SRFI-143 procedure that returns the length of the fixnum in
bits (that is, the number of bits necessary to represent the number).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">fxlength</span> <span class="mb">#b101</span><span class="p">)</span>          <span class="nv">=&gt;</span>  <span class="mi">3</span>
<span class="p">(</span><span class="nf">fxlength</span> <span class="mb">#b1101</span><span class="p">)</span>         <span class="nv">=&gt;</span>  <span class="mi">4</span>
<span class="p">(</span><span class="nf">fxlength</span> <span class="mb">#b0101</span><span class="p">)</span>         <span class="nv">=&gt;</span>  <span class="mi">3</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(fxif mask fx1 fx2)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>This is a SRFI-143 procedure that merge the fixnum bitstrings <code>fx1</code> and <code>fx2</code>, with
bitstring  mask determining from which string to take each bit. That is, if the kth bit
of mask is 1, then the kth bit of the result is the kth bit of <code>fx1</code>, otherwise the kth
bit of <code>fx2</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">fxif</span> <span class="mi">3</span> <span class="mi">1</span> <span class="mi">8</span><span class="p">)</span>                            <span class="nv">=&gt;</span> <span class="mi">9</span>
<span class="p">(</span><span class="nf">fxif</span> <span class="mi">3</span> <span class="mi">8</span> <span class="mi">1</span><span class="p">)</span>                            <span class="nv">=&gt;</span> <span class="mi">0</span>
<span class="p">(</span><span class="nf">fxif</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">2</span><span class="p">)</span>                            <span class="nv">=&gt;</span> <span class="mi">3</span>
<span class="p">(</span><span class="nf">fxif</span> <span class="mb">#b00111100</span> <span class="mb">#b11110000</span> <span class="mb">#b00001111</span><span class="p">)</span> <span class="nv">=&gt;</span> <span class="mb">#b00110011</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(fxbit-set? index fx)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>This is a SRFI-143 procedure that returns <code>#t</code> if the <code>index</code>-th bit of
<code>fx</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">fxbit-set?</span> <span class="mi">1</span> <span class="mi">3</span><span class="p">)</span>          <span class="nv">=&gt;</span> <span class="no">#t</span>
<span class="p">(</span><span class="nf">fxbit-set?</span> <span class="mi">2</span> <span class="mi">7</span><span class="p">)</span>          <span class="nv">=&gt;</span> <span class="no">#t</span>
<span class="p">(</span><span class="nf">fxbit-set?</span> <span class="mi">3</span> <span class="mi">6</span><span class="p">)</span>          <span class="nv">=&gt;</span> <span class="no">#f</span>
<span class="p">(</span><span class="nf">fxbit-set?</span> <span class="mi">5</span> <span class="mb">#b00111100</span><span class="p">)</span> <span class="nv">=&gt;</span> <span class="no">#t</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(fxcopy-bit index fx value)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>This is a SRFI-143 procedure that sets the <code>index</code>-th bit if <code>fx</code>
to one if <code>value</code> is <code>#t</code>, and to zero if <code>value</code> is <code>#f</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">fxcopy-bit</span> <span class="mi">2</span> <span class="mi">3</span> <span class="no">#t</span><span class="p">)</span>          <span class="nv">=&gt;</span>  <span class="mi">7</span>
<span class="p">(</span><span class="nf">fxcopy-bit</span> <span class="mi">2</span> <span class="mi">7</span> <span class="no">#f</span><span class="p">)</span>          <span class="nv">=&gt;</span>  <span class="mi">3</span>
<span class="p">(</span><span class="nf">fxcopy-bit</span> <span class="mi">5</span> <span class="mb">#b00111100</span> <span class="no">#f</span><span class="p">)</span> <span class="nv">=&gt;</span> <span class="mi">28</span> <span class="c1">; = #b00011100</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(fxbit-count fx1)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>This is a SRFI-143 procedure that returns the quantity of bits equal to one in
the fixnum <code>fx</code> (that is, computes its Hamming weight).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">fxbit-count</span> <span class="mi">8</span><span class="p">)</span>                         <span class="nv">=&gt;</span> <span class="mi">1</span>
<span class="p">(</span><span class="nf">fxbit-count</span> <span class="mi">3</span><span class="p">)</span>                         <span class="nv">=&gt;</span> <span class="mi">2</span>
<span class="p">(</span><span class="nf">fxbit-count</span> <span class="mi">7</span><span class="p">)</span>                         <span class="nv">=&gt;</span> <span class="mi">3</span>
<span class="p">(</span><span class="nf">fxbit-count</span> <span class="mb">#b00111010</span><span class="p">)</span>                <span class="nv">=&gt;</span> <span class="mi">4</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(fxfirst-set-bit fx1)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>This is a SRFI-143 procedure that returns the index of the first (smallest index)
1 bit in bitstring <code>fx</code>. Returns -1 if <code>fx</code> contains no 1 bits (i.e., if <code>fx</code>
is zero).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">fxfirst-set-bit</span>  <span class="mi">8</span><span class="p">)</span>                         <span class="nv">=&gt;</span> <span class="mi">3</span>
<span class="p">(</span><span class="nf">fxfirst-set-bit</span>  <span class="mi">3</span><span class="p">)</span>                         <span class="nv">=&gt;</span> <span class="mi">0</span>
<span class="p">(</span><span class="nf">fxfirst-set-bit</span>  <span class="mi">7</span><span class="p">)</span>                         <span class="nv">=&gt;</span> <span class="mi">0</span>
<span class="p">(</span><span class="nf">fxfirst-set-bit</span>  <span class="mb">#b10110000</span><span class="p">)</span>                <span class="nv">=&gt;</span> <span class="mi">4</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(fxbit-field fx1 start end)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>This is a SRFI-143 procedure that extracts a bit field from the fixnum <code>fx1</code>.
The bit field is the sequence of bits between <code>start</code> (including) and <code>end</code>
(excluding)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">fxbit-field</span>  <span class="mb">#b10110000</span> <span class="mi">3</span> <span class="mi">5</span><span class="p">)</span>  <span class="nv">=&gt;</span> <span class="mi">6</span> <span class="c1">; = #b110</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(fxbit-field-rotate fx)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>This is a SRFI-143 procedure that returns fx with the field cyclically permuted
by count bits towards high-order.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">fxbit-field-rotate</span> <span class="mb">#b101011100</span> <span class="mi">-2</span> <span class="mi">1</span> <span class="mi">5</span><span class="p">)</span>     <span class="nv">=&gt;</span> <span class="mi">342</span>  <span class="nv">=</span> <span class="mb">#b101010110</span>
<span class="p">(</span><span class="nf">fxbit-field-rotate</span> <span class="mb">#b101011011110</span> <span class="mi">-3</span> <span class="mi">2</span> <span class="mi">10</span><span class="p">)</span> <span class="nv">=&gt;</span> <span class="mi">3034</span> <span class="nv">=</span> <span class="mb">#b101111011010</span>
<span class="p">(</span><span class="nf">fxbit-field-rotate</span> <span class="mb">#b101011011110</span> <span class="mi">3</span> <span class="mi">2</span> <span class="mi">10</span><span class="p">)</span>  <span class="nv">=&gt;</span> <span class="mi">2806</span> <span class="nv">=</span> <span class="mb">#b101011110110</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(fxbit-field-reverse fx)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>This is a SRFI-143 procedure that returns fx with the order of the bits in the
field reversed.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">fxbit-field-reverse</span> <span class="mb">#b101011100</span> <span class="mi">1</span> <span class="mi">5</span><span class="p">)</span>     <span class="nv">=&gt;</span> <span class="mb">#b101001110</span>
<span class="p">(</span><span class="nf">fxbit-field-reverse</span> <span class="mb">#b101011011110</span> <span class="mi">2</span> <span class="mi">10</span><span class="p">)</span> <span class="nv">=&gt;</span> <span class="mb">#b101110110110</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(fx+/carry i j k)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns two values: <code>i</code>+<code>j</code>+<code>k</code>, and carry: it is the value of the computation</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">let*-values</span> <span class="p">(((</span><span class="nf">s</span><span class="p">)</span> <span class="p">(</span><span class="nb">+</span> <span class="nv">i</span> <span class="nv">j</span> <span class="nv">k</span><span class="p">))</span>
              <span class="p">((</span><span class="nf">q</span> <span class="nv">r</span><span class="p">)</span> <span class="p">(</span><span class="nf">balanced/</span> <span class="nv">s</span> <span class="p">(</span><span class="nb">expt</span> <span class="mi">2</span> <span class="nv">fx-width</span><span class="p">))))</span>
  <span class="p">(</span><span class="nb">values</span> <span class="nv">r</span> <span class="nv">q</span><span class="p">))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(fx-/carry i j k)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns two values: <code>i</code>-<code>j</code>-<code>k</code>, and carry: it is the value of the computation</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">let*-values</span> <span class="p">(((</span><span class="nf">s</span><span class="p">)</span> <span class="p">(</span><span class="nb">-</span> <span class="nv">i</span> <span class="nv">j</span> <span class="nv">k</span><span class="p">))</span>
              <span class="p">((</span><span class="nf">q</span> <span class="nv">r</span><span class="p">)</span> <span class="p">(</span><span class="nf">balanced/</span> <span class="nv">s</span> <span class="p">(</span><span class="nb">expt</span> <span class="mi">2</span> <span class="nv">fx-width</span><span class="p">))))</span>
  <span class="p">(</span><span class="nb">values</span> <span class="nv">r</span> <span class="nv">q</span><span class="p">))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(fx</strong>/carry i j k)</code>*<br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns two values: <code>i</code>*<code>j</code>+<code>k</code>, and carry: it is the value of the computation</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">let*-values</span> <span class="p">(((</span><span class="nf">s</span><span class="p">)</span> <span class="p">(</span><span class="nb">+</span> <span class="p">(</span><span class="nb">*</span> <span class="nv">i</span> <span class="nv">j</span><span class="p">)</span> <span class="nv">k</span><span class="p">))</span>
              <span class="p">((</span><span class="nf">q</span> <span class="nv">r</span><span class="p">)</span> <span class="p">(</span><span class="nf">balanced/</span> <span class="nv">s</span> <span class="p">(</span><span class="nb">expt</span> <span class="mi">2</span> <span class="nv">fx-width</span><span class="p">))))</span>
  <span class="p">(</span><span class="nb">values</span> <span class="nv">r</span> <span class="nv">q</span><span class="p">))</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_booleans">4.3. Booleans</h3>
<div class="paragraph">
<p>


Of all the standard Scheme values, only <code>#f</code> counts as false in
conditional expressions.  Except for <code>#f</code>, all standard Scheme values,
including <code>#t</code>, pairs, the empty list, symbols, numbers, strings,
vectors, and procedures, count as true.</p>
</div>
<div class="paragraph">
<p>Boolean constants evaluate to themselves, so they do not need to be
quoted in programs.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(not obj)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Not returns <code>#t</code> if <code>obj</code> is false, and returns <code>#f</code> otherwise.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme">  <span class="p">(</span><span class="nb">not</span> <span class="no">#t</span><span class="p">)</span>         <span class="nv">=&gt;</span>  <span class="no">#f</span>
  <span class="p">(</span><span class="nb">not</span> <span class="mi">3</span><span class="p">)</span>          <span class="nv">=&gt;</span>  <span class="no">#f</span>
  <span class="p">(</span><span class="nb">not</span> <span class="p">(</span><span class="nb">list</span> <span class="mi">3</span><span class="p">))</span>   <span class="nv">=&gt;</span>  <span class="no">#f</span>
  <span class="p">(</span><span class="nb">not</span> <span class="no">#f</span><span class="p">)</span>         <span class="nv">=&gt;</span>  <span class="no">#t</span>
  <span class="p">(</span><span class="nb">not</span> <span class="o">'</span><span class="p">())</span>        <span class="nv">=&gt;</span>  <span class="no">#f</span>
  <span class="p">(</span><span class="nb">not</span> <span class="p">(</span><span class="nb">list</span><span class="p">))</span>     <span class="nv">=&gt;</span>  <span class="no">#f</span>
  <span class="p">(</span><span class="nb">not</span> <span class="ss">'nil</span><span class="p">)</span>       <span class="nv">=&gt;</span>  <span class="no">#f</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(boolean? obj)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>Boolean?</code> returns <code>#t</code> if <code>obj</code> is either <code>#t</code> or <code>#f</code> and returns
<code>#f</code> otherwise.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme">  <span class="p">(</span><span class="nb">boolean?</span> <span class="no">#f</span><span class="p">)</span>         <span class="nv">=&gt;</span>  <span class="no">#t</span>
  <span class="p">(</span><span class="nb">boolean?</span> <span class="mi">0</span><span class="p">)</span>          <span class="nv">=&gt;</span>  <span class="no">#f</span>
  <span class="p">(</span><span class="nb">boolean?</span> <span class="o">'</span><span class="p">())</span>        <span class="nv">=&gt;</span>  <span class="no">#f</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(boolean=? boolean1 boolean2  &#8230;&#8203;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns <code>#t</code> if all the arguments are booleans and all are <code>#t</code> or all are <code>#f</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_pairs_and_lists">4.4. Pairs and lists</h3>
<div class="paragraph">
<p>

</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(pair? obj)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>Pair?</code> returns <code>#t</code> if <code>obj</code> is a pair, and otherwise returns <code>#f</code>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(cons obj1 obj2)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns a newly allocated pair whose car is obj1 and whose cdr is obj2.
The pair is guaranteed to be different (in the sense of eqv?) from every
existing object.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme">    <span class="p">(</span><span class="nb">cons</span> <span class="ss">'a</span> <span class="o">'</span><span class="p">())</span>           <span class="nv">=&gt;</span>  <span class="p">(</span><span class="nf">a</span><span class="p">)</span>
    <span class="p">(</span><span class="nb">cons</span> <span class="o">'</span><span class="p">(</span><span class="nf">a</span><span class="p">)</span> <span class="o">'</span><span class="p">(</span><span class="nf">b</span> <span class="nv">c</span> <span class="nv">d</span><span class="p">))</span>    <span class="nv">=&gt;</span>  <span class="p">((</span><span class="nf">a</span><span class="p">)</span> <span class="nv">b</span> <span class="nv">c</span> <span class="nv">d</span><span class="p">)</span>
    <span class="p">(</span><span class="nb">cons</span> <span class="s">"a"</span> <span class="o">'</span><span class="p">(</span><span class="nf">b</span> <span class="nv">c</span><span class="p">))</span>       <span class="nv">=&gt;</span>  <span class="p">(</span><span class="s">"a"</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">)</span>
    <span class="p">(</span><span class="nb">cons</span> <span class="ss">'a</span> <span class="mi">3</span><span class="p">)</span>             <span class="nv">=&gt;</span>  <span class="p">(</span><span class="nf">a</span> <span class="o">.</span> <span class="mi">3</span><span class="p">)</span>
    <span class="p">(</span><span class="nb">cons</span> <span class="o">'</span><span class="p">(</span><span class="nf">a</span> <span class="nv">b</span><span class="p">)</span> <span class="ss">'c</span><span class="p">)</span>        <span class="nv">=&gt;</span>  <span class="p">((</span><span class="nf">a</span> <span class="nv">b</span><span class="p">)</span> <span class="o">.</span> <span class="nv">c</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(car pair)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the contents of the car field of pair.
Note that it is an error to take the <code>car</code> of the empty list.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme">    <span class="p">(</span><span class="nb">car</span> <span class="o">'</span><span class="p">(</span><span class="nf">a</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">))</span>          <span class="nv">=&gt;</span>  <span class="nv">a</span>
    <span class="p">(</span><span class="nb">car</span> <span class="o">'</span><span class="p">((</span><span class="nf">a</span><span class="p">)</span> <span class="nv">b</span> <span class="nv">c</span> <span class="nv">d</span><span class="p">))</span>      <span class="nv">=&gt;</span>  <span class="p">(</span><span class="nf">a</span><span class="p">)</span>
    <span class="p">(</span><span class="nb">car</span> <span class="o">'</span><span class="p">(</span><span class="nf">1</span> <span class="o">.</span> <span class="mi">2</span><span class="p">))</span>          <span class="nv">=&gt;</span>  <span class="mi">1</span>
    <span class="p">(</span><span class="nb">car</span> <span class="o">'</span><span class="p">())</span>               <span class="nv">=&gt;</span>  <span class="nv">error</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(cdr pair)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the contents of the cdr field of pair.
Note that it is an error to take the <code>cdr</code> of the empty list.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme">    <span class="p">(</span><span class="nb">cdr</span> <span class="o">'</span><span class="p">((</span><span class="nf">a</span><span class="p">)</span> <span class="nv">b</span> <span class="nv">c</span> <span class="nv">d</span><span class="p">))</span>      <span class="nv">=&gt;</span>  <span class="p">(</span><span class="nf">b</span> <span class="nv">c</span> <span class="nv">d</span><span class="p">)</span>
    <span class="p">(</span><span class="nb">cdr</span> <span class="o">'</span><span class="p">(</span><span class="nf">1</span> <span class="o">.</span> <span class="mi">2</span><span class="p">))</span>          <span class="nv">=&gt;</span>  <span class="mi">2</span>
    <span class="p">(</span><span class="nb">cdr</span> <span class="o">'</span><span class="p">())</span>               <span class="nv">=&gt;</span>  <span class="nv">error</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(set-car! pair obj)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Stores <code>obj</code> in the car field of <code>pair</code>.
The value returned by <code>set-car!</code> is <strong><em>void</em></strong>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme">   <span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="nf">f</span><span class="p">)</span> <span class="p">(</span><span class="nb">list</span> <span class="ss">'not-a-constant-list</span><span class="p">))</span>
   <span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="nf">g</span><span class="p">)</span> <span class="o">'</span><span class="p">(</span><span class="nf">constant-list</span><span class="p">))</span>
   <span class="p">(</span><span class="nb">set-car!</span> <span class="p">(</span><span class="nf">f</span><span class="p">)</span> <span class="mi">3</span><span class="p">)</span>
   <span class="p">(</span><span class="nb">set-car!</span> <span class="p">(</span><span class="nf">g</span><span class="p">)</span> <span class="mi">3</span><span class="p">)</span>             <span class="nv">=&gt;</span>  <span class="nv">error</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(set-cdr! pair obj)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Stores <code>obj</code> in the cdr field of <code>pair</code>.
The value returned by <code>set-cdr!</code> is <strong><em>void</em></strong>.</p>
</div>
<div class="paragraph">
<p>


























</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(caar pair)</code></strong><br>
<strong><code>(cadr pair)</code></strong><br>
<strong><code>&#8230;&#8203;</code></strong><br>
<strong><code>(cdddar pair)</code></strong><br>
<strong><code>(cddddr pair)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>These procedures are compositions of <code>car</code> and <code>cdr</code>, where for example
<code>caddr</code> could be defined by</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme">   <span class="p">(</span><span class="k">define</span> <span class="nv">caddr</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">x</span><span class="p">)</span> <span class="p">(</span><span class="nb">car</span> <span class="p">(</span><span class="nb">cdr</span> <span class="p">(</span><span class="nb">cdr</span> <span class="nv">x</span><span class="p">)))))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Arbitrary compositions, up to four deep, are provided.
There are twenty-eight of these procedures in all.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(null? obj)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns <code>#t</code> if <code>obj</code> is the empty list, otherwise returns <code>#f</code>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(pair-mutable? obj)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns <code>#t</code> if <code>obj</code> is a mutable pair, otherwise returns <code>#f</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">pair-mutable?</span> <span class="o">'</span><span class="p">(</span><span class="nf">1</span> <span class="o">.</span> <span class="mi">2</span><span class="p">))</span>    <span class="nv">=&gt;</span> <span class="no">#f</span>
<span class="p">(</span><span class="nf">pair-mutable?</span> <span class="p">(</span><span class="nb">cons</span> <span class="mi">1</span> <span class="mi">2</span><span class="p">))</span>  <span class="nv">=&gt;</span> <span class="no">#t</span>
<span class="p">(</span><span class="nf">pair-mutable?</span> <span class="mi">12</span><span class="p">)</span>          <span class="nv">=&gt;</span> <span class="no">#f</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(list? obj)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns <code>#t</code> if <code>obj</code> is a list, otherwise returns <code>#f</code>. By definition,
all lists have finite length and are terminated by the empty list.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme">   <span class="p">(</span><span class="nb">list?</span> <span class="o">'</span><span class="p">(</span><span class="nf">a</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">))</span>     <span class="nv">=&gt;</span>  <span class="no">#t</span>
   <span class="p">(</span><span class="nb">list?</span> <span class="o">'</span><span class="p">())</span>          <span class="nv">=&gt;</span>  <span class="no">#t</span>
   <span class="p">(</span><span class="nb">list?</span> <span class="o">'</span><span class="p">(</span><span class="nf">a</span> <span class="o">.</span> <span class="nv">b</span><span class="p">))</span>     <span class="nv">=&gt;</span>  <span class="no">#f</span>
   <span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">x</span> <span class="p">(</span><span class="nb">list</span> <span class="ss">'a</span><span class="p">)))</span>
     <span class="p">(</span><span class="nb">set-cdr!</span> <span class="nv">x</span> <span class="nv">x</span><span class="p">)</span>
     <span class="p">(</span><span class="nb">list?</span> <span class="nv">x</span><span class="p">))</span>         <span class="nv">=&gt;</span>  <span class="no">#f</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(make-list k)</code></strong><br>
<strong><code>(make-list k fill)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns a newly allocated list of k elements. If a second
argument is given, then each element is initialized to fill .
Otherwise the initial contents of each element is unspecified.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(list obj &#8230;&#8203;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns a newly allocated list of its arguments.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme">   <span class="p">(</span><span class="nb">list</span> <span class="ss">'a</span> <span class="p">(</span><span class="nb">+</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">)</span> <span class="ss">'c</span><span class="p">)</span>            <span class="nv">=&gt;</span>  <span class="p">(</span><span class="nf">a</span> <span class="mi">7</span> <span class="nv">c</span><span class="p">)</span>
   <span class="p">(</span><span class="nb">list</span><span class="p">)</span>                          <span class="nv">=&gt;</span>  <span class="p">()</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(list</strong> obj &#8230;&#8203;)</code>*<br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>list*</code> is like <code>list</code> except that the last argument to <code>list*</code> is
used as the ,(emph "cdr") of the last pair constructed.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme">   <span class="p">(</span><span class="nf">list*</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span>        <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">1</span> <span class="mi">2</span> <span class="o">.</span> <span class="mi">3</span><span class="p">)</span>
   <span class="p">(</span><span class="nf">list*</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="o">'</span><span class="p">(</span><span class="nf">4</span> <span class="mi">5</span><span class="p">))</span> <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span><span class="p">)</span>
   <span class="p">(</span><span class="nf">list*</span><span class="p">)</span>              <span class="nv">=&gt;</span> <span class="p">()</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(length list)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the length of <code>list</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme">   <span class="p">(</span><span class="nb">length</span> <span class="o">'</span><span class="p">(</span><span class="nf">a</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">))</span>               <span class="nv">=&gt;</span>  <span class="mi">3</span>
   <span class="p">(</span><span class="nb">length</span> <span class="o">'</span><span class="p">(</span><span class="nf">a</span> <span class="p">(</span><span class="nf">b</span><span class="p">)</span> <span class="p">(</span><span class="nf">c</span> <span class="nv">d</span> <span class="nv">e</span><span class="p">)))</span>       <span class="nv">=&gt;</span>  <span class="mi">3</span>
   <span class="p">(</span><span class="nb">length</span> <span class="o">'</span><span class="p">())</span>                    <span class="nv">=&gt;</span>  <span class="mi">0</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(append list &#8230;&#8203;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns a list consisting of the elements of the first list
followed by the elements of the other lists.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme">   <span class="p">(</span><span class="nb">append</span> <span class="o">'</span><span class="p">(</span><span class="nf">x</span><span class="p">)</span> <span class="o">'</span><span class="p">(</span><span class="nf">y</span><span class="p">))</span>              <span class="nv">=&gt;</span>  <span class="p">(</span><span class="nf">x</span> <span class="nv">y</span><span class="p">)</span>
   <span class="p">(</span><span class="nb">append</span> <span class="o">'</span><span class="p">(</span><span class="nf">a</span><span class="p">)</span> <span class="o">'</span><span class="p">(</span><span class="nf">b</span> <span class="nv">c</span> <span class="nv">d</span><span class="p">))</span>          <span class="nv">=&gt;</span>  <span class="p">(</span><span class="nf">a</span> <span class="nv">b</span> <span class="nv">c</span> <span class="nv">d</span><span class="p">)</span>
   <span class="p">(</span><span class="nb">append</span> <span class="o">'</span><span class="p">(</span><span class="nf">a</span> <span class="p">(</span><span class="nf">b</span><span class="p">))</span> <span class="o">'</span><span class="p">((</span><span class="nf">c</span><span class="p">)))</span>        <span class="nv">=&gt;</span>  <span class="p">(</span><span class="nf">a</span> <span class="p">(</span><span class="nf">b</span><span class="p">)</span> <span class="p">(</span><span class="nf">c</span><span class="p">))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The resulting list is always newly allocated, except that it shares
structure with the last list argument. The last argument may actually
be any object; an improper list results if the last argument is not a
proper list.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme">   <span class="p">(</span><span class="nb">append</span> <span class="o">'</span><span class="p">(</span><span class="nf">a</span> <span class="nv">b</span><span class="p">)</span> <span class="o">'</span><span class="p">(</span><span class="nf">c</span> <span class="o">.</span> <span class="nv">d</span><span class="p">))</span>        <span class="nv">=&gt;</span>  <span class="p">(</span><span class="nf">a</span> <span class="nv">b</span> <span class="nv">c</span> <span class="o">.</span> <span class="nv">d</span><span class="p">)</span>
   <span class="p">(</span><span class="nb">append</span> <span class="o">'</span><span class="p">()</span> <span class="ss">'a</span><span class="p">)</span>                 <span class="nv">=&gt;</span>  <span class="nv">a</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(append! list &#8230;&#8203;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns a list consisting of the elements of the first list
followed by the elements of the other lists.
Contrarily to <code>append</code>, the parameter lists (except the last one) are
physically modified: their last pair is changed to the value of the next
list in the <code>append!</code> formal parameter list.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">let*</span> <span class="p">((</span><span class="nf">l1</span> <span class="p">(</span><span class="nb">list</span> <span class="mi">1</span> <span class="mi">2</span><span class="p">))</span>
       <span class="p">(</span><span class="nf">l2</span> <span class="p">(</span><span class="nb">list</span> <span class="mi">3</span><span class="p">))</span>
       <span class="p">(</span><span class="nf">l3</span> <span class="p">(</span><span class="nb">list</span> <span class="mi">4</span> <span class="mi">5</span><span class="p">))</span>
       <span class="p">(</span><span class="nf">l4</span> <span class="p">(</span><span class="nf">append!</span> <span class="nv">l1</span> <span class="nv">l2</span> <span class="nv">l3</span><span class="p">)))</span>
  <span class="p">(</span><span class="nb">list</span> <span class="nv">l1</span> <span class="nv">l2</span> <span class="nv">l3</span> <span class="nv">l4</span><span class="p">))</span>  <span class="nv">=&gt;</span> <span class="p">((</span><span class="nf">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span><span class="p">)</span> <span class="p">(</span><span class="nf">3</span> <span class="mi">4</span> <span class="mi">5</span><span class="p">)</span> <span class="p">(</span><span class="nf">4</span> <span class="mi">5</span><span class="p">)</span> <span class="p">(</span><span class="nf">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span><span class="p">))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>An error is signaled if one of the given lists is a constant list.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(reverse list)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns a newly allocated list consisting of the elements of <code>list</code> in
reverse order.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme">   <span class="p">(</span><span class="nb">reverse</span> <span class="o">'</span><span class="p">(</span><span class="nf">a</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">))</span>              <span class="nv">=&gt;</span>  <span class="p">(</span><span class="nf">c</span> <span class="nv">b</span> <span class="nv">a</span><span class="p">)</span>
   <span class="p">(</span><span class="nb">reverse</span> <span class="o">'</span><span class="p">(</span><span class="nf">a</span> <span class="p">(</span><span class="nf">b</span> <span class="nv">c</span><span class="p">)</span> <span class="nv">d</span> <span class="p">(</span><span class="nf">e</span> <span class="p">(</span><span class="nf">f</span><span class="p">))))</span>  <span class="nv">=&gt;</span>  <span class="p">((</span><span class="nf">e</span> <span class="p">(</span><span class="nf">f</span><span class="p">))</span> <span class="nv">d</span> <span class="p">(</span><span class="nf">b</span> <span class="nv">c</span><span class="p">)</span> <span class="nv">a</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(reverse! list)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns a list consisting of the elements of <code>list</code> in reverse order.
Contrarily to <code>reverse</code>, the returned value is not newly allocated but
computed "in place".</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">l</span> <span class="o">'</span><span class="p">(</span><span class="nf">a</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">)))</span>
  <span class="p">(</span><span class="nb">list</span> <span class="p">(</span><span class="nf">reverse!</span> <span class="nv">l</span><span class="p">)</span> <span class="nv">l</span><span class="p">))</span>        <span class="nv">=&gt;</span>  <span class="p">((</span><span class="nf">c</span> <span class="nv">b</span> <span class="nv">a</span><span class="p">)</span> <span class="p">(</span><span class="nf">a</span><span class="p">))</span>
<span class="p">(</span><span class="nf">reverse!</span> <span class="o">'</span><span class="p">(</span><span class="nf">a</span> <span class="nv">constant</span> <span class="nv">list</span><span class="p">))</span>   <span class="nv">=&gt;</span>  <span class="nv">error</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(list-tail list k)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the sublist of <code>list</code> obtained by omitting the first <code>k</code> elements.
It is an error if list has fewer than <code>k</code> elements. List-tail could
be defined by</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme">   <span class="p">(</span><span class="k">define</span> <span class="nv">list-tail</span>
      <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">x</span> <span class="nv">k</span><span class="p">)</span>
         <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">zero?</span> <span class="nv">k</span><span class="p">)</span>
            <span class="nv">x</span>
            <span class="p">(</span><span class="nb">list-tail</span> <span class="p">(</span><span class="nb">cdr</span> <span class="nv">x</span><span class="p">)</span> <span class="p">(</span><span class="nb">-</span> <span class="nv">k</span> <span class="mi">1</span><span class="p">)))))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(last-pair list)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the last pair of <code>list</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">last-pair</span> <span class="o">'</span><span class="p">(</span><span class="nf">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">))</span>   <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">3</span><span class="p">)</span>
<span class="p">(</span><span class="nf">last-pair</span> <span class="o">'</span><span class="p">(</span><span class="nf">1</span> <span class="mi">2</span> <span class="o">.</span> <span class="mi">3</span><span class="p">))</span> <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">2</span> <span class="o">.</span> <span class="mi">3</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(list-ref list k)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the <code>k`th element of `list</code>. (This is the same as the car
of <code>(list-tail list k)</code>.) It is an error if list has fewer than <code>k</code>
elements.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme">   <span class="p">(</span><span class="nb">list-ref</span> <span class="o">'</span><span class="p">(</span><span class="nf">a</span> <span class="nv">b</span> <span class="nv">c</span> <span class="nv">d</span><span class="p">)</span> <span class="mi">2</span><span class="p">)</span>                 <span class="nv">=&gt;</span>  <span class="nv">c</span>
   <span class="p">(</span><span class="nb">list-ref</span> <span class="o">'</span><span class="p">(</span><span class="nf">a</span> <span class="nv">b</span> <span class="nv">c</span> <span class="nv">d</span><span class="p">)</span>
             <span class="p">(</span><span class="nb">inexact-&gt;exact</span> <span class="p">(</span><span class="nb">round</span> <span class="mf">1.8</span><span class="p">)))</span> <span class="nv">=&gt;</span>  <span class="nv">c</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(list-set! list k obj)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>The <code>list-set!</code> procedure stores <code>obj</code> in element <code>k</code> of <code>list</code>.
It is an error if <code>k</code> is not a valid index of <code>list</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">ls</span> <span class="p">(</span><span class="nb">list</span> <span class="ss">'one</span> <span class="ss">'two</span> <span class="ss">'five!</span><span class="p">)))</span>
   <span class="p">(</span><span class="nf">list-set!</span> <span class="nv">ls</span> <span class="mi">2</span> <span class="ss">'three</span><span class="p">)</span>
   <span class="nv">ls</span><span class="p">)</span>                              <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">one</span> <span class="nv">two</span> <span class="nv">three</span><span class="p">)</span>
<span class="p">(</span><span class="nf">list-set!</span> <span class="o">'</span><span class="p">(</span><span class="nf">0</span> <span class="mi">1</span> <span class="mi">2</span><span class="p">)</span> <span class="mi">1</span> <span class="s">"oops"</span><span class="p">)</span>       <span class="nv">=&gt;</span> <span class="nv">error</span> <span class="p">(</span><span class="nf">constant</span> <span class="nv">list</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>

</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS / R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(memq obj list)</code></strong><br>
<strong><code>(memv obj list)</code></strong><br>
<strong><code>(member obj list)</code></strong><br>
<strong><code>(member obj list compare)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>These procedures return the first sublist of list whose car is <code>obj</code>,
where the sublists of list are the non-empty lists returned by
<code>(list-tail list k)</code> for <code>k</code> less than the length of list.
If <code>obj</code> does not occur in <code>list</code>, then <code>#f</code> (not the empty list) is
returned. <code>Memq</code> uses <code>eq?</code> to compare obj with the elements of list,
while <code>memv</code> uses <code>eqv?</code> and <code>member</code> uses <code>compare</code>, if given, and
<code>equal?</code> otherwise.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme">   <span class="p">(</span><span class="nb">memq</span> <span class="ss">'a</span> <span class="o">'</span><span class="p">(</span><span class="nf">a</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">))</span>              <span class="nv">=&gt;</span>  <span class="p">(</span><span class="nf">a</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">)</span>
   <span class="p">(</span><span class="nb">memq</span> <span class="ss">'b</span> <span class="o">'</span><span class="p">(</span><span class="nf">a</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">))</span>              <span class="nv">=&gt;</span>  <span class="p">(</span><span class="nf">b</span> <span class="nv">c</span><span class="p">)</span>
   <span class="p">(</span><span class="nb">memq</span> <span class="ss">'a</span> <span class="o">'</span><span class="p">(</span><span class="nf">b</span> <span class="nv">c</span> <span class="nv">d</span><span class="p">))</span>              <span class="nv">=&gt;</span>  <span class="no">#f</span>
   <span class="p">(</span><span class="nb">memq</span> <span class="p">(</span><span class="nb">list</span> <span class="ss">'a</span><span class="p">)</span> <span class="o">'</span><span class="p">(</span><span class="nf">b</span> <span class="p">(</span><span class="nf">a</span><span class="p">)</span> <span class="nv">c</span><span class="p">))</span>     <span class="nv">=&gt;</span>  <span class="no">#f</span>
   <span class="p">(</span><span class="nb">member</span> <span class="p">(</span><span class="nb">list</span> <span class="ss">'a</span><span class="p">)</span>
           <span class="o">'</span><span class="p">(</span><span class="nf">b</span> <span class="p">(</span><span class="nf">a</span><span class="p">)</span> <span class="nv">c</span><span class="p">))</span>             <span class="nv">=&gt;</span>  <span class="p">((</span><span class="nf">a</span><span class="p">)</span> <span class="nv">c</span><span class="p">)</span>
   <span class="p">(</span><span class="nb">member</span> <span class="s">"B"</span>
           <span class="err"></span><span class="p">(</span><span class="s">"a"</span> <span class="s">"b"</span> <span class="s">"c"</span><span class="p">)</span>
           <span class="nv">string-ci=?</span><span class="p">)</span>            <span class="nv">=&gt;</span> <span class="p">(</span><span class="s">"b"</span> <span class="s">"c"</span><span class="p">)</span>
   <span class="p">(</span><span class="nb">memv</span> <span class="mi">101</span> <span class="o">'</span><span class="p">(</span><span class="nf">100</span> <span class="mi">101</span> <span class="mi">102</span><span class="p">))</span>       <span class="nv">=&gt;</span>  <span class="p">(</span><span class="nf">101</span> <span class="mi">102</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
As in R<sup>7</sup>RS, the <code>member</code> function accepts also a
comparison function.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>

</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS / R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(assq obj alist)</code></strong><br>
<strong><code>(assv obj alist)</code></strong><br>
<strong><code>(assoc obj alist)</code></strong><br>
<strong><code>(assoc obj alist compare)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>Alist</code> (for "association list") must be a list of pairs. These procedures
find the first pair in <code>alist</code> whose car field is <code>obj</code>, and returns that
pair. If no pair in <code>alist</code> has <code>obj</code> as its car, then <code>#f</code> (not the empty
list) is returned. <code>Assq</code> uses <code>eq?</code> to compare <code>obj</code> with the car fields
of the pairs in <code>alist</code>, while <code>assv</code> uses <code>eqv?</code> and <code>assoc</code> uses <code>equal?</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme">   <span class="p">(</span><span class="k">define</span> <span class="nv">e</span> <span class="o">'</span><span class="p">((</span><span class="nf">a</span> <span class="mi">1</span><span class="p">)</span> <span class="p">(</span><span class="nf">b</span> <span class="mi">2</span><span class="p">)</span> <span class="p">(</span><span class="nf">c</span> <span class="mi">3</span><span class="p">)))</span>
   <span class="p">(</span><span class="nb">assq</span> <span class="ss">'a</span> <span class="nv">e</span><span class="p">)</span>                <span class="nv">=&gt;</span>  <span class="p">(</span><span class="nf">a</span> <span class="mi">1</span><span class="p">)</span>
   <span class="p">(</span><span class="nb">assq</span> <span class="ss">'b</span> <span class="nv">e</span><span class="p">)</span>                <span class="nv">=&gt;</span>  <span class="p">(</span><span class="nf">b</span> <span class="mi">2</span><span class="p">)</span>
   <span class="p">(</span><span class="nb">assq</span> <span class="ss">'d</span> <span class="nv">e</span><span class="p">)</span>                <span class="nv">=&gt;</span>  <span class="no">#f</span>
   <span class="p">(</span><span class="nb">assq</span> <span class="p">(</span><span class="nb">list</span> <span class="ss">'a</span><span class="p">)</span> <span class="o">'</span><span class="p">(((</span><span class="nf">a</span><span class="p">))</span> <span class="p">((</span><span class="nf">b</span><span class="p">))</span> <span class="p">((</span><span class="nf">c</span><span class="p">))))</span>
                              <span class="nv">=&gt;</span>  <span class="no">#f</span>
   <span class="p">(</span><span class="nb">assoc</span> <span class="p">(</span><span class="nb">list</span> <span class="ss">'a</span><span class="p">)</span> <span class="o">'</span><span class="p">(((</span><span class="nf">a</span><span class="p">))</span> <span class="p">((</span><span class="nf">b</span><span class="p">))</span> <span class="p">((</span><span class="nf">c</span><span class="p">))))</span>
                              <span class="nv">=&gt;</span> <span class="p">((</span><span class="nf">a</span><span class="p">))</span>
   <span class="p">(</span><span class="nb">assoc</span> <span class="mf">2.0</span> <span class="o">'</span><span class="p">((</span><span class="nf">1</span> <span class="mi">1</span><span class="p">)</span> <span class="p">(</span><span class="nf">2</span> <span class="mi">4</span><span class="p">)</span> <span class="p">(</span><span class="nf">3</span> <span class="mi">9</span><span class="p">))</span> <span class="nv">=</span><span class="p">)</span>
                              <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">2</span> <span class="mi">4</span><span class="p">)</span>
   <span class="p">(</span><span class="nb">assv</span> <span class="mi">5</span> <span class="o">'</span><span class="p">((</span><span class="nf">2</span> <span class="mi">3</span><span class="p">)</span> <span class="p">(</span><span class="nf">5</span> <span class="mi">7</span><span class="p">)</span> <span class="p">(</span><span class="nf">11</span> <span class="mi">13</span><span class="p">)))</span>
                              <span class="nv">=&gt;</span>  <span class="p">(</span><span class="nf">5</span> <span class="mi">7</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Although they are ordinarily used as predicates,
<code>memq</code>, <code>memv</code>, <code>member</code>, <code>assq</code>, <code>assv</code>, and <code>assoc</code> do not have question
marks in their names because they return useful values rather than just
<code>#t</code> or #<code>f</code>.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
As in R<sup>7</sup>RS, the <code>assoc</code> function accepts also a
comparison function.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(list-copy obj)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>list-copy</code> recursively copies trees of pairs. If <code>obj</code> is
not a pair, it is returned; otherwise the result is a new pair whose
<code>car</code> and <code>cdr</code> are obtained by calling <code>list-copy</code> on
the <code>car</code> and <code>cdr</code> of <code>obj</code>, respectively.</p>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(filter  pred list)</code></strong><br>
<strong><code>(filter! pred list)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>Filter</code> returns all the elements of <code>list</code> that satisfy predicate
<code>pred</code>. The <code>list</code> is not disordered: elements that appear in the
result list occur in the same order as they occur in the argument
list. <code>Filter!</code> does the same job than <code>filter</code> by physically
modifying its <code>list</code> argument</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">filter</span> <span class="nv">even?</span> <span class="o">'</span><span class="p">(</span><span class="nf">0</span> <span class="mi">7</span> <span class="mi">8</span> <span class="mi">8</span> <span class="mi">43</span> <span class="mi">-4</span><span class="p">))</span> <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">0</span> <span class="mi">8</span> <span class="mi">8</span> <span class="mi">-4</span><span class="p">)</span>
<span class="p">(</span><span class="k">let*</span> <span class="p">((</span><span class="nf">l1</span> <span class="p">(</span><span class="nb">list</span> <span class="mi">0</span> <span class="mi">7</span> <span class="mi">8</span> <span class="mi">8</span> <span class="mi">43</span> <span class="mi">-4</span><span class="p">))</span>
       <span class="p">(</span><span class="nf">l2</span> <span class="p">(</span><span class="nf">filter!</span> <span class="nv">even?</span> <span class="nv">l1</span><span class="p">)))</span>
   <span class="p">(</span><span class="nb">list</span> <span class="nv">l1</span> <span class="nv">l2</span><span class="p">))</span>                <span class="nv">=&gt;</span> <span class="p">((</span><span class="nf">0</span> <span class="mi">8</span> <span class="mi">8</span> <span class="mi">-4</span><span class="p">)</span> <span class="p">(</span><span class="nf">0</span> <span class="mi">8</span> <span class="mi">8</span> <span class="mi">-4</span><span class="p">))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>An error is signaled if <code>list</code> is a constant list.</p>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(remove pred list)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>Remove</code> returns <code>list</code> without the elements that satisfy predicate <code>pred</code>:</p>
</div>
<div class="paragraph">
<p>The list is not disordered&#8201;&#8212;&#8201;elements that appear in the result list occur
in the same order as they occur in the argument list. <code>Remove!</code> does the
same job than <code>remove</code> by physically modifying its <code>list</code> argument</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">remove</span> <span class="nv">even?</span> <span class="o">'</span><span class="p">(</span><span class="nf">0</span> <span class="mi">7</span> <span class="mi">8</span> <span class="mi">8</span> <span class="mi">43</span> <span class="mi">-4</span><span class="p">))</span> <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">7</span> <span class="mi">43</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(delete  x list [=])</code></strong><br>
<strong><code>(delete! x list [=])</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>Delete</code> uses the comparison procedure <code>=</code>, which defaults to
<code>equal?</code>, to find all elements of <code>list</code> that are equal to <code>x</code>, and
deletes them from <code>list</code>. The dynamic order in which the various
applications of <code>=</code> are made is not specified.</p>
</div>
<div class="paragraph">
<p>The list is not disordered&#8201;&#8212;&#8201;elements that appear in the result
list occur in the same order as they occur in the argument list.</p>
</div>
<div class="paragraph">
<p>The comparison procedure is used in this way: <code>(= x ei)</code>. That is,
<code>x</code> is always the first argument, and a list element is always the
second argument. The comparison procedure will be used to compare
each element of list exactly once; the order in which it is applied
to the various <code>ei</code> is not specified. Thus, one can reliably remove
all the numbers greater than five from a list with</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">delete</span> <span class="mi">5</span> <span class="nv">list</span> <span class="nv">&lt;</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>delete!</code> is the linear-update variant of <code>delete</code>. It is allowed,
but not required, to alter the cons cells in its argument <code>list</code> to
construct the result.</p>
</div>
</div>
<div class="sect2">
<h3 id="_symbols">4.5. Symbols</h3>
<div class="paragraph">
<p>The STklos reader can read symbols whose names contain special
characters or letters in the non standard case.  When a symbol is
read, the parts enclosed in bars <code>|</code> will be entered
verbatim into the symbol&#8217;s name. The <code>|</code> characters are not
part of the symbol; they only serve to delimit the sequence of
characters that must be entered "as is". In order to maintain
read-write invariance, symbols containing such sequences of special
characters will be written between a pair of <code>|</code>.</p>
</div>
<div class="paragraph">
<p>In addition, any character can be used within an identifier when
specified via an inline hex escape . For example, the identifier
<code>H\x65;llo</code> is the same as the identifier Hello, and, if the
UTF-8 encoding is used, the identifier <code>\x3BB;</code> is the same as
the identifier <code></code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="ss">'|a|</span>                  <span class="nv">=&gt;</span> <span class="nv">a</span>
<span class="p">(</span><span class="nb">string-&gt;symbol</span> <span class="s">"a"</span><span class="p">)</span>  <span class="nv">=&gt;</span> <span class="nv">|A|</span>
<span class="p">(</span><span class="nb">symbol-&gt;string</span> <span class="ss">'|A|</span><span class="p">)</span> <span class="nv">=&gt;</span> <span class="s">"A"</span>
<span class="ss">'|a</span>  <span class="nv">b|</span>               <span class="nv">=&gt;</span> <span class="nv">|a</span>  <span class="nv">b|</span>
<span class="ss">'a|B|c</span>                <span class="nv">=&gt;</span> <span class="nv">|aBc|</span>
<span class="p">(</span><span class="nb">write</span> <span class="ss">'|FoO|</span><span class="p">)</span>        <span class="nv">|-</span> <span class="nv">|FoO|</span>
<span class="p">(</span><span class="nb">display</span> <span class="ss">'|FoO|</span><span class="p">)</span>      <span class="nv">|-</span> <span class="nv">FoO</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(symbol? obj)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns <code>#t</code> if obj is a symbol, otherwise returns <code>#f</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme">   <span class="p">(</span><span class="nb">symbol?</span> <span class="ss">'foo</span><span class="p">)</span>          <span class="nv">=&gt;</span>  <span class="no">#t</span>
   <span class="p">(</span><span class="nb">symbol?</span> <span class="p">(</span><span class="nb">car</span> <span class="o">'</span><span class="p">(</span><span class="nf">a</span> <span class="nv">b</span><span class="p">)))</span>  <span class="nv">=&gt;</span>  <span class="no">#t</span>
   <span class="p">(</span><span class="nb">symbol?</span> <span class="s">"bar"</span><span class="p">)</span>         <span class="nv">=&gt;</span>  <span class="no">#f</span>
   <span class="p">(</span><span class="nb">symbol?</span> <span class="ss">'nil</span><span class="p">)</span>          <span class="nv">=&gt;</span>  <span class="no">#t</span>
   <span class="p">(</span><span class="nb">symbol?</span> <span class="o">'</span><span class="p">())</span>           <span class="nv">=&gt;</span>  <span class="no">#f</span>
   <span class="p">(</span><span class="nb">symbol?</span> <span class="no">#f</span><span class="p">)</span>            <span class="nv">=&gt;</span>  <span class="no">#f</span>
   <span class="p">(</span><span class="nb">symbol?</span> <span class="nv">:key</span><span class="p">)</span>          <span class="nv">=&gt;</span>  <span class="no">#f</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(symbol=? symbol1 symbol2  &#8230;&#8203;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns #t if all the arguments are symbols and all have the same name in
the sense of <code>string=?</code>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(symbol&#8594;string string)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the name of <code>symbol</code> as a string. If the symbol was part of an
object returned as the value of a literal expression or by a call to the
<code>read</code> procedure, and its name contains alphabetic characters, then the
string returned will contain characters in the implementation&#8217;s preferred
standard case&#8201;&#8212;&#8201;STklos prefers lower case. If the symbol was returned
by <code>string&#8594;symbol</code>, the case of characters in the string returned will be
the same as the case in the string that was passed to <code>string&#8594;symbol</code>. It
is an error to apply mutation procedures like <code>string-set!</code> to strings
returned by this procedure.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme">   <span class="p">(</span><span class="nb">symbol-&gt;string</span> <span class="ss">'flying-fish</span><span class="p">)</span>  <span class="nv">=&gt;</span>  <span class="s">"flying-fish"</span>
   <span class="p">(</span><span class="nb">symbol-&gt;string</span> <span class="ss">'Martin</span><span class="p">)</span>       <span class="nv">=&gt;</span>  <span class="s">"martin"</span>
   <span class="p">(</span><span class="nb">symbol-&gt;string</span> <span class="p">(</span><span class="nb">string-&gt;symbol</span> <span class="s">"Malvina"</span><span class="p">))</span>
                                  <span class="nv">=&gt;</span>  <span class="s">"Malvina"</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(string&#8594;symbol string)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the symbol whose name is <code>string</code>. This procedure can create
symbols with names containing special characters or letters in the
non-standard case, but it is usually a bad idea to create such symbols
because in some implementations of Scheme they cannot be read as themselves.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme">   <span class="p">(</span><span class="nb">eq?</span> <span class="ss">'mISSISSIppi</span> <span class="ss">'mississippi</span><span class="p">)</span>                   <span class="nv">=&gt;</span>  <span class="no">#t</span>
   <span class="p">(</span><span class="nb">string-&gt;symbol</span> <span class="s">"mISSISSIppi"</span><span class="p">)</span>                    <span class="nv">=&gt;</span>  <span class="nv">|mISSISSIppi|</span>
   <span class="p">(</span><span class="nb">eq?</span> <span class="ss">'bitBlt</span> <span class="p">(</span><span class="nb">string-&gt;symbol</span> <span class="s">"bitBlt"</span><span class="p">))</span>           <span class="nv">=&gt;</span>  <span class="no">#f</span>
   <span class="p">(</span><span class="nb">eq?</span> <span class="ss">'JollyWog</span>
        <span class="p">(</span><span class="nb">string-&gt;symbol</span>
          <span class="p">(</span><span class="nb">symbol-&gt;string</span> <span class="ss">'JollyWog</span><span class="p">)))</span>               <span class="nv">=&gt;</span>  <span class="no">#t</span>
   <span class="p">(</span><span class="nb">string=?</span> <span class="s">"K. Harper, M.D."</span>
             <span class="p">(</span><span class="nb">symbol-&gt;string</span>
               <span class="p">(</span><span class="nb">string-&gt;symbol</span> <span class="s">"K. Harper, M.D."</span><span class="p">)))</span>  <span class="nv">=&gt;</span>  <span class="no">#t</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(string&#8594;unterned-symbol string)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the symbol whose print name is made from the characters of
<code>string</code>. This symbol is guaranteed to be <em>unique</em> (i.e. not
<code>eq?</code> to any other symbol):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">ua</span> <span class="p">(</span><span class="nf">string-&gt;uninterned-symbol</span> <span class="s">"a"</span><span class="p">)))</span>
  <span class="p">(</span><span class="nb">list</span> <span class="p">(</span><span class="nb">eq?</span> <span class="ss">'a</span> <span class="nv">ua</span><span class="p">)</span>
        <span class="p">(</span><span class="nb">eqv?</span> <span class="ss">'a</span> <span class="nv">ua</span><span class="p">)</span>
        <span class="p">(</span><span class="nb">eq?</span> <span class="nv">ua</span> <span class="p">(</span><span class="nf">string-&gt;uninterned-symbol</span> <span class="s">"a"</span><span class="p">))</span>
        <span class="p">(</span><span class="nb">eqv?</span> <span class="nv">ua</span> <span class="p">(</span><span class="nf">string-&gt;uninterned-symbol</span> <span class="s">"a"</span><span class="p">))))</span>
          <span class="nv">=&gt;</span> <span class="p">(</span><span class="no">#f</span> <span class="no">#t</span> <span class="no">#f</span> <span class="no">#t</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(gensym)</code></strong><br>
<strong><code>(gensym prefix)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Creates a new symbol. The print name of the generated symbol
consists of a prefix (which defaults to "G") followed by the decimal
representation of a number. If <code>prefix</code> is specified, it must be
either a string or a symbol.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">gensym</span><span class="p">)</span>        <span class="nv">=&gt;</span> <span class="nv">|G100|</span>
<span class="p">(</span><span class="nf">gensym</span> <span class="s">"foo-"</span><span class="p">)</span> <span class="nv">=&gt;</span> <span class="nv">foo-101</span>
<span class="p">(</span><span class="nf">gensym</span> <span class="ss">'foo-</span><span class="p">)</span>  <span class="nv">=&gt;</span> <span class="nv">foo-102</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_characters">4.6. Characters</h3>
<div class="paragraph">
<p>

The following table gives the list of allowed character names with their
ASCII eqivalent expressed in octal. Some chracaters have an alternate name
which is also shown in this table.</p>
</div>
<table class="tableblock frame-all grid-all stretch small">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">name</th>
<th class="tableblock halign-left valign-top">value</th>
<th class="tableblock halign-left valign-top">alt. name</th>
<th class="tableblock halign-left valign-top">name</th>
<th class="tableblock halign-left valign-top">value</th>
<th class="tableblock halign-left valign-top">alt. name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nul</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">null</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">soh</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">001</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">stx</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">002</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">etx</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">003</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">eot</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">004</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">enq</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">005</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ack</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">006</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bel</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">007</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">alarm</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">bs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">010</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">backspace</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ht</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">011</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tab</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nl</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">012</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">newline</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">vt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">013</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">np</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">014</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">page</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">cr</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">015</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">return</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">so</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">016</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">si</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">017</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dle</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">020</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">dc1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">021</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dc2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">022</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">dc3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">023</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dc4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">024</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">nak</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">025</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">syn</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">026</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">etb</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">027</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">can</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">030</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">em</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">031</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sub</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">032</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">esc</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">033</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">escape</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">fs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">034</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">gs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">035</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">rs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">036</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">us</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">037</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">040</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">space</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">del</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">177</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">delete</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong><em>STklos</em></strong> supports the complete Unicode character set, if UTF-8 encoding is
used. Hereafter, are some examples of characters:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="sc">#\A</span>                <span class="nv">=&gt;</span> <span class="nv">uppercase</span> <span class="nv">A</span>
<span class="sc">#\a</span>                <span class="nv">=&gt;</span> <span class="nv">lowercase</span> <span class="nv">a</span>
<span class="sc">#\x41</span>              <span class="nv">=&gt;</span> <span class="nv">the</span> <span class="nv">U+0041</span> <span class="nv">character</span> <span class="p">(</span><span class="nf">uppercase</span> <span class="nv">A</span><span class="p">)</span>
<span class="sc">#\x03bb</span>            <span class="nv">=&gt;</span> <span class="err"></span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(char? obj)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns <code>#t</code> if <code>obj</code> is a character, otherwise returns <code>#f</code>.</p>
</div>
<div id="chareq" class="paragraph">
<p>



</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(char=? char1 char2 &#8230;&#8203;)</code></strong><br>
<strong><code>(char&lt;? char1 char2 &#8230;&#8203;)</code></strong><br>
<strong><code>(char&gt;? char1 char2 &#8230;&#8203;)</code></strong><br>
<strong><code>(char&#8656;? char1 char2 &#8230;&#8203;)</code></strong><br>
<strong><code>(char&gt;=? char1 char2 &#8230;&#8203;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>These procedures impose a total ordering on the set of characters.
It is guaranteed that under this ordering:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The upper case characters are in order.</p>
</li>
<li>
<p>The lower case characters are in order.</p>
</li>
<li>
<p>The digits are in order.</p>
</li>
<li>
<p>Either all the digits precede all the upper case letters, or vice versa.</p>
</li>
<li>
<p>Either all the digits precede all the lower case letters, or vice versa.
)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>



</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(char-ci=? char1 char2 &#8230;&#8203;)</code></strong><br>
<strong><code>(char-ci&lt;? char1 char2 &#8230;&#8203;)</code></strong><br>
<strong><code>(char-ci&gt;? char1 char2 &#8230;&#8203;)</code></strong><br>
<strong><code>(char-ci&#8656;? char1 char2 &#8230;&#8203;)</code></strong><br>
<strong><code>(char-ci&gt;=? char1 char2 &#8230;&#8203;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>These procedures are similar to <code>char=?</code> et cetera, but they treat
upper case and lower case letters as the same. For example,
<code>(char-ci=? #\A #\a)</code> returns <code>#t</code>.</p>
</div>
<div class="paragraph">
<p>



</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(char-alphabetic? char)</code></strong><br>
<strong><code>(char-numeric? char)</code></strong><br>
<strong><code>(char-whitespace? char)</code></strong><br>
<strong><code>(char-upper-case? letter)</code></strong><br>
<strong><code>(char-lower-case? letter)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>These procedures return <code>#t</code> if their arguments are alphabetic, numeric,
whitespace, upper case, or lower case characters, respectively, otherwise they
return <code>#f</code>. The following remarks, which are specific to the ASCII character
set, are intended only as a guide: The alphabetic characters are the 52
upper and lower case letters. The numeric characters are the ten decimal
digits. The whitespace characters are space, tab, line feed, form feed,
and carriage return.</p>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(char&#8594;integer char)</code></strong><br>
<strong><code>(integer&#8594;char n)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Given a character, <code>char&#8594;integer</code> returns an exact integer
representation of the character. Given an exact integer that is the
image of a character under <code>char&#8594;integer</code>, <code>integer&#8594;char</code> returns
that character. These procedures implement order-preserving
isomorphisms between the set of characters under the <code>char&#8656;?</code>
ordering and some subset of the integers under the <code>&#8656;</code>
ordering. That is, if</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme">   <span class="p">(</span><span class="nb">char&lt;=?</span> <span class="nv">a</span> <span class="nv">b</span><span class="p">)</span> <span class="nv">=&gt;</span> <span class="no">#t</span>  <span class="nv">and</span>  <span class="p">(</span><span class="nb">&lt;=</span> <span class="nv">x</span> <span class="nv">y</span><span class="p">)</span> <span class="nv">=&gt;</span> <span class="no">#t</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>and x and y are in the domain of <code>integer&#8594;char</code>, then</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme">   <span class="p">(</span><span class="nb">&lt;=</span> <span class="p">(</span><span class="nb">char-&gt;integer</span> <span class="nv">a</span><span class="p">)</span>
       <span class="p">(</span><span class="nb">char-&gt;integer</span> <span class="nv">b</span><span class="p">))</span>         <span class="nv">=&gt;</span>  <span class="no">#t</span>

  <span class="p">(</span><span class="nb">char&lt;=?</span> <span class="p">(</span><span class="nb">integer-&gt;char</span> <span class="nv">x</span><span class="p">)</span>
           <span class="p">(</span><span class="nb">integer-&gt;char</span> <span class="nv">y</span><span class="p">))</span>     <span class="nv">=&gt;</span>  <span class="no">#t</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>integer&#8594;char</code> accepts an exact number between 0 and #xD7FFF or between
#xE000 and #x10FFFF, if UTF8 encoding is used. Otherwise it accepts a
number between0 and #xFF.</p>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(char-upcase char)</code></strong><br>
<strong><code>(char-downcase char)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>These procedures return a character <code>char2</code> such that
<code>(char-ci=? char char2)</code>. In addition, if char is alphabetic, then the
result of <code>char-upcase</code> is upper case and the result of <code>char-downcase</code> is
lower case.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(char-foldcase char)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>This procedure applies the Unicode simple case folding algorithm and returns
the result. Note that language-sensitive folding is not used. If
the argument is an uppercase letter, the result will be either a
lowercase letter or the same as the argument if the lowercase letter
does not exist.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(digit-value char)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>This procedure returns the numeric value (0 to 9) of its
argument if it is a numeric digit (that is, if char-numeric?
returns #t), or #f on any other character.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">digit-value</span>
<span class="p">(</span><span class="nf">digit-value</span> <span class="sc">#\3</span><span class="p">)</span>        <span class="nv">=&gt;</span> <span class="mi">3</span>
<span class="p">(</span><span class="nf">digit-value</span> <span class="sc">#\x0664</span><span class="p">)</span>    <span class="nv">=&gt;</span> <span class="mi">4</span>
<span class="p">(</span><span class="nf">digit-value</span> <span class="sc">#\x0AE6</span><span class="p">)</span>    <span class="nv">=&gt;</span> <span class="mi">0</span>
<span class="p">(</span><span class="nf">digit-value</span> <span class="sc">#\x0EA6</span><span class="p">)</span>    <span class="nv">=&gt;</span> <span class="no">#f</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_strings">4.7. Strings</h3>
<div class="paragraph">
<p>
STklos string constants allow the insertion of arbitrary characters
by encoding them as escape sequences. An escape sequence is introduced
by a backslash "$\backslash$".  The valid escape sequences are shown in
the following table.</p>
</div>
<table class="tableblock frame-all grid-all stretch small">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Sequence</th>
<th class="tableblock halign-left valign-top">Character inserted</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\a</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Alarm</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\b</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Backspace</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\e</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Escape</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\n</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Newline</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\t</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Horizontal Tab</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\r</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Carriage Return</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">doublequote U+0022</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\\</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">backslash U+005C</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\0abc</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ASCII character with octal value abc</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\x&lt;hexa value&gt;;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ASCII character with given hexadecimal value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\&lt;intraline whitespace&gt;&lt;newline&gt;&lt;intraline whitespace&gt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">None (permits to enter a string on several lines)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\&lt;other&gt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;other&gt;</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>For instance, the string</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="s">"ab\040\x20;c\nd\
         e"</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>is the string consisting of the characters
<code>&#35;\a</code>, <code>&#35;\b</code>, <code>&#35;\space</code>, <code>&#35;\space</code>,
<code>&#35;\c</code>, <code>&#35;\newline</code>, <code>&#35;\d</code> and <code>&#35;\e</code>.</p>
</div>
<div class="paragraph">
<p><strong>Notes:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Using octal code is limited to characters in the range 0
to #xFF. It is then not convenient to enter Unicode characters. This
form is deprecated should not be used anymore.</p>
</li>
<li>
<p>A line ending which is preceded by &lt;intraline whitespace&gt;
expands to nothing (along with any trailing &lt;intraline
whitespace&gt;), and can be used to indent strings for improved
legibility.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(string? obj)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns <code>#t</code> if <code>obj</code> is a string, otherwise returns <code>#f</code>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(make-string k)</code></strong><br>
<strong><code>(make-string k char)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>Make-string</code> returns a newly allocated string of length <code>k</code>. If <code>char</code> is
given, then all elements of the string are initialized to <code>char</code>, otherwise
the contents of the string are unspecified.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(string char &#8230;&#8203;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns a newly allocated string composed of the arguments.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(string-length string)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the number of characters in the given <code>string</code>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(string-ref string k)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>String-ref</code> returns character k of string using zero-origin indexing
(<code>k</code> must be a valid index of string).</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(string-set! string k char)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>String-set!</code> stores <code>char</code> in element <code>k</code> of <code>string</code> and returns
<strong><em>void</em></strong> (<code>k</code> must be a valid index of <code>string</code>).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="nf">f</span><span class="p">)</span> <span class="p">(</span><span class="nb">make-string</span> <span class="mi">3</span> <span class="o">#</span><span class="err">\</span><span class="nv">*</span><span class="p">))</span>
<span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="nf">g</span><span class="p">)</span> <span class="s">"***"</span><span class="p">)</span>
<span class="p">(</span><span class="nb">string-set!</span> <span class="p">(</span><span class="nf">f</span><span class="p">)</span> <span class="mi">0</span> <span class="sc">#\?</span><span class="p">)</span>  <span class="nv">=&gt;</span>  <span class="nv">void</span>
<span class="p">(</span><span class="nb">string-set!</span> <span class="p">(</span><span class="nf">g</span><span class="p">)</span> <span class="mi">0</span> <span class="sc">#\?</span><span class="p">)</span>  <span class="nv">=&gt;</span>  <span class="nv">error</span>
<span class="p">(</span><span class="nb">string-set!</span> <span class="p">(</span><span class="nb">symbol-&gt;string</span> <span class="ss">'immutable</span><span class="p">)</span> <span class="mi">0</span> <span class="sc">#\?</span><span class="p">)</span>
                         <span class="nv">=&gt;</span>  <span class="nv">error</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS / R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(string=? string1 string2 &#8230;&#8203;)</code></strong><br>
<strong><code>(string-ci=? string1 string2 &#8230;&#8203;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns <code>#t</code> if all the strings are the same length and contain the same
characters in the same positions, otherwise returns <code>#f</code>. <code>String-ci=?</code>
treats upper and lower case letters as though they were the same character,
but <code>string=?</code> treats upper and lower case as distinct characters.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
R<sup>5</sup>RS version of these functions accept only two arguments.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>






</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS / R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(string&lt;? string1 string2 &#8230;&#8203;)</code></strong><br>
<strong><code>(string&gt;? string1 string2 &#8230;&#8203;)</code></strong><br>
<strong><code>(string&#8656;? string1 string2 &#8230;&#8203;)</code></strong><br>
<strong><code>(string&gt;=? string1 string2 &#8230;&#8203;)</code></strong><br>
<strong><code>(string-ci&lt;? string1 string2 &#8230;&#8203;)</code></strong><br>
<strong><code>(string-ci&gt;? string1 string2 &#8230;&#8203;)</code></strong><br>
<strong><code>(string-ci&#8656;? string1 string2 &#8230;&#8203;)</code></strong><br>
<strong><code>(string-ci&gt;=? string1 string2)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>These procedures are the lexicographic extensions to strings of the
corresponding orderings on characters. For example, <code>string&lt;?</code> is the
lexicographic ordering on strings induced by the ordering <code>char&lt;?</code> on
characters. If two strings differ in length but are the same up to the
length of the shorter string, the shorter string is considered to be
lexicographically less than the longer string.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
R<sup>5</sup>RS version of these functions accept only two arguments.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(substring string start end)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>String</code> must be a string, and <code>start</code> and <code>end</code> must be exact integers
satisfying</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="mi">0</span> <span class="nv">&lt;=</span> <span class="nv">start</span> <span class="nv">&lt;=</span> <span class="nv">end</span> <span class="nv">&lt;=</span> <span class="p">(</span><span class="nb">string-length</span> <span class="nv">string</span><span class="p">)</span><span class="o">.</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>Substring</code> returns a newly allocated string formed from the characters
of <code>string</code> beginning with index <code>start</code> (inclusive) and ending with
index <code>end</code> (exclusive).</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(string-append string &#8230;&#8203;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns a newly allocated string whose characters form the concatenation
of the given strings.</p>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS / R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(string&#8594;list string)</code></strong><br>
<strong><code>(string&#8594;list string start)</code></strong><br>
<strong><code>(string&#8594;list string start end)</code></strong><br>
<strong><code>(list&#8594;string list)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>String&#8594;list</code> returns a newly allocated list of the characters of
<code>string</code> between <code>start</code> and <code>end</code>. <code>List&#8594;string</code> returns a newly
allocated string formed from the characters in the list <code>list</code>,
which must be a list of characters. <code>String&#8594;list</code> and
<code>list&#8594;string</code> are inverses so far as <code>equal?</code> is concerned.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The R<sup>5</sup>RS version of <code>string&#8594;list</code> accepts only one
parameter.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS / R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(string-copy string)</code></strong><br>
<strong><code>(string-copy string start)</code></strong><br>
<strong><code>(string-copy string start stop)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns a newly allocated copy of the part of the given <code>string</code>
between <code>start</code> and <code>stop</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The R<sup>5</sup>RS version of <code>string-copy</code> accepts only one argument.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(string-copy! to at from)</code></strong><br>
<strong><code>(string-copy! to at from start)</code></strong><br>
<strong><code>(string-copy! to at from start end)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Copies the characters of <code>string</code> from between <code>start</code> and <code>end</code>
to string <code>to</code>, starting at <code>at</code>. The order in which characters are copied
is unspecified, except that if the source and destination overlap,
copying takes place as if the source is first copied into a temporary
string and then into the destination. This can be achieved without
allocating storage by making sure to copy in the correct direction in
such circumstances.</p>
</div>
<div class="paragraph">
<p>It is an error if <code>at</code> is less than zero or greater than the length
of <code>to</code>. It is also an error if <code>(- (string-length to) at)</code> is less
than <code>(- end start)</code>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(string-split str)</code></strong><br>
<strong><code>(string-split str delimiters)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Parses <code>string</code> and returns a list of tokens ended by a character of the
<code>delimiters</code> string. If <code>delimiters</code> is omitted, it defaults to a string
containing a space, a tabulation and a newline characters.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">string-split</span> <span class="s">"/usr/local/bin"</span> <span class="s">"/"</span><span class="p">)</span>
                       <span class="nv">=&gt;</span> <span class="p">(</span><span class="s">"usr"</span> <span class="s">"local"</span> <span class="s">"bin"</span><span class="p">)</span>
<span class="p">(</span><span class="nf">string-split</span> <span class="s">"once   upon a time"</span><span class="p">)</span>
                       <span class="nv">=&gt;</span> <span class="p">(</span><span class="s">"once"</span> <span class="s">"upon"</span> <span class="s">"a"</span> <span class="s">"time"</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(string-position str1 str2)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the (first) index where <code>str1</code> is a substring of <code>str2</code> if it exists;
otherwise returns <code>#f</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">string-position</span> <span class="s">"ca"</span> <span class="s">"abracadabra"</span><span class="p">)</span> <span class="nv">=&gt;</span>  <span class="mi">4</span>
<span class="p">(</span><span class="nf">string-position</span> <span class="s">"ba"</span> <span class="s">"abracadabra"</span><span class="p">)</span> <span class="nv">=&gt;</span>  <span class="no">#f</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This function was also called <code>string-index</code>. This name is deprecated
since it conficts with the <code>string-index</code> defined in SRFI-13.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(string-find? str1 str2)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns <code>#t</code> if <code>str1</code> appears somewhere in <code>str2</code>; otherwise returns <code>#f</code>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(string-fill! string char)</code></strong><br>
<strong><code>(string-fill! string char start)</code></strong><br>
<strong><code>(string-fill! string char start end)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Stores <code>char</code> in every element of the given <code>string</code> between <code>start</code> and <code>end</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The R<sup>5</sup>RS version of <code>string-fill!</code> accepts only one argument.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(string-blit! s1 s2 offset)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>This function places the characters of string <code>s2</code> in the string <code>s1</code>
starting at position <code>offset</code>. The result of <code>string-blit!</code> may modify
the string <code>s1</code>. Note that the characters of <code>s2</code> can be written after
the end of <code>s1</code> (in which case a new string is allocated).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">string-blit!</span> <span class="p">(</span><span class="nb">make-string</span> <span class="mi">6</span> <span class="sc">#\X</span><span class="p">)</span> <span class="s">"abc"</span> <span class="mi">2</span><span class="p">)</span>
              <span class="nv">=&gt;</span> <span class="s">"XXabcX"</span>
<span class="p">(</span><span class="nf">string-blit!</span> <span class="p">(</span><span class="nb">make-string</span> <span class="mi">10</span> <span class="sc">#\X</span><span class="p">)</span> <span class="s">"abc"</span> <span class="mi">5</span><span class="p">)</span>
              <span class="nv">=&gt;</span> <span class="s">"XXXXXabcXX"</span>
<span class="p">(</span><span class="nf">string-blit!</span> <span class="p">(</span><span class="nb">make-string</span> <span class="mi">6</span> <span class="sc">#\X</span><span class="p">)</span> <span class="s">"a"</span> <span class="mi">10</span><span class="p">)</span>
              <span class="nv">=&gt;</span> <span class="s">"XXXXXX\0\0\0\0a"</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(string-mutable? obj)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns <code>#t</code> if <code>obj</code> is a mutable string, otherwise returns <code>#f</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">string-mutable?</span> <span class="s">"abc"</span><span class="p">)</span>                <span class="nv">=&gt;</span> <span class="no">#f</span>
<span class="p">(</span><span class="nf">string-mutable?</span> <span class="p">(</span><span class="nb">string-copy</span> <span class="s">"abc"</span><span class="p">))</span>  <span class="nv">=&gt;</span> <span class="no">#t</span>
<span class="p">(</span><span class="nf">string-mutable?</span> <span class="p">(</span><span class="nb">string</span> <span class="sc">#\a</span> <span class="sc">#\b</span> <span class="sc">#\c</span><span class="p">))</span> <span class="nv">=&gt;</span> <span class="no">#t</span>
<span class="p">(</span><span class="nf">string-mutable?</span> <span class="mi">12</span><span class="p">)</span>                   <span class="nv">=&gt;</span> <span class="no">#f</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>
The following string primitives are compatible with <strong><a href="http://srfi.schemers.org/srfi-13/srfi-13.html">SRFI-13</a></strong> (<em>String Library</em>)
and their documentation comes from the SRFI document.</p>
</div>
<div class="paragraph">
<p><strong>Notes:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>The string SRFI is supported by <strong><em>STklos</em></strong>. The
function listed below just don&#8217;t need to load the full SRFI to be
used</p>
</li>
<li>
<p>The functions <code>string-upcase</code>, <code>string-downcase</code> and
<code>string-foldcase</code> are also defined in R<sup>7</sup>RS.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(string-downcase str)</code></strong><br>
<strong><code>(string-downcase str start)</code></strong><br>
<strong><code>(string-downcase str start end)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns a string in which the upper case letters of string <code>str</code> between the
<code>start</code> and <code>end</code> indices have been replaced by their lower case equivalent.
If <code>start</code> is omited, it defaults to 0. If <code>end</code> is omited, it defaults to
the length of <code>str</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">string-downcase</span> <span class="s">"Foo BAR"</span><span class="p">)</span>        <span class="nv">=&gt;</span> <span class="s">"foo bar"</span>
<span class="p">(</span><span class="nf">string-downcase</span> <span class="s">"Foo BAR"</span> <span class="mi">4</span><span class="p">)</span>      <span class="nv">=&gt;</span> <span class="s">"bar"</span>
<span class="p">(</span><span class="nf">string-downcase</span> <span class="s">"Foo BAR"</span> <span class="mi">4</span> <span class="mi">6</span><span class="p">)</span>    <span class="nv">=&gt;</span> <span class="s">"ba"</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In R<sup>7</sup>RS, <code>string-downcase</code> accepts only one argument.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(string-downcase! str)</code></strong><br>
<strong><code>(string-downcase! str start)</code></strong><br>
<strong><code>(string-downcase! str start end)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>This is the in-place side-effecting variant of <code>string-downcase</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">string-downcase!</span> <span class="p">(</span><span class="nb">string-copy</span> <span class="s">"Foo BAR"</span><span class="p">)</span> <span class="mi">4</span><span class="p">)</span>    <span class="nv">=&gt;</span> <span class="s">"Foo bar"</span>
<span class="p">(</span><span class="nf">string-downcase!</span> <span class="p">(</span><span class="nb">string-copy</span> <span class="s">"Foo BAR"</span><span class="p">)</span> <span class="mi">4</span> <span class="mi">6</span><span class="p">)</span>  <span class="nv">=&gt;</span> <span class="s">"Foo baR"</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(string-upcase str)</code></strong><br>
<strong><code>(string-upcase str start)</code></strong><br>
<strong><code>(string-upcase str start end)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns a string in which the lower case letters of string <code>str</code> between the
<code>start</code> and <code>end</code> indices have been replaced by their upper case equivalent.
If <code>start</code> is omited, it defaults to 0. If <code>end</code> is omited, it defaults to
the length of <code>str</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In R<sup>7</sup>RS, <code>string-upcase</code> accepts only one argument.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(string-upcase! str)</code></strong><br>
<strong><code>(string-upcase! str start)</code></strong><br>
<strong><code>(string-upcase! str start end)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>This is the in-place side-effecting variant of <code>string-upcase</code>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(string-titlecase str)</code></strong><br>
<strong><code>(string-titlecase str start)</code></strong><br>
<strong><code>(string-titlecase str start end)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>This function returns a string.  For every character <code>c</code> in the
selected range of <code>str</code>, if <code>c</code> is preceded by a cased character, it
is downcased; otherwise it is titlecased. If <code>start</code> is omited, it
defaults to 0. If <code>end</code> is omited, it defaults to the length of <code>str</code>.
Note that if a <code>start</code> index is specified, then the character preceding
<code>s[start]</code> has no effect on the titlecase decision for character <code>s[start]</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">string-titlecase</span> <span class="s">"--capitalize tHIS sentence."</span><span class="p">)</span>
         <span class="nv">=&gt;</span>  <span class="s">"--Capitalize This Sentence."</span>
<span class="p">(</span><span class="nf">string-titlecase</span> <span class="s">"see Spot run. see Nix run."</span><span class="p">)</span>
         <span class="nv">=&gt;</span>  <span class="s">"See Spot Run. See Nix Run."</span>
<span class="p">(</span><span class="nf">string-titlecase</span> <span class="s">"3com makes routers."</span><span class="p">)</span>
         <span class="nv">=&gt;</span>  <span class="s">"3Com Makes Routers."</span>
<span class="p">(</span><span class="nf">string-titlecase</span> <span class="s">"greasy fried chicken"</span> <span class="mi">2</span><span class="p">)</span>
         <span class="nv">=&gt;</span> <span class="s">"Easy Fried Chicken"</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(string-titlecase! str)</code></strong><br>
<strong><code>(string-titlecase! str start)</code></strong><br>
<strong><code>(string-titlecase! str start end)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>This is the in-place side-effecting variant of <code>string-titlecase</code>.</p>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(string-append! string &#8230;&#8203;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Extends string by appending each value (in order) to the end of string.
A value can be a character or a string.</p>
</div>
<div class="paragraph">
<p>It is guaranteed that string-append! will return the same object that
was passed to it as first argument, whose size may be larger.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This function is defined in SRFI-118.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(string-replace! dst dst-start dst-end src [src-start [src-end]])</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Replaces the characters of the variable-size string dst (between
dst-start and dst-end) with the characters of the string src
(between src-start and src-end). The number of characters from src
may be different than the number replaced in dst, so the string may
grow or contract. The special case where dst-start is equal to
dst-end corresponds to insertion; the case where src-start is equal
to src-end corresponds to deletion. The order in which characters
are copied is unspecified, except that if the source and
destination overlap, copying takes place as if the source is first
copied into a temporary string and then into the destination.
Returns string, appended with the characters form the concatenation
of the given arguments, which can be wither strings or characters.</p>
</div>
<div class="paragraph">
<p>It is guaranteed that string-replace! will return the same object that
was passed to it as first argument, whose size may be larger.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This function is defined in SRFI-118.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(string-foldcase str)</code></strong><br>
<strong><code>(string-foldcase str start)</code></strong><br>
<strong><code>(string-foldcase str start end)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns a string in which the Unicode simple case-folding algorithm has
been applied on <code>str</code> between the <code>start</code> and <code>end</code> indices.
If <code>start</code> is omited, it defaults to 0. If <code>end</code> is omited, it defaults to
the length of <code>str</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In R<sup>7</sup>RS, <code>string-foldcase</code> accepts only one argument.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(string-foldcase! str)</code></strong><br>
<strong><code>(string-foldcase! str start)</code></strong><br>
<strong><code>(string-foldcase! str start end)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>This is the in-place side-effecting variant of <code>string-foldcase</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_vectors">4.8. Vectors</h3>
<div class="paragraph">
<p>
Vectors are heterogenous structures whose elements are
indexed by integers.  A vector typically occupies less space than
a list of the same length, and the average time required to
access a randomly chosen element is typically less for the vector
than for the list.</p>
</div>
<div class="paragraph">
<p>The length of a vector is the number of elements that it
contains.  This number is a non-negative integer that is fixed
when the vector is created.  The valid indexes of a vector are
the exact non-negative integers less than the length of the
vector.  The first element in a vector is indexed by zero, and
the last element is indexed by one less than the length of the
vector.</p>
</div>
<div class="paragraph">
<p>Vectors are written using the notation <code>#(obj &#8230;&#8203;)</code>.
For example, a vector of length 3 containing the number zero in
element 0, the list <code>(2 2 2 2)</code> in element 1, and the
string <code>"Anna"</code> in element 2 can be written as
following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="o">#</span><span class="p">(</span><span class="nf">0</span> <span class="p">(</span><span class="nf">2</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span><span class="p">)</span> <span class="s">"Anna"</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In STklos, vectors constants don&#8217;t need to be quoted.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(vector? obj)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns <code>#t</code> if <code>obj</code> is a vector, otherwise returns <code>#f</code>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(make-vector k)</code></strong><br>
<strong><code>(make-vector k fill)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns a newly allocated vector of <code>k</code> elements. If a second argument is
given, then each element is initialized to <code>fill</code>. Otherwise the initial
contents of each element is unspecified.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(vector obj &#8230;&#8203;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns a newly allocated vector whose elements contain the given arguments.
Analogous to <code>list</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nb">vector</span> <span class="ss">'a</span> <span class="ss">'b</span> <span class="ss">'c</span><span class="p">)</span>               <span class="nv">=&gt;</span>  <span class="o">#</span><span class="p">(</span><span class="nf">a</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(vector-length vector)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the number of elements in <code>vector</code> as an exact integer.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(vector-ref vector k)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>k</code> must be a valid index of <code>vector</code>. <code>Vector-ref</code> returns the contents of
element <code>k</code> of vector.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nb">vector-ref</span> <span class="o">'#</span><span class="p">(</span><span class="nf">1</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">5</span> <span class="mi">8</span> <span class="mi">13</span> <span class="mi">21</span><span class="p">)</span>
            <span class="mi">5</span><span class="p">)</span>                                    <span class="nv">=&gt;</span>  <span class="mi">8</span>
<span class="p">(</span><span class="nb">vector-ref</span> <span class="o">'#</span><span class="p">(</span><span class="nf">1</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">5</span> <span class="mi">8</span> <span class="mi">13</span> <span class="mi">21</span><span class="p">)</span>
            <span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">i</span> <span class="p">(</span><span class="nb">round</span> <span class="p">(</span><span class="nb">*</span> <span class="mi">2</span> <span class="p">(</span><span class="nb">acos</span> <span class="mi">-1</span><span class="p">)))))</span>
              <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">inexact?</span> <span class="nv">i</span><span class="p">)</span>
                  <span class="p">(</span><span class="nb">inexact-&gt;exact</span> <span class="nv">i</span><span class="p">)</span>
                  <span class="nv">i</span><span class="p">)))</span>                            <span class="nv">=&gt;</span> <span class="mi">13</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(vector-set! vector k obj)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>k</code> must be a valid index of <code>vector</code>. <code>Vector-set!</code> stores <code>obj</code> in element
<code>k</code> of <code>vector</code>. The value returned by <code>vector-set!</code> is <strong><em>void</em></strong>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">vec</span> <span class="p">(</span><span class="nb">vector</span> <span class="mi">0</span> <span class="o">'</span><span class="p">(</span><span class="nf">2</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span><span class="p">)</span> <span class="s">"Anna"</span><span class="p">)))</span>
  <span class="p">(</span><span class="nb">vector-set!</span> <span class="nv">vec</span> <span class="mi">1</span> <span class="o">'</span><span class="p">(</span><span class="s">"Sue"</span> <span class="s">"Sue"</span><span class="p">))</span>
  <span class="nv">vec</span><span class="p">)</span>      <span class="nv">=&gt;</span>  <span class="o">#</span><span class="p">(</span><span class="nf">0</span> <span class="p">(</span><span class="s">"Sue"</span> <span class="s">"Sue"</span><span class="p">)</span> <span class="s">"Anna"</span><span class="p">)</span>

<span class="p">(</span><span class="nb">vector-set!</span> <span class="o">'#</span><span class="p">(</span><span class="nf">0</span> <span class="mi">1</span> <span class="mi">2</span><span class="p">)</span> <span class="mi">1</span> <span class="s">"doe"</span><span class="p">)</span>  <span class="nv">=&gt;</span>  <span class="nv">error</span>  <span class="c1">; constant vector</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS / R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(vector&#8594;list vector)</code></strong><br>
<strong><code>(vector&#8594;list vector start)</code></strong><br>
<strong><code>(vector&#8594;list vector start end)</code></strong><br>
<strong><code>(list&#8594;vector list)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>Vector&#8594;list</code> returns a newly allocated list of the objects contained in
the elements of <code>vector</code> between start an end. <code>List&#8594;vector</code> returns a
newly created vector initialized to the elements of the list <code>list</code>.</p>
</div>
<div class="paragraph">
<p>In both procedures, order is preserved.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nb">vector-&gt;list</span> <span class="o">'#</span><span class="p">(</span><span class="nf">dah</span> <span class="nv">dah</span> <span class="nv">didah</span><span class="p">))</span>     <span class="nv">=&gt;</span>  <span class="p">(</span><span class="nf">dah</span> <span class="nv">dah</span> <span class="nv">didah</span><span class="p">)</span>
<span class="p">(</span><span class="nb">vector-&gt;list</span> <span class="o">'#</span><span class="p">(</span><span class="nf">dah</span> <span class="nv">dah</span> <span class="nv">didah</span><span class="p">)</span> <span class="mi">1</span> <span class="mi">2</span><span class="p">)</span> <span class="nv">=&gt;</span>  <span class="p">(</span><span class="nf">dah</span><span class="p">)</span>
<span class="p">(</span><span class="nb">list-&gt;vector</span> <span class="o">'</span><span class="p">(</span><span class="nf">dididit</span> <span class="nv">dah</span><span class="p">))</span>        <span class="nv">=&gt;</span>  <span class="o">#</span><span class="p">(</span><span class="nf">dididit</span> <span class="nv">dah</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The R<sup>5</sup>RS version of <code>vector&#8594;list</code> accepts only one
parameter.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(vector&#8594;string string)</code></strong><br>
<strong><code>(vector&#8594;string string start)</code></strong><br>
<strong><code>(vector&#8594;string string start end)</code></strong><br>
<strong><code>(string&#8594;vector vector)</code></strong><br>
<strong><code>(string&#8594;vector vector start)</code></strong><br>
<strong><code>(string&#8594;vector vector start end)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>The <code>vector&#8594;string</code> procedure returns a newly allocated
string of the objects contained in the elements of <code>vector</code>
between <code>start</code> and <code>end</code>. It is an error if any element of <code>vector</code>
between <code>start</code> and <code>end</code> is not a character.</p>
</div>
<div class="paragraph">
<p>The <code>string&#8594;vector</code> procedure returns a newly created vector
initialized to the elements of <code>string</code> between <code>start</code> and <code>end</code>.</p>
</div>
<div class="paragraph">
<p>In both procedures, order is preserved.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">string-&gt;vector</span> <span class="s">"ABC"</span><span class="p">)</span>           <span class="nv">=&gt;</span> <span class="o">#</span><span class="p">(</span><span class="sc">#\A</span> <span class="sc">#\B</span> <span class="sc">#\C</span><span class="p">)</span>
<span class="p">(</span><span class="nf">vector-&gt;string</span> <span class="o">#</span><span class="p">(</span><span class="sc">#\1</span> <span class="sc">#\2</span> <span class="sc">#\3</span><span class="p">))</span>  <span class="nv">=&gt;</span> <span class="s">"123"</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(vector-append vector &#8230;&#8203;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns a newly allocated vector whose elements are the
concatenation of the elements of the given vectors.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">vector-append</span> <span class="o">#</span><span class="p">(</span><span class="nf">a</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">)</span> <span class="o">#</span><span class="p">(</span><span class="nf">d</span> <span class="nv">e</span> <span class="nv">f</span><span class="p">))</span> <span class="nv">=&gt;</span> <span class="o">#</span><span class="p">(</span><span class="nf">a</span> <span class="nv">b</span> <span class="nv">c</span> <span class="nv">d</span> <span class="nv">e</span> <span class="nv">f</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS / R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(vector-fill! vector fill)</code></strong><br>
<strong><code>(vector-fill! vector fill start)</code></strong><br>
<strong><code>(vector-fill! vector fill start end)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Stores <code>fill</code> in every element of <code>vector</code> between <code>start</code> and <code>end</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The R<sup>5</sup>RS version of <code>vector-fill!</code> accepts only one
parameter.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS / R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(vector-copy v)</code></strong><br>
<strong><code>(vector-copy v start)</code></strong><br>
<strong><code>(vector-copy v start stop)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Return a newly allocated copy of the elements of the given
vector between <code>start</code> and <code>end</code> . The elements of the new
vector are the same (in the sense of eqv?) as the elements
of the old.</p>
</div>
<div class="paragraph">
<p>Note that, if <code>v</code> is a constant vector, its copy is not constant.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">define</span> <span class="nv">a</span> <span class="o">#</span><span class="p">(</span><span class="nf">1</span> <span class="mi">8</span> <span class="mi">2</span> <span class="mi">8</span><span class="p">))</span>         <span class="c1">; a is immutable</span>
<span class="p">(</span><span class="k">define</span> <span class="nv">b</span> <span class="p">(</span><span class="nf">vector-copy</span> <span class="nv">a</span><span class="p">))</span>    <span class="c1">; b is mutable</span>
<span class="p">(</span><span class="nb">vector-set!</span> <span class="nv">b</span> <span class="mi">0</span> <span class="mi">3</span><span class="p">)</span>
<span class="nv">b</span>                            <span class="nv">=&gt;</span> <span class="o">#</span><span class="p">(</span><span class="nf">3</span> <span class="mi">8</span> <span class="mi">2</span> <span class="mi">8</span><span class="p">)</span>
<span class="p">(</span><span class="k">define</span> <span class="nv">c</span> <span class="p">(</span><span class="nf">vector-copy</span> <span class="nv">b</span> <span class="mi">1</span> <span class="mi">3</span><span class="p">))</span>
<span class="nv">c</span>                            <span class="nv">=&gt;</span> <span class="o">#</span><span class="p">(</span><span class="nf">8</span> <span class="mi">2</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(vector-copy! to at from)</code></strong><br>
<strong><code>(vector-copy! to at from start)</code></strong><br>
<strong><code>(vector-copy! to at from start end)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(vector-resize v size)</code></strong><br>
<strong><code>(vector-resize v size fill)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns a copy of v of the given <code>size</code>. If <code>size</code> is greater
than the vector size of <code>v</code>, the contents of the newly allocated vector cells
is  set to the value of <code>fill</code>. If <code>fill</code> is omitted the content of the
new cells is <strong><em>void</em></strong>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(vector-mutable? obj)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns <code>#t</code> if <code>obj</code> is a mutable vector, otherwise returns <code>#f</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">vector-mutable?</span> <span class="o">'#</span><span class="p">(</span><span class="nf">1</span> <span class="mi">2</span> <span class="nv">a</span> <span class="nv">b</span><span class="p">))</span>            <span class="nv">=&gt;</span> <span class="no">#f</span>
<span class="p">(</span><span class="nf">vector-mutable?</span> <span class="p">(</span><span class="nf">vector-copy</span> <span class="o">'#</span><span class="p">(</span><span class="nf">1</span> <span class="mi">2</span><span class="p">)))</span>  <span class="nv">=&gt;</span> <span class="no">#t</span>
<span class="p">(</span><span class="nf">vector-mutable?</span> <span class="p">(</span><span class="nb">vector</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">))</span>         <span class="nv">=&gt;</span> <span class="no">#t</span>
<span class="p">(</span><span class="nf">vector-mutable?</span> <span class="mi">12</span><span class="p">)</span>                     <span class="nv">=&gt;</span> <span class="no">#f</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(sort obj predicate)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>Obj</code> must be a list or a vector. <code>Sort</code> returns a copy of <code>obj</code> sorted
according to <code>predicate</code>. <code>Predicate</code> must be a procedure which takes
two arguments and returns a true value if the first argument is strictly
``before'' the second.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">sort</span> <span class="o">'</span><span class="p">(</span><span class="nf">1</span> <span class="mi">2</span> <span class="mi">-4</span> <span class="mi">12</span> <span class="mi">9</span> <span class="mi">-1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span> <span class="nv">&lt;</span><span class="p">)</span>
               <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">-4</span> <span class="mi">-1</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">9</span> <span class="mi">12</span><span class="p">)</span>
<span class="p">(</span><span class="nf">sort</span> <span class="o">'#</span><span class="p">(</span><span class="s">"one"</span> <span class="s">"two"</span> <span class="s">"three"</span> <span class="s">"four"</span><span class="p">)</span>
      <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">x</span> <span class="nv">y</span><span class="p">)</span> <span class="p">(</span><span class="nb">&gt;</span> <span class="p">(</span><span class="nb">string-length</span> <span class="nv">x</span><span class="p">)</span> <span class="p">(</span><span class="nb">string-length</span> <span class="nv">y</span><span class="p">))))</span>
               <span class="nv">=&gt;</span> <span class="o">'#</span><span class="p">(</span><span class="s">"three"</span> <span class="s">"four"</span> <span class="s">"one"</span> <span class="s">"two"</span><span class="p">)</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_structures">4.9. Structures</h3>
<div class="paragraph">
<p>
A structure type is a record data type composing a number of slots. A
structure, an instance of a structure type, is a first-class value
that contains a value for each field of the structure type.</p>
</div>
<div class="paragraph">
<p>Structures can be created with the <code>define-struct</code> high
level syntax. However, <strong><em>STklos</em></strong> also offers some low-level functions
to build and access the internals of a structure.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> syntax</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(define-struct &lt;name&gt; &lt;slot&gt; &#8230;&#8203;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Defines a structure type whose name is <code>&lt;name&gt;</code>. Once a structure type is
defined, the following symbols are bound:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>&lt;name&gt;</code> denotes the structure type.</p>
</li>
<li>
<p><code>make-&lt;name&gt;</code> is a procedure which takes 0 to <code>n</code> parameters (if there
are <code>n</code> slots defined). Each parameter is assigned to the corresponding
field (in the definition order).</p>
</li>
<li>
<p><code>&lt;name&gt;?</code> is a predicate which returns <code>#t</code> when applied to an
instance of the <code>&lt;name&gt;</code> structure type and <code>#f</code> otherwise
<code>&lt;name&gt;-&lt;slot&gt;</code> (one for each defined <code>&lt;slot&gt;</code>) to read the
content of an instance of the <code>&lt;name&gt;</code> structure type. Writting the
content of a slot can be done using a generalized <code>set!</code>.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">define-struct</span> <span class="nv">point</span> <span class="nv">x</span> <span class="nv">y</span><span class="p">)</span>
<span class="p">(</span><span class="k">define</span> <span class="nv">p</span> <span class="p">(</span><span class="nf">make-point</span> <span class="mi">1</span> <span class="mi">2</span><span class="p">))</span>
<span class="p">(</span><span class="nf">point?</span> <span class="nv">p</span><span class="p">)</span>    <span class="nv">=&gt;</span> <span class="no">#t</span>
<span class="p">(</span><span class="nf">point?</span> <span class="mi">100</span><span class="p">)</span>  <span class="nv">=&gt;</span> <span class="no">#f</span>
<span class="p">(</span><span class="nf">point-x</span> <span class="nv">p</span><span class="p">)</span>   <span class="nv">=&gt;</span> <span class="mi">1</span>
<span class="p">(</span><span class="nf">point-y</span> <span class="nv">p</span><span class="p">)</span>   <span class="nv">=&gt;</span> <span class="mi">2</span>
<span class="p">(</span><span class="k">set!</span> <span class="p">(</span><span class="nf">point-x</span> <span class="nv">p</span><span class="p">)</span> <span class="mi">10</span><span class="p">)</span>
<span class="p">(</span><span class="nf">point-x</span> <span class="nv">p</span><span class="p">)</span>   <span class="nv">=&gt;</span> <span class="mi">10</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(make-struct-type name parent slots)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>This form which is more general than <code>define-struct</code> permits to define a
new structure type whose name is <code>name</code>. Parent is the structure
type from which is the new structure type is a subtype (or <code>#f</code> is the
new structure-type has no super type). <code>Slots</code> is the list of the slot
names which constitute the structure tpe.</p>
</div>
<div class="paragraph">
<p>When a structure type is s subtype of a previous type, its slots are added
to the ones of the super type.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(struct-type? obj)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns <code>#t</code> if <code>obj</code> is a structure type, otherwise returns <code>#f</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">type</span> <span class="p">(</span><span class="nf">make-struct-type</span> <span class="ss">'point</span> <span class="no">#f</span> <span class="o">'</span><span class="p">(</span><span class="nf">x</span> <span class="nv">y</span><span class="p">))))</span>
  <span class="p">(</span><span class="nf">struct-type?</span> <span class="nv">type</span><span class="p">))</span>         <span class="nv">=&gt;</span> <span class="no">#t</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(struct-type-slots structype)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the slots of the structure type <code>structype</code> as a list.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">define</span> <span class="nv">point</span>  <span class="p">(</span><span class="nf">make-struct-type</span> <span class="ss">'point</span> <span class="no">#f</span> <span class="o">'</span><span class="p">(</span><span class="nf">x</span> <span class="nv">y</span><span class="p">)))</span>
<span class="p">(</span><span class="k">define</span> <span class="nv">circle</span> <span class="p">(</span><span class="nf">make-struct-type</span> <span class="ss">'circle</span> <span class="nv">point</span> <span class="o">'</span><span class="p">(</span><span class="nf">r</span><span class="p">)))</span>
<span class="p">(</span><span class="nf">struct-type-slots</span> <span class="nv">point</span><span class="p">)</span>   <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">x</span> <span class="nv">y</span><span class="p">)</span>
<span class="p">(</span><span class="nf">struct-type-slots</span> <span class="nv">circle</span><span class="p">)</span>  <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">x</span> <span class="nv">y</span> <span class="nv">r</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(struct-type-parent structype)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the super type of the structure type <code>structype</code>, if it exists
or <code>#f</code> otherwise.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(struct-type-name structype)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the name associated to the structure type <code>structype</code>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(struct-type-change-writer! structype proc)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Change the default writer associated to structures of type <code>structype</code> to
to the <code>proc</code> procedure. The <code>proc</code> procedure must accept 2 arguments
(the structure to write and the port wher the structure must be written
in that order). The value returned by <code>struct-type-change-writer!</code> is the
old writer associated to <code>structype</code>. To restore the standard structure
writer for <code>structype</code>, use the special value <code>#f</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">define</span> <span class="nv">point</span> <span class="p">(</span><span class="nf">make-struct-type</span> <span class="ss">'point</span> <span class="no">#f</span> <span class="o">'</span><span class="p">(</span><span class="nf">x</span> <span class="nv">y</span><span class="p">)))</span>

<span class="p">(</span><span class="nf">struct-type-change-writer!</span>
  <span class="nv">point</span>
  <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">s</span> <span class="nv">port</span><span class="p">)</span>
    <span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">type</span> <span class="p">(</span><span class="nf">struct-type</span> <span class="nv">s</span><span class="p">)))</span>
      <span class="p">(</span><span class="nf">format</span> <span class="nv">port</span> <span class="s">"{~A"</span> <span class="p">(</span><span class="nf">struct-type-name</span> <span class="nv">type</span><span class="p">))</span>
      <span class="c1">;; display the slots and their value</span>
      <span class="p">(</span><span class="nb">for-each</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">x</span><span class="p">)</span>
       <span class="p">(</span><span class="nf">format</span> <span class="nv">port</span> <span class="s">" ~A=~S"</span> <span class="nv">x</span> <span class="p">(</span><span class="nf">struct-ref</span> <span class="nv">s</span> <span class="nv">x</span><span class="p">)))</span>
     <span class="p">(</span><span class="nf">struct-type-slots</span> <span class="nv">type</span><span class="p">))</span>
      <span class="p">(</span><span class="nf">format</span> <span class="nv">port</span> <span class="s">"}"</span><span class="p">))))</span>
<span class="p">(</span><span class="nb">display</span> <span class="p">(</span><span class="nf">make-struct</span> <span class="nv">point</span> <span class="mi">1</span> <span class="mi">2</span><span class="p">))</span> <span class="nv">|-</span> <span class="err">{</span><span class="nv">point</span> <span class="nv">x=1</span> <span class="nv">y=2</span><span class="err">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(make-struct structype expr &#8230;&#8203;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns a newly allocated instance of the structure type <code>structype</code>,
whose slots are initialized to <code>expr</code> &#8230;&#8203; If fewer <code>expr</code> than the number of
instances are given to <code>make-struct</code>, the remaining slots are inialized with
the special <strong><em>void</em></strong> value.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(struct? obj)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns <code>#t</code> if <code>obj</code> is a structure, otherwise returns <code>#f</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">let*</span> <span class="p">((</span><span class="nf">type</span> <span class="p">(</span><span class="nf">make-struct-type</span> <span class="ss">'point</span> <span class="no">#f</span> <span class="o">'</span><span class="p">(</span><span class="nf">x</span> <span class="nv">y</span><span class="p">)))</span>
       <span class="p">(</span><span class="nf">inst</span> <span class="p">(</span><span class="nf">make-struct</span> <span class="nv">type</span> <span class="mi">1</span> <span class="mi">2</span><span class="p">)))</span>
  <span class="p">(</span><span class="nf">struct?</span> <span class="nv">inst</span><span class="p">))</span>         <span class="nv">=&gt;</span> <span class="no">#t</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(struct-type s)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the structure type of the <code>s</code> structure</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(struct-ref s slot-name)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the value associated to slot <code>slot-name</code> of the <code>s</code> structure.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">define</span> <span class="nv">point</span>  <span class="p">(</span><span class="nf">make-struct-type</span> <span class="ss">'point</span> <span class="no">#f</span> <span class="o">'</span><span class="p">(</span><span class="nf">x</span> <span class="nv">y</span><span class="p">)))</span>
<span class="p">(</span><span class="k">define</span> <span class="nv">circle</span> <span class="p">(</span><span class="nf">make-struct-type</span> <span class="ss">'circle</span> <span class="nv">point</span> <span class="o">'</span><span class="p">(</span><span class="nf">r</span><span class="p">)))</span>
<span class="p">(</span><span class="k">define</span> <span class="nv">p</span> <span class="p">(</span><span class="nf">make-struct</span> <span class="nv">point</span> <span class="mi">1</span> <span class="mi">2</span><span class="p">))</span>
<span class="p">(</span><span class="k">define</span> <span class="nv">c</span> <span class="p">(</span><span class="nf">make-struct</span> <span class="nv">circle</span> <span class="mi">10</span> <span class="mi">20</span> <span class="mi">30</span><span class="p">))</span>
<span class="p">(</span><span class="nf">struct-ref</span> <span class="nv">p</span> <span class="ss">'y</span><span class="p">)</span> <span class="nv">=&gt;</span> <span class="mi">2</span>
<span class="p">(</span><span class="nf">struct-ref</span> <span class="nv">c</span> <span class="ss">'r</span><span class="p">)</span> <span class="nv">=&gt;</span> <span class="mi">30</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(struct-set! s slot-name value)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Stores value in the to slot <code>slot-name</code> of the <code>s</code> structure. The value
returned by <code>struct-set!</code> is <strong><em>void</em></strong>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">define</span> <span class="nv">point</span>  <span class="p">(</span><span class="nf">make-struct-type</span> <span class="ss">'point</span> <span class="no">#f</span> <span class="o">'</span><span class="p">(</span><span class="nf">x</span> <span class="nv">y</span><span class="p">)))</span>
<span class="p">(</span><span class="k">define</span> <span class="nv">p</span> <span class="p">(</span><span class="nf">make-struct</span> <span class="nv">point</span> <span class="mi">1</span> <span class="mi">2</span><span class="p">))</span>
<span class="p">(</span><span class="nf">struct-ref</span> <span class="nv">p</span> <span class="ss">'x</span><span class="p">)</span> <span class="nv">=&gt;</span> <span class="mi">1</span>
<span class="p">(</span><span class="nf">struct-set!</span> <span class="nv">p</span> <span class="ss">'x</span> <span class="mi">0</span><span class="p">)</span>
<span class="p">(</span><span class="nf">struct-ref</span> <span class="nv">p</span> <span class="ss">'x</span><span class="p">)</span> <span class="nv">=&gt;</span> <span class="mi">0</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(struct-is-a? s structype)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Return a boolean that indicates if the structure <code>s</code> is a of type <code>structype</code>.
Note that if <code>s</code> is an instance of a subtype of <em>S</em>, it is considered
also as an instance of type <em>S</em>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">define</span> <span class="nv">point</span>  <span class="p">(</span><span class="nf">make-struct-type</span> <span class="ss">'point</span> <span class="no">#f</span> <span class="o">'</span><span class="p">(</span><span class="nf">x</span> <span class="nv">y</span><span class="p">)))</span>
<span class="p">(</span><span class="k">define</span> <span class="nv">circle</span> <span class="p">(</span><span class="nf">make-struct-type</span> <span class="ss">'circle</span> <span class="nv">point</span> <span class="o">'</span><span class="p">(</span><span class="nf">r</span><span class="p">)))</span>
<span class="p">(</span><span class="k">define</span> <span class="nv">p</span> <span class="p">(</span><span class="nf">make-struct</span> <span class="nv">point</span> <span class="mi">1</span> <span class="mi">2</span><span class="p">))</span>
<span class="p">(</span><span class="k">define</span> <span class="nv">c</span> <span class="p">(</span><span class="nf">make-struct</span> <span class="nv">circle</span> <span class="mi">10</span> <span class="mi">20</span> <span class="mi">30</span><span class="p">))</span>
<span class="p">(</span><span class="nf">struct-is-a?</span> <span class="nv">p</span> <span class="nv">point</span><span class="p">)</span>   <span class="nv">=&gt;</span> <span class="no">#t</span>
<span class="p">(</span><span class="nf">struct-is-a?</span> <span class="nv">c</span> <span class="nv">point</span><span class="p">)</span>   <span class="nv">=&gt;</span> <span class="no">#t</span>
<span class="p">(</span><span class="nf">struct-is-a?</span> <span class="nv">p</span> <span class="nv">circle</span><span class="p">)</span>  <span class="nv">=&gt;</span> <span class="no">#f</span>
<span class="p">(</span><span class="nf">struct-is-a?</span> <span class="nv">c</span> <span class="nv">circle</span><span class="p">)</span>  <span class="nv">=&gt;</span> <span class="no">#t</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(struct&#8594;list s)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the content of structure <code>s</code> as an A-list whose keys are the
slots of the structure type of <code>s</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">define</span> <span class="nv">point</span>  <span class="p">(</span><span class="nf">make-struct-type</span> <span class="ss">'point</span> <span class="no">#f</span> <span class="o">'</span><span class="p">(</span><span class="nf">x</span> <span class="nv">y</span><span class="p">)))</span>
<span class="p">(</span><span class="k">define</span> <span class="nv">p</span> <span class="p">(</span><span class="nf">make-struct</span> <span class="nv">point</span> <span class="mi">1</span> <span class="mi">2</span><span class="p">))</span>
<span class="p">(</span><span class="nf">struct-&gt;list</span> <span class="nv">p</span><span class="p">)</span> <span class="nv">=&gt;</span> <span class="p">((</span><span class="nf">x</span> <span class="o">.</span> <span class="mi">1</span><span class="p">)</span> <span class="p">(</span><span class="nf">y</span> <span class="o">.</span> <span class="mi">2</span><span class="p">))</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_bytevectors">4.10. Bytevectors</h3>
<div class="paragraph">
<p>
<em>Bytevectors</em> represent blocks of binary data.  They
are fixed-length sequences of bytes, where a <em>byte</em> is an
exact integer in the range <code>(0, 255)</code>. A bytevector is typically more
space-efficient than a vector containing the same values.</p>
</div>
<div class="paragraph">
<p>The <em>length</em> of a bytevector is the number of elements that it contains. This
number is a non-negative integer that is fixed when the bytevector is
created. The <em>valid indexes</em> of a bytevector are the exact non-negative
integers less than the length of the bytevector, starting at index zero as
with vectors.</p>
</div>
<div class="paragraph">
<p>Bytevectors are written using the notation <code>#u8(byte &#8230;&#8203;)</code>.  For example, a
bytevector of length 3 containing the byte 0 in element 0, the byte 10 in
element 1, and the byte 5 in element 2 can be written as follows: <code>#u8(0 10
5)</code></p>
</div>
<div class="paragraph">
<p>Bytevector constants are self-evaluating, so they do not
need to be quoted in programs.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(bytevector? obj)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns <code>!t</code> if <code>obj</code> is a bytevector and returns <code>!f</code> otherwise.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(make-bytevector k)</code></strong><br>
<strong><code>(make-bytevector k byte)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns a newly allocated bytevector of k bytes. If If <code>byte</code> is given,
then all elements of the bytevector are initialized to <code>byte</code>, otherwise
the contents of each element is 0.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">make-bytevector</span> <span class="mi">2</span> <span class="mi">12</span><span class="p">)</span> <span class="nv">=&gt;</span> <span class="o">#</span><span class="nv">u8</span><span class="p">(</span><span class="nf">12</span> <span class="mi">12</span><span class="p">)</span>
<span class="p">(</span><span class="nf">make-bytevector</span> <span class="mi">3</span><span class="p">)</span>    <span class="nv">=&gt;</span> <span class="o">#</span><span class="nv">u8</span><span class="p">(</span><span class="nf">0</span> <span class="mi">0</span> <span class="mi">0</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(bytevector byte &#8230;&#8203;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns a newly allocated bytevector containing its arguments.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">bytevector</span> <span class="mi">1</span> <span class="mi">3</span> <span class="mi">5</span> <span class="mi">1</span> <span class="mi">3</span> <span class="mi">5</span><span class="p">)</span>   <span class="nv">=&gt;</span> <span class="o">#</span><span class="nv">u8</span><span class="p">(</span><span class="nf">1</span> <span class="mi">3</span> <span class="mi">5</span> <span class="mi">1</span> <span class="mi">3</span> <span class="mi">5</span><span class="p">)</span>
<span class="p">(</span><span class="nf">bytevector</span><span class="p">)</span>               <span class="nv">=&gt;</span> <span class="o">#</span><span class="nv">u8</span><span class="p">()</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(bytevector-length bytevector)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the length of <code>bytevector</code> in bytes as an exact integer.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(bytevector-u8-ref bytevector k)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the byte at index <code>k</code> of <code>bytevector</code> as an exact integer in the
range [0..255]. It is an error if <code>k</code> is not a valid index of <code>bytevector</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">bytevector-u8-ref</span> <span class="o">#</span><span class="nv">u8</span><span class="p">(</span><span class="nf">1</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">5</span> <span class="mi">8</span> <span class="mi">13</span> <span class="mi">21</span><span class="p">)</span> <span class="mi">5</span>    <span class="nv">=&gt;</span> <span class="mi">8</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(bytevector-u8-ref bytevector k byte)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Stores byte as the k th byte of bytevector. It is an error if <code>k</code>
is not a valid index of <code>bytevector</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">bv</span> <span class="p">(</span><span class="nf">bytevector</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">)))</span>
  <span class="p">(</span><span class="nf">bytevector-u8-set!</span> <span class="nv">bv</span> <span class="mi">1</span> <span class="mi">3</span><span class="p">)</span>
  <span class="nv">bv</span><span class="p">)</span>                             <span class="nv">=&gt;</span> <span class="o">#</span><span class="nv">u8</span><span class="p">(</span><span class="nf">1</span> <span class="mi">3</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(bytevector-copy bytevector)</code></strong><br>
<strong><code>(bytevector-copy bytevector start)</code></strong><br>
<strong><code>(bytevector-copy bytevector start end)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns a newly allocated bytevector containing the bytes in <code>bytevector</code>
between <code>start</code> and <code>end</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">define</span> <span class="nv">a</span> <span class="o">#</span><span class="nv">u8</span><span class="p">(</span><span class="nf">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span><span class="p">))</span>
<span class="p">(</span><span class="nf">bytevector-copy</span> <span class="nv">a</span> <span class="mi">2</span> <span class="mi">4</span><span class="p">))</span>       <span class="nv">=&gt;</span>  <span class="o">#</span><span class="nv">u8</span><span class="p">(</span><span class="nf">3</span> <span class="mi">4</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(bytevector-copy! to at from)</code></strong><br>
<strong><code>(bytevector-copy! to at from start)</code></strong><br>
<strong><code>(bytevector-copy! to at from start end)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Copies the bytes of bytevector <code>from</code> between <code>start</code> and <code>end</code>
to bytevector <code>to</code>, starting at <code>at</code>. The order in which bytes
are copied is unspecified, except that if the source and
destination overlap, copying takes place as if the source is first
copied into a temporary bytevector and then into the destination.
This can be achieved without allocating storage by making sure
to copy in the correct direction in such circumstances.</p>
</div>
<div class="paragraph">
<p>It is an error if <code>at</code> is less than zero or greater than the length
of <code>to</code>. It is also an error if <code>(- (bytevector-length to) at)</code> is
less than <code>(- end start)</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">define</span> <span class="nv">a</span> <span class="p">(</span><span class="nf">bytevector</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span><span class="p">))</span>
<span class="p">(</span><span class="k">define</span> <span class="nv">b</span> <span class="p">(</span><span class="nf">bytevector</span> <span class="mi">10</span> <span class="mi">20</span> <span class="mi">30</span> <span class="mi">40</span> <span class="mi">50</span><span class="p">))</span>
<span class="p">(</span><span class="nf">bytevector-copy!</span> <span class="nv">b</span> <span class="mi">1</span> <span class="nv">a</span> <span class="mi">0</span> <span class="mi">2</span><span class="p">)</span>
<span class="nv">b</span>                                  <span class="nv">=&gt;</span>  <span class="o">#</span><span class="nv">u8</span><span class="p">(</span><span class="nf">10</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">40</span> <span class="mi">50</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(bytevector-append bytevector &#8230;&#8203;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns a newly allocated bytevector whose elements are
the concatenation of the elements in the given bytevectors.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">bytevector-append</span> <span class="o">#</span><span class="nv">u8</span><span class="p">(</span><span class="nf">0</span> <span class="mi">1</span> <span class="mi">2</span><span class="p">)</span> <span class="o">#</span><span class="nv">u8</span><span class="p">(</span><span class="nf">3</span> <span class="mi">4</span> <span class="mi">5</span><span class="p">))</span>
                    <span class="nv">=&gt;</span>  <span class="o">#</span><span class="nv">u8</span><span class="p">(</span><span class="nf">0</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(utf8&#8594;string bytevector)</code></strong><br>
<strong><code>(utf8&#8594;string bytevector start)</code></strong><br>
<strong><code>(utf8&#8594;string bytevector start end)</code></strong><br>
<strong><code>(string&#8594;utf8 string)</code></strong><br>
<strong><code>(string&#8594;utf8 string start)</code></strong><br>
<strong><code>(string&#8594;utf8 string start end)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>These procedures translate between strings and bytevectors
that encode those strings using the UTF-8 encoding.
The <code>utf8&#8594;string</code> procedure decodes the bytes of
a bytevector between <code>start</code> and <code>end</code> and returns the
corresponding string; the <code>string&#8594;utf8</code> procedure encodes the
characters of a string between <code>start</code> and <code>end</code> and returns
the corresponding bytevector.</p>
</div>
<div class="paragraph">
<p>It is an error for <code>bytevector</code> to contain invalid UTF-8 byte
sequences.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">utf8-&gt;string</span> <span class="o">#</span><span class="nv">u8</span><span class="p">(</span><span class="mh">#x41</span><span class="p">))</span>   <span class="nv">=&gt;</span> <span class="s">"A"</span>
<span class="p">(</span><span class="nf">string-&gt;utf8</span> <span class="s">""</span><span class="p">)</span>         <span class="nv">=&gt;</span> <span class="o">#</span><span class="nv">u8</span><span class="p">((</span><span class="mh">#xce</span> <span class="mh">#xbb</span><span class="p">)</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_control_features">4.11. Control features</h3>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(procedure? obj)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns <code>#t</code> if <code>obj</code> is a procedure, otherwise returns <code>#f</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nb">procedure?</span> <span class="nv">car</span><span class="p">)</span>                            <span class="nv">=&gt;</span>  <span class="no">#t</span>
<span class="p">(</span><span class="nb">procedure?</span> <span class="ss">'car</span><span class="p">)</span>                           <span class="nv">=&gt;</span>  <span class="no">#f</span>
<span class="p">(</span><span class="nb">procedure?</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">x</span><span class="p">)</span> <span class="p">(</span><span class="nb">*</span> <span class="nv">x</span> <span class="nv">x</span><span class="p">)))</span>           <span class="nv">=&gt;</span>  <span class="no">#t</span>
<span class="p">(</span><span class="nb">procedure?</span> <span class="o">'</span><span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">x</span><span class="p">)</span> <span class="p">(</span><span class="nb">*</span> <span class="nv">x</span> <span class="nv">x</span><span class="p">)))</span>          <span class="nv">=&gt;</span>  <span class="no">#f</span>
<span class="p">(</span><span class="nb">call-with-current-continuation</span> <span class="nv">procedure?</span><span class="p">)</span> <span class="nv">=&gt;</span>  <span class="no">#t</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(apply proc arg1 &#8230;&#8203; args)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>Proc</code> must be a procedure and <code>args</code> must be a list. Calls <code>proc</code> with the
elements of the list</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nb">append</span> <span class="p">(</span><span class="nb">list</span> <span class="nv">arg1</span> <span class="o">...</span><span class="p">)</span> <span class="nv">args</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>as the actual arguments.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nb">apply</span> <span class="nv">+</span> <span class="p">(</span><span class="nb">list</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">))</span>              <span class="nv">=&gt;</span>  <span class="mi">7</span>

<span class="p">(</span><span class="k">define</span> <span class="nv">compose</span>
  <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">f</span> <span class="nv">g</span><span class="p">)</span>
     <span class="p">(</span><span class="k">lambda</span> <span class="nv">args</span>
       <span class="p">(</span><span class="nf">f</span> <span class="p">(</span><span class="nb">apply</span> <span class="nv">g</span> <span class="nv">args</span><span class="p">)))))</span>

<span class="p">((</span><span class="nf">compose</span> <span class="nv">sqrt</span> <span class="nv">*</span><span class="p">)</span> <span class="mi">12</span> <span class="mi">75</span><span class="p">)</span>          <span class="nv">=&gt;</span>  <span class="mi">30</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(map proc list1 list2 &#8230;&#8203;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>The <code>list`s must be lists, and `proc</code> must be a procedure taking as many
arguments as there are lists and returning a single value.
If more than one list is given, then they must all be the same length.
<code>Map</code> applies <code>proc</code> element-wise to the elements of the `list`s and returns
a list of the results, in order.  The dynamic order in which proc is applied
to the elements of the lists is unspecified.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nb">map</span> <span class="nv">cadr</span> <span class="o">'</span><span class="p">((</span><span class="nf">a</span> <span class="nv">b</span><span class="p">)</span> <span class="p">(</span><span class="nf">d</span> <span class="nv">e</span><span class="p">)</span> <span class="p">(</span><span class="nf">g</span> <span class="nv">h</span><span class="p">)))</span>   <span class="nv">=&gt;</span>  <span class="p">(</span><span class="nf">b</span> <span class="nv">e</span> <span class="nv">h</span><span class="p">)</span>

<span class="p">(</span><span class="nb">map</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">n</span><span class="p">)</span> <span class="p">(</span><span class="nb">expt</span> <span class="nv">n</span> <span class="nv">n</span><span class="p">))</span>
     <span class="o">'</span><span class="p">(</span><span class="nf">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span><span class="p">))</span>                <span class="nv">=&gt;</span>  <span class="p">(</span><span class="nf">1</span> <span class="mi">4</span> <span class="mi">27</span> <span class="mi">256</span> <span class="mi">3125</span><span class="p">)</span>

<span class="p">(</span><span class="nb">map</span> <span class="nv">+</span> <span class="o">'</span><span class="p">(</span><span class="nf">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span> <span class="o">'</span><span class="p">(</span><span class="nf">4</span> <span class="mi">5</span> <span class="mi">6</span><span class="p">))</span>         <span class="nv">=&gt;</span>  <span class="p">(</span><span class="nf">5</span> <span class="mi">7</span> <span class="mi">9</span><span class="p">)</span>

<span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">count</span> <span class="mi">0</span><span class="p">))</span>
  <span class="p">(</span><span class="nb">map</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">ignored</span><span class="p">)</span>
      <span class="p">(</span><span class="k">set!</span> <span class="nv">count</span> <span class="p">(</span><span class="nb">+</span> <span class="nv">count</span> <span class="mi">1</span><span class="p">))</span>
      <span class="nv">count</span><span class="p">)</span>
       <span class="o">'</span><span class="p">(</span><span class="nf">a</span> <span class="nv">b</span><span class="p">)))</span>                   <span class="nv">=&gt;</span>  <span class="p">(</span><span class="nf">1</span> <span class="mi">2</span><span class="p">)</span> <span class="o">,</span><span class="p">(</span><span class="nf">emph</span> <span class="s">"or"</span><span class="p">)</span> <span class="p">(</span><span class="nf">2</span> <span class="mi">1</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(string-map proc string1 string2 &#8230;&#8203;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>The <code>strings</code> must be strings, and <code>proc</code> must be a procedure taking as
many arguments as there are strings and returning a single
value. If more than one string is given and not all strings have the
same length, <code>string-map</code> terminates when the shortest list runs
out. <code>String-map</code> applies <code>proc</code> element-wise to the elements of the
strings and returns a string of the results, in order. The dynamic
order in which proc is applied to the elements of the <code>strings</code> is
unspecified.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">string-map</span> <span class="nv">char-downcase</span> <span class="s">"AbdEgH"</span><span class="p">)</span>
         <span class="nv">=&gt;</span> <span class="s">"abdegh"</span>

<span class="p">(</span><span class="nf">string-map</span>
  <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">c</span><span class="p">)</span>
    <span class="p">(</span><span class="nb">integer-&gt;char</span> <span class="p">(</span><span class="nb">+</span> <span class="mi">1</span> <span class="p">(</span><span class="nb">char-&gt;integer</span> <span class="nv">c</span><span class="p">))))</span>
  <span class="s">"HAL"</span><span class="p">)</span>
         <span class="nv">=&gt;</span> <span class="s">"IBM"</span>

<span class="p">(</span><span class="nf">string-map</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">c</span> <span class="nv">k</span><span class="p">)</span>
           <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">eqv?</span> <span class="nv">k</span> <span class="sc">#\u</span><span class="p">)</span>
               <span class="p">(</span><span class="nb">char-upcase</span> <span class="nv">c</span><span class="p">)</span>
               <span class="p">(</span><span class="nb">char-downcase</span> <span class="nv">c</span><span class="p">)))</span>
         <span class="s">"studlycaps"</span>
         <span class="s">"ululululul"</span><span class="p">)</span>
      <span class="nv">=&gt;</span> <span class="s">"StUdLyCaPs"</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(vector-map proc vector1 vector2 &#8230;&#8203;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>The <code>vectors</code> must be vectors, and <code>proc</code> must be a procedure
taking as many arguments as there are vectors and returning a single
value. If more than one vector is given and not all vectors have the
same length, <code>vector-map</code> terminates when the shortest list runs
out. <code>Vector-map</code> applies <code>proc</code> element-wise to the elements of the
vectors and returns a vector of the results, in order. The dynamic
order in which proc is applied to the elements of the <code>vectors</code> is
unspecified.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">vector-map</span> <span class="nv">cadr</span> <span class="o">'#</span><span class="p">((</span><span class="nf">a</span> <span class="nv">b</span><span class="p">)</span> <span class="p">(</span><span class="nf">d</span> <span class="nv">e</span><span class="p">)</span> <span class="p">(</span><span class="nf">g</span> <span class="nv">h</span><span class="p">)))</span>
    <span class="nv">=&gt;</span>  <span class="o">#</span><span class="p">(</span><span class="nf">b</span> <span class="nv">e</span> <span class="nv">h</span><span class="p">)</span>

<span class="p">(</span><span class="nf">vector-map</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">n</span><span class="p">)</span> <span class="p">(</span><span class="nb">expt</span> <span class="nv">n</span> <span class="nv">n</span><span class="p">))</span>
         <span class="o">'#</span><span class="p">(</span><span class="nf">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span><span class="p">))</span>
    <span class="nv">=&gt;</span> <span class="o">#</span><span class="p">(</span><span class="nf">1</span> <span class="mi">4</span> <span class="mi">27</span> <span class="mi">256</span> <span class="mi">3125</span><span class="p">)</span>

<span class="p">(</span><span class="nf">vector-map</span> <span class="nv">+</span> <span class="o">'#</span><span class="p">(</span><span class="nf">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span> <span class="o">'#</span><span class="p">(</span><span class="nf">4</span> <span class="mi">5</span> <span class="mi">6</span><span class="p">))</span>
    <span class="nv">=&gt;</span> <span class="o">#</span><span class="p">(</span><span class="nf">5</span> <span class="mi">7</span> <span class="mi">9</span><span class="p">)</span>

<span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">count</span> <span class="mi">0</span><span class="p">))</span>
  <span class="p">(</span><span class="nf">vector-map</span>
    <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">ignored</span><span class="p">)</span>
      <span class="p">(</span><span class="k">set!</span> <span class="nv">count</span> <span class="p">(</span><span class="nb">+</span> <span class="nv">count</span> <span class="mi">1</span><span class="p">))</span>
      <span class="nv">count</span><span class="p">)</span>
    <span class="o">'#</span><span class="p">(</span><span class="nf">a</span> <span class="nv">b</span><span class="p">)))</span>
    <span class="nv">=&gt;</span> <span class="o">#</span><span class="p">(</span><span class="nf">1</span> <span class="mi">2</span><span class="p">)</span> <span class="nv">or</span> <span class="o">#</span><span class="p">(</span><span class="nf">2</span> <span class="mi">1</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(for-each proc list1 list2 &#8230;&#8203;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>The arguments to <code>for-each</code> are like the arguments to <code>map</code>, but <code>for-each</code>
calls proc for its side effects rather than for its values.
Unlike <code>map</code>, <code>for-each</code> is guaranteed to call proc on the elements of
the lists in order from the first element(s) to the last, and the value
returned by <code>for-each</code> is <strong><em>void</em></strong>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">v</span> <span class="p">(</span><span class="nb">make-vector</span> <span class="mi">5</span><span class="p">)))</span>
  <span class="p">(</span><span class="nb">for-each</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">i</span><span class="p">)</span>
              <span class="p">(</span><span class="nb">vector-set!</span> <span class="nv">v</span> <span class="nv">i</span> <span class="p">(</span><span class="nb">*</span> <span class="nv">i</span> <span class="nv">i</span><span class="p">)))</span>
            <span class="o">'</span><span class="p">(</span><span class="nf">0</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">))</span>
  <span class="nv">v</span><span class="p">)</span>                                <span class="nv">=&gt;</span>  <span class="o">#</span><span class="p">(</span><span class="nf">0</span> <span class="mi">1</span> <span class="mi">4</span> <span class="mi">9</span> <span class="mi">16</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(string-for-each proc string1 string2 &#8230;&#8203;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>The arguments to <code>string-for-each</code> are like the arguments to
<code>string-map</code>, but <code>string-for-each</code> calls <code>proc</code> for its side effects
rather than for its values. Unlike <code>string-map</code>, <code>string-for-each</code> is
guaranteed to call <code>proc</code> on the elements of the lists in order from
the first element(s) to the last, and the value returned by
<code>string-for-each</code> is unspecified. If more than one string is given and
not all strings have the same length, <code>string-for-each</code> terminates when
the shortest string runs out.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">v</span> <span class="p">(</span><span class="nb">list</span><span class="p">)))</span>
  <span class="p">(</span><span class="nf">string-for-each</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">c</span><span class="p">)</span> <span class="p">(</span><span class="k">set!</span> <span class="nv">v</span> <span class="p">(</span><span class="nb">cons</span> <span class="p">(</span><span class="nb">char-&gt;integer</span> <span class="nv">c</span><span class="p">)</span> <span class="nv">v</span><span class="p">)))</span>
                   <span class="s">"abcde"</span><span class="p">)</span>
   <span class="nv">v</span><span class="p">)</span>
       <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">101</span> <span class="mi">100</span> <span class="mi">99</span> <span class="mi">98</span> <span class="mi">97</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(vector-for-each proc vector1 vector2 &#8230;&#8203;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>The arguments to <code>vector-for-each</code> are like the arguments to
<code>vector-map</code>, but <code>vector-for-each</code> calls <code>proc</code> for its side effects
rather than for its values. Unlike <code>vector-map</code>, <code>vector-for-each</code> is
guaranteed to call <code>proc</code> on the elements of the lists in order from
the first element(s) to the last, and the value returned by
<code>vector-for-each</code> is unspecified. If more than one vector is given and
not all vectors have the same length, <code>vector-for-each</code> terminates when
the shortest vector runs out.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">v</span> <span class="p">(</span><span class="nb">make-vector</span> <span class="mi">5</span><span class="p">)))</span>
  <span class="p">(</span><span class="nf">vector-for-each</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">i</span><span class="p">)</span> <span class="p">(</span><span class="nb">vector-set!</span> <span class="nv">v</span> <span class="nv">i</span> <span class="p">(</span><span class="nb">*</span> <span class="nv">i</span> <span class="nv">i</span><span class="p">)))</span>
                <span class="o">'#</span><span class="p">(</span><span class="nf">0</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">))</span>
  <span class="nv">v</span><span class="p">)</span>
       <span class="nv">=&gt;</span> <span class="o">#</span><span class="p">(</span><span class="nf">0</span> <span class="mi">1</span> <span class="mi">4</span> <span class="mi">9</span> <span class="mi">16</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(every pred list1 list2 &#8230;&#8203;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>every</code> applies the predicate <code>pred</code> across the lists, returning true if
the predicate returns true on every application.</p>
</div>
<div class="paragraph">
<p>If there are n list arguments <code>list1</code> &#8230;&#8203; <code>listn</code>, then <code>pred</code> must be
a procedure taking n arguments and returning a boolean result.</p>
</div>
<div class="paragraph">
<p><code>every</code> applies pred to the first elements of the <code>listi</code> parameters. If
this application returns false, every immediately returns <code>#f</code>.
Otherwise, it iterates, applying <code>pred</code> to the second elements of the <code>listi</code>
parameters, then the third, and so forth. The iteration stops when a
false value is produced or one of the lists runs out of values.
In the latter case, <code>every</code> returns the true value produced by its final
application of pred. The application of pred to the last element of the
lists is a tail call.</p>
</div>
<div class="paragraph">
<p>If one of the <code>listi</code> has no elements, <code>every</code> simply returns <code>#t</code>.</p>
</div>
<div class="paragraph">
<p>Like <code>any</code>, every&#8217;s name does not end with a question mark&#8201;&#8212;&#8201;this is to
indicate that it does not return a simple boolean (<code>#t</code> or <code>#f</code>), but a
general value.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(any pred list1 list2 &#8230;&#8203;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>any</code> applies the predicate across the lists, returning true if the
predicate returns true on any application.</p>
</div>
<div class="paragraph">
<p>If there are n list arguments <code>list1</code> &#8230;&#8203; <code>listn</code>, then <code>pred</code> must be
a procedure taking n arguments.</p>
</div>
<div class="paragraph">
<p><code>any</code> applies <code>pred</code> to the first elements of the <code>listi</code> parameters. If
this application returns a true value, <code>any</code> immediately returns that value.
Otherwise, it iterates, applying <code>pred</code> to the second elements of the <code>listi</code>
parameters, then the third, and so forth. The iteration stops when a true
value is produced or one of the lists runs out of values; in the latter case,
any returns <code>#f</code>. The application of <code>pred</code> to the last element of the
lists is a tail call.</p>
</div>
<div class="paragraph">
<p>Like every, <code>any&#8217;s name does not end with a question mark&#8201;&#8212;&#8201;this is
to indicate that it does not return a simple boolean (</code>#t` or <code>#f</code>), but
a general value.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">any</span> <span class="nv">integer?</span> <span class="o">'</span><span class="p">(</span><span class="nf">a</span> <span class="mi">3</span> <span class="nv">b</span> <span class="mf">2.7</span><span class="p">))</span>   <span class="nv">=&gt;</span> <span class="no">#t</span>
<span class="p">(</span><span class="nf">any</span> <span class="nv">integer?</span> <span class="o">'</span><span class="p">(</span><span class="nf">a</span> <span class="mf">3.1</span> <span class="nv">b</span> <span class="mf">2.7</span><span class="p">))</span> <span class="nv">=&gt;</span> <span class="no">#f</span>
<span class="p">(</span><span class="nf">any</span> <span class="nv">&lt;</span> <span class="o">'</span><span class="p">(</span><span class="nf">3</span> <span class="mi">1</span> <span class="mi">4</span> <span class="mi">1</span> <span class="mi">5</span><span class="p">)</span>
       <span class="o">'</span><span class="p">(</span><span class="nf">2</span> <span class="mi">7</span> <span class="mi">1</span> <span class="mi">8</span> <span class="mi">2</span><span class="p">))</span>          <span class="nv">=&gt;</span> <span class="no">#t</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(call-with-current-continuation proc)</code></strong><br>
<strong><code>(call/cc proc)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>Proc</code> must be a procedure of one argument. The procedure
<code>call-with-current-continuation</code> packages up the current continuation
(see the rationale below) as an "<em>escape procedure</em>" and passes it as
an argument to <code>proc</code>. The escape procedure is a Scheme procedure that, if
it is later called, will abandon whatever continuation is in effect at
that later time and will instead use the continuation that was in effect
when the escape procedure was created. Calling the escape procedure may cause
the invocation of before and after thunks installed using <code>dynamic-wind</code>.</p>
</div>
<div class="paragraph">
<p>The escape procedure accepts the same number of arguments as
the continuation to the original call to
<code>call-with-current-continuation</code>. Except for continuations created
by the <code>call-with-values</code> procedure, all continuations take exactly
one value.</p>
</div>
<div class="paragraph">
<p>The escape procedure that is passed to proc has unlimited extent
just like any other procedure in Scheme. It may be stored in variables
or data structures and may be called as many times as desired.</p>
</div>
<div class="paragraph">
<p>The following examples show only the most common ways in which
<code>call-with-current-continuation</code> is used. If all real uses were as simple
as these examples, there would be no need for a procedure with the power
of <code>call-with-current-continuation</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nb">call-with-current-continuation</span>
  <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">exit</span><span class="p">)</span>
    <span class="p">(</span><span class="nb">for-each</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">x</span><span class="p">)</span>
                <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">negative?</span> <span class="nv">x</span><span class="p">)</span>
                    <span class="p">(</span><span class="nf">exit</span> <span class="nv">x</span><span class="p">)))</span>
              <span class="o">'</span><span class="p">(</span><span class="nf">54</span> <span class="mi">0</span> <span class="mi">37</span> <span class="mi">-3</span> <span class="mi">245</span> <span class="mi">19</span><span class="p">))</span>
    <span class="no">#t</span><span class="p">))</span>                                <span class="nv">=&gt;</span>  <span class="mi">-3</span>

<span class="p">(</span><span class="k">define</span> <span class="nv">list-length</span>
  <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">obj</span><span class="p">)</span>
    <span class="p">(</span><span class="nb">call-with-current-continuation</span>
      <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">return</span><span class="p">)</span>
        <span class="p">(</span><span class="k">letrec</span> <span class="p">((</span><span class="nf">r</span>
                  <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">obj</span><span class="p">)</span>
                    <span class="p">(</span><span class="k">cond</span> <span class="p">((</span><span class="nb">null?</span> <span class="nv">obj</span><span class="p">)</span> <span class="mi">0</span><span class="p">)</span>
                          <span class="p">((</span><span class="nb">pair?</span> <span class="nv">obj</span><span class="p">)</span>
                           <span class="p">(</span><span class="nb">+</span> <span class="p">(</span><span class="nf">r</span> <span class="p">(</span><span class="nb">cdr</span> <span class="nv">obj</span><span class="p">))</span> <span class="mi">1</span><span class="p">))</span>
                          <span class="p">(</span><span class="k">else</span> <span class="p">(</span><span class="nf">return</span> <span class="no">#f</span><span class="p">))))))</span>
          <span class="p">(</span><span class="nf">r</span> <span class="nv">obj</span><span class="p">))))))</span>

<span class="p">(</span><span class="nf">list-length</span> <span class="o">'</span><span class="p">(</span><span class="nf">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">))</span>                <span class="nv">=&gt;</span>  <span class="mi">4</span>
<span class="p">(</span><span class="nf">list-length</span> <span class="o">'</span><span class="p">(</span><span class="nf">a</span> <span class="nv">b</span> <span class="o">.</span> <span class="nv">c</span><span class="p">))</span>                <span class="nv">=&gt;</span>  <span class="no">#f</span></code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
common use of <code>call-with-current-continuation</code>
is for structured, non-local exits from loops or procedure bodies,
but in fact <code>call-with-current-continuation</code> is extremely useful
for implementing a wide variety of advanced control structures.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Whenever a Scheme expression is evaluated there is a continuation
wanting the result of the expression. The continuation represents
an entire (default) future for the computation. If the expression
is evaluated at top level, for example, then the continuation
might take the result, print it on the screen, prompt for the
next input, evaluate it, and so on forever. Most of the time the
continuation includes actions specified by user code, as in a
continuation that will take the result, multiply it by the value
stored in a local variable, add seven, and give the answer to the
top level continuation to be printed. Normally these ubiquitous
continuations are hidden behind the scenes and programmers do not
think much about them. On rare occasions, however, a programmer
may need to deal with continuations explicitly.
<code>Call-with-current-continuation</code> allows Scheme
programmers to do that by creating a procedure that acts just
like the current continuation.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>call/cc</code> is just another name for
<code>call-with-current-continuation</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(call/ec proc)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>call/ec</code> is an short name for <code>call-with-escape-continuation</code>. <code>call/ec</code>
calls <code>proc</code> with one parameter, which is the current escape continuation
(a continuation which can only be used to abort a computation and hence
cannot be "re-enterered".</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nb">list</span> <span class="mi">1</span>
      <span class="p">(</span><span class="nf">call/ec</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">return</span><span class="p">)</span> <span class="p">(</span><span class="nb">list</span> <span class="ss">'a</span> <span class="p">(</span><span class="nf">return</span> <span class="ss">'b</span><span class="p">)</span> <span class="ss">'c</span><span class="p">)))</span>
      <span class="mi">3</span><span class="p">)</span>        <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">1</span> <span class="nv">b</span> <span class="mi">3</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>call/ec</code> is cheaper than the full call/cc. It is particularily useful
when all the power of <code>call/cc</code> is not needded.</p>
</div>
<div id="values" class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(values obj &#8230;&#8203;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Delivers all of its arguments to its continuation.
NOTE: R<sup>5</sup>RS imposes to use multiple values in the context of
of a <code>call-with-values</code>. In STklos, if <code>values</code> is not used with
<code>call-with-values</code>, only the first value is used (i.e. others values are
,(emph "ignored")).</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(call-with-values producer consumer)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Calls its producer argument with no values and a continuation that,
when passed some values, calls the consumer procedure with those values
as arguments. The continuation for the call to consumer is the
continuation of the call to call-with-values.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nb">call-with-values</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">()</span> <span class="p">(</span><span class="nb">values</span> <span class="mi">4</span> <span class="mi">5</span><span class="p">))</span>
                  <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">a</span> <span class="nv">b</span><span class="p">)</span> <span class="nv">b</span><span class="p">))</span>                <span class="nv">=&gt;</span>  <span class="mi">5</span>

<span class="p">(</span><span class="nb">call-with-values</span> <span class="nv">*</span> <span class="nv">-</span><span class="p">)</span>                             <span class="nv">=&gt;</span>  <span class="mi">-1</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> syntax</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(receive &lt;formals&gt; &lt;expression&gt; &lt;body&gt;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>This form is defined in <strong><a href="http://srfi.schemers.org/srfi-8/srfi-8.html">SRFI-8</a></strong> (<em>Receive: Binding to multiple values</em>). It simplifies
the usage of multiple values. Specifically, <code>&lt;formals&gt;</code> can have any
of three forms:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>(<code>&lt;variable<sub>1</sub>&gt;</code> &#8230;&#8203; <code>&lt;variable<sub>n</sub>&gt;</code>):
The environment in which the
receive-expression is evaluated is extended by binding <code>&lt;variable<sub>1</sub>&gt;</code>, &#8230;&#8203;,
<code>&lt;variable<sub>n</sub>&gt;</code> to fresh locations.<br>
The <code>&lt;expression&gt;</code> is evaluated, and its
values are stored into those locations. (It is an error if <code>&lt;expression&gt;</code>
does not have exactly n values.)</p>
</li>
<li>
<p><code>&lt;variable&gt;</code>: The environment in which the receive-expression is
evaluated is extended by binding <code>&lt;variable&gt;</code> to a fresh location.<br>
The <code>&lt;expression&gt;</code> is evaluated, its values are converted into a newly
allocated list, and the list is stored in the location bound to <code>&lt;variable&gt;</code>.</p>
</li>
<li>
<p>(<code>&lt;variable<sub>1</sub>&gt;</code> &#8230;&#8203; <code>&lt;variable<sub>n</sub>&gt;</code> . <code>&lt;variable<sub>n+1</sub>&gt;</code>):  The environment
in which the receive-expression is evaluated is extended by binding
<code>&lt;variable<sub>1</sub>&gt;</code>, &#8230;&#8203;, <code>&lt;variable<sub>n+1</sub>&gt;</code> to fresh locations.
The <code>&lt;expression&gt;</code> is evaluated. Its first n values are stored into the
locations bound to <code>&lt;variable<sub>1</sub>&gt;</code> &#8230;&#8203; <code>&lt;variable<sub>n</sub>&gt;</code>. Any remaining values
are converted into a newly allocated list, which is stored into the location
bound to <code>&lt;variable<sub>n+1</sub>&gt;</code>. (It is an error if <code>&lt;expression&gt;</code> does not have
at least n values.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In any case, the expressions in <code>&lt;body&gt;</code> are evaluated sequentially in
the extended environment. The results of the last expression in the body
are the values of the receive-expression.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">n</span> <span class="mi">123</span><span class="p">))</span>
  <span class="p">(</span><span class="nf">receive</span> <span class="p">(</span><span class="nf">q</span> <span class="nv">r</span><span class="p">)</span>
     <span class="p">(</span><span class="nb">values</span> <span class="p">(</span><span class="nb">quotient</span> <span class="nv">n</span> <span class="mi">10</span><span class="p">)</span> <span class="p">(</span><span class="nb">modulo</span> <span class="nv">n</span> <span class="mi">10</span><span class="p">))</span>
     <span class="p">(</span><span class="nb">cons</span> <span class="nv">q</span> <span class="nv">r</span><span class="p">)))</span>
              <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">12</span> <span class="o">.</span> <span class="mi">3</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(dynamic-wind before thunk after)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Calls <code>thunk</code> without arguments, returning the result(s) of this call.
<code>Before</code> and <code>after</code> are called, also without arguments, as required by
the following rules (note that in the absence of calls to continuations
captured using <code>call-with-current-continuation</code> the three arguments are
called once each, in order).  <code>Before</code> is called whenever execution enters
the dynamic extent of the call to <code>thunk</code> and <code>after</code> is called whenever
it exits that dynamic extent.  The dynamic extent of a procedure call is
the period between when the call is initiated and when it returns.
In Scheme, because of <code>call-with-current-continuation</code>, the dynamic
extent of a call may not be a single, connected time period. It is
defined as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The dynamic extent is entered when execution of the body of
the called procedure begins.</p>
</li>
<li>
<p>The dynamic extent is also entered when execution is not
within the dynamic extent and a continuation is invoked that was
captured (using <code>call-with-current-continuation</code>) during the dynamic
extent.</p>
</li>
<li>
<p>It is exited when the called procedure returns.</p>
</li>
<li>
<p>It is also exited when execution is within the dynamic
extent and a continuation is invoked that was captured while not within
the dynamic extent.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If a second call to <code>dynamic-wind</code> occurs within the dynamic extent
of the call to <code>thunk</code> and then a continuation is invoked in such a
way that the afters from these two invocations of <code>dynamic-wind</code>
are both to be called, then the after associated with the
second (inner) call to <code>dynamic-wind</code> is called first.</p>
</div>
<div class="paragraph">
<p>If a second call to <code>dynamic-wind</code> occurs within the dynamic extent
of the call to <code>thunk</code> and then a continuation is invoked in such a
way that the befores from these two invocations of <code>dynamic-wind</code>
are both to be called, then the before associated with the
first (outer) call to <code>dynamic-wind</code> is called first.</p>
</div>
<div class="paragraph">
<p>If invoking a continuation requires calling the <code>before</code> from one
call to <code>dynamic-wind</code> and the <code>after</code> from another, then the <code>after</code>
is called first.</p>
</div>
<div class="paragraph">
<p>The effect of using a captured continuation to enter or exit the
dynamic extent of a call to <code>before</code> or <code>after</code> is undefined.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">path</span> <span class="o">'</span><span class="p">())</span>
      <span class="p">(</span><span class="nf">c</span> <span class="no">#f</span><span class="p">))</span>
  <span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">add</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">s</span><span class="p">)</span>
               <span class="p">(</span><span class="k">set!</span> <span class="nv">path</span> <span class="p">(</span><span class="nb">cons</span> <span class="nv">s</span> <span class="nv">path</span><span class="p">)))))</span>
    <span class="p">(</span><span class="nb">dynamic-wind</span>
      <span class="p">(</span><span class="k">lambda</span> <span class="p">()</span> <span class="p">(</span><span class="nf">add</span> <span class="ss">'connect</span><span class="p">))</span>
      <span class="p">(</span><span class="k">lambda</span> <span class="p">()</span>
        <span class="p">(</span><span class="nf">add</span> <span class="p">(</span><span class="nb">call-with-current-continuation</span>
               <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">c0</span><span class="p">)</span>
                 <span class="p">(</span><span class="k">set!</span> <span class="nv">c</span> <span class="nv">c0</span><span class="p">)</span>
                 <span class="ss">'talk1</span><span class="p">))))</span>
      <span class="p">(</span><span class="k">lambda</span> <span class="p">()</span> <span class="p">(</span><span class="nf">add</span> <span class="ss">'disconnect</span><span class="p">)))</span>
    <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">&lt;</span> <span class="p">(</span><span class="nb">length</span> <span class="nv">path</span><span class="p">)</span> <span class="mi">4</span><span class="p">)</span>
        <span class="p">(</span><span class="nf">c</span> <span class="ss">'talk2</span><span class="p">)</span>
        <span class="p">(</span><span class="nb">reverse</span> <span class="nv">path</span><span class="p">))))</span>
                  <span class="nv">=&gt;</span>  <span class="p">(</span><span class="nf">connect</span> <span class="nv">talk1</span> <span class="nv">disconnect</span>
                       <span class="nv">connect</span> <span class="nv">talk2</span> <span class="nv">disconnect</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(eval expression environment)</code></strong><br>
<strong><code>(eval expression)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Evaluates expression in the specified environment and returns its
value. <code>Expression</code> must be a valid Scheme expression represented
as data. <code>Environment</code> may be a R<sup>5</sup>RS environment-specifier
(<code>interaction-environment</code>, <code>scheme-report-environment</code> or
<code>null-environment</code>) or a <strong><em>STklos</em></strong> module.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nb">eval</span> <span class="o">'</span><span class="p">(</span><span class="nb">*</span> <span class="mi">7</span> <span class="mi">3</span><span class="p">)</span> <span class="p">(</span><span class="nb">scheme-report-environment</span> <span class="mi">5</span><span class="p">))</span>
              <span class="nv">=&gt;</span> <span class="mi">21</span>
<span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">f</span> <span class="p">(</span><span class="nb">eval</span> <span class="o">'</span><span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">f</span> <span class="nv">x</span><span class="p">)</span> <span class="p">(</span><span class="nf">f</span> <span class="nv">x</span> <span class="nv">x</span><span class="p">))</span>
               <span class="p">(</span><span class="nb">null-environment</span> <span class="mi">5</span><span class="p">))))</span>
  <span class="p">(</span><span class="nf">f</span> <span class="nv">+</span> <span class="mi">10</span><span class="p">))</span>
              <span class="nv">=&gt;</span> <span class="mi">20</span>
<span class="p">(</span><span class="nf">define-module</span> <span class="nv">A</span>
  <span class="p">(</span><span class="k">define</span> <span class="nv">x</span> <span class="mi">1</span><span class="p">))</span>
<span class="p">(</span><span class="nb">eval</span> <span class="o">'</span><span class="p">(</span><span class="nb">cons</span> <span class="nv">x</span> <span class="nv">x</span><span class="p">)</span> <span class="p">(</span><span class="nf">find-module</span> <span class="ss">'A</span><span class="p">))</span>
              <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">1</span> <span class="o">.</span> <span class="mi">1</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(scheme-report-environment)</code></strong><br>
<strong><code>(scheme-report-environment version)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns a specifier for an environment that contains the bindings defined
in the R<sup>5</sup>RS report.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In STklos, <code>scheme-report-environment</code> function can be called
without the version number (defaults to 5).
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(null-environment)</code></strong><br>
<strong><code>(null-environment version)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns a specifier for an environment that is empty except for
the (syntactic) bindings for all syntactic keywords defined in
the R<sup>5</sup>RS report.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In STklos, <code>null-environment</code> function can be called
without the version number (defaults to 5).
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(interaction-environment)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>This procedure returns the environment in the expression are
evaluated by default (the <strong><em>STklos</em></strong> module).</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(eval-from-string str)</code></strong><br>
<strong><code>(eval-from-string str module)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Read an expression from <code>str</code> and evaluates it with <code>eval</code>. If a <code>module</code>
is passed, the evaluation takes place in the environment of this module.
Otherwise, the evaluation takes place in the environment returned by
<code>current-module</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">define</span> <span class="nv">x</span> <span class="mi">10</span><span class="p">)</span>
<span class="p">(</span><span class="nf">define-module</span> <span class="nv">M</span>
  <span class="p">(</span><span class="k">define</span> <span class="nv">x</span> <span class="mi">100</span><span class="p">))</span>
<span class="p">(</span><span class="nf">eval-from-string</span> <span class="s">"(+ x x)"</span><span class="p">)</span>                   <span class="nv">=&gt;</span> <span class="mi">20</span>
<span class="p">(</span><span class="nf">eval-from-string</span> <span class="s">"(+ x x)"</span> <span class="p">(</span><span class="nf">find-module</span> <span class="ss">'M</span><span class="p">))</span>  <span class="nv">=&gt;</span> <span class="mi">200</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_input_and_output">4.12. Input and Output</h3>
<div class="paragraph">
<p>



R<sup>5</sup>RS states that ports represent input and output
devices.  However, it defines only ports which are attached to
files.  In <strong><em>STklos</em></strong>, ports can also be attached to strings, to a
external command input or output, or even be virtual (i.e. the
behavior of the port is given by the user).</p>
</div>
<div class="ulist">
<ul>
<li>
<p>String ports are similar to file ports, except that characters are read from
(or written to) a string rather than a file.</p>
</li>
<li>
<p>External command input or output ports are implemented with Unix pipes and
are called <strong><em>pipe ports</em></strong>. A pipe port is created by specifying the command to
execute prefixed with the string <code>"| "</code> (that is a pipe bar followed by a
space).  Specification of a pipe port can occur everywhere a file name is
needed.</p>
</li>
<li>
<p>Virtual ports are created by supplying basic I/O functions at port creation
time. These functions will be used to simulate low level accesses to a
``virtual device''. This kind of port is particularly convenient for reading
or writing in a graphical window as if it was a file. Once a virtual port is
created, it can be accessed as a normal port with the standard Scheme
primitives.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_ports">4.12.1. Ports</h4>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(call-with-port port proc)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>The <code>call-with-port</code> procedure calls <code>proc</code> with <code>port</code> as an
argument. If <code>proc</code> returns, then the <code>port</code> is closed automatically
and the values yielded by the <code>proc</code> are returned.
If <code>proc</code> does not return, then the <code>port</code> must not be closed
automatically unless it is possible to prove that the port
will never again be used for a read or write operation.</p>
</div>
<div class="paragraph">
<p>It is an error if proc does not accept one argument.</p>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(call-with-input-file string proc)</code></strong><br>
<strong><code>(call-with-output-file string proc)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>String</code> should be a string naming a file, and <code>proc</code> should be a procedure
that accepts one argument. For <code>call-with-input-file</code>, the file should
already exist. These procedures call <code>proc</code> with one argument: the port
obtained by opening the named file for input or output. If the file cannot
be opened, an error is signaled. If <code>proc</code> returns, then the port is closed
automatically and the value(s) yielded by the proc is(are) returned.
If proc does not return, then the port will not be closed automatically.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Because Scheme&#8217;s escape procedures have unlimited extent,
it is possible to escape from the current continuation but later to escape
back in. If implementations were permitted to close the port on any escape
from the current continuation, then it would be impossible to write portable
code using both <code>call-with-current-continuation</code> and <code>call-with-input-file</code>
or <code>call-with-output-file</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(call-with-input-string string proc)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>behaves as <code>call-with-input-file</code> except that the port passed to <code>proc</code>
is the sting port obtained from <code>port</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">call-with-input-string</span> <span class="s">"123 456"</span>
  <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">x</span><span class="p">)</span>
     <span class="p">(</span><span class="k">let*</span> <span class="p">((</span><span class="nf">n1</span> <span class="p">(</span><span class="nb">read</span> <span class="nv">x</span><span class="p">))</span>
            <span class="p">(</span><span class="nf">n2</span> <span class="p">(</span><span class="nb">read</span> <span class="nv">x</span><span class="p">)))</span>
        <span class="p">(</span><span class="nb">cons</span> <span class="nv">n1</span> <span class="nv">n2</span><span class="p">))))</span>          <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">123</span> <span class="o">.</span> <span class="mi">456</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(call-with-output-string proc)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>Proc</code> should be a procedure of one argument. <code>Call-with-output-string</code>
calls <code>proc</code> with a freshly opened output string port. The result of
this procedure is a string containing all the text that has been written
on the string port.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">call-with-output-string</span>
  <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">x</span><span class="p">)</span> <span class="p">(</span><span class="nb">write</span> <span class="mi">123</span> <span class="nv">x</span><span class="p">)</span> <span class="p">(</span><span class="nb">display</span> <span class="s">"Hello"</span> <span class="nv">x</span><span class="p">)))</span> <span class="nv">=&gt;</span> <span class="s">"123Hello"</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(input-port? obj)</code></strong><br>
<strong><code>(output-port? obj)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns <code>#t</code> if <code>obj</code> is an input port or output port respectively,
otherwise returns <code>#f</code>.</p>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(textual-port? obj)</code></strong><br>
<strong><code>(binary-port? obj)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns <code>#t</code> if <code>obj</code> is an textual port or binary port respectively,
otherwise returns <code>#f</code>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(port? obj)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns <code>#t</code> if <code>obj</code> is an input port or an output port,
otherwise returns <code>#f</code>.</p>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(input-string-port? obj)</code></strong><br>
<strong><code>(output-string-port? obj)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns <code>#t</code> if <code>obj</code> is an input string port or output string port
respectively, otherwise returns <code>#f</code>.</p>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(input-bytevector-port? obj)</code></strong><br>
<strong><code>(output-bytevector-port? obj)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns <code>#t</code> if <code>obj</code> is an input bytevector port or output bytevector port
respectively, otherwise returns <code>#f</code>.</p>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(input-file-port? obj)</code></strong><br>
<strong><code>(output-file-port? obj)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns <code>#t</code> if <code>obj</code> is a file input port or a file output port respectively,
otherwise returns <code>#f</code>.</p>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(input-virtual-port? obj)</code></strong><br>
<strong><code>(output-virtual-port? obj)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns <code>#t</code> if <code>obj</code> is a virtual input port or a virtual output port
respectively, otherwise returns <code>#f</code>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(interactive-port? port)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns <code>#t</code> if <code>port</code> is connected to a terminal and <code>#f</code> otherwise.</p>
</div>
<div id="curroport" class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(current-input-port obj)</code></strong><br>
<strong><code>(current-output-port obj)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the current default input or output port.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(current-error-port obj)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the current default error port.</p>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(with-input-from-file string thunk)</code></strong><br>
<strong><code>(with-output-to-file string thunk)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>String</code> should be a string naming a file, and <code>proc</code> should be a
procedure of no arguments. For <code>with-input-from-file</code>, the file should
already exist. The file is opened for input or output, an input or output
port connected to it is made the default value returned by
<code>current-input-port</code> or <code>current-output-port</code> (and is used by <code>(read)</code>,
<code>(write obj)</code>, and so forth), and the thunk is called with no arguments.
When the thunk returns, the port is closed and the previous default is
restored. <code>With-input-from-file</code> and <code>with-output-to-file</code> return(s)
the value(s) yielded by thunk.</p>
</div>
<div class="paragraph">
<p>The following example uses a pipe port opened for reading. It permits to
read all the lines produced by an external ,(emph "ls") command (i.e. the
output of the ,(emph "ls") command is ,(emph "redirected") to the Scheme pipe
port).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nb">with-input-from-file</span> <span class="s">"| ls -ls"</span>
  <span class="p">(</span><span class="k">lambda</span> <span class="p">()</span>
    <span class="p">(</span><span class="k">do</span> <span class="p">((</span><span class="nf">l</span> <span class="p">(</span><span class="nf">read-line</span><span class="p">)</span> <span class="p">(</span><span class="nf">read-line</span><span class="p">)))</span>
        <span class="p">((</span><span class="nb">eof-object?</span> <span class="nv">l</span><span class="p">))</span>
      <span class="p">(</span><span class="nb">display</span> <span class="nv">l</span><span class="p">)</span>
      <span class="p">(</span><span class="nb">newline</span><span class="p">))))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Hereafter is another example of Unix command redirection. This time,
it is the standard input of the Unix command which is redirected.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nb">with-output-to-file</span> <span class="s">"| mail root"</span>
  <span class="p">(</span><span class="k">lambda</span> <span class="p">()</span>
    <span class="p">(</span><span class="nb">display</span> <span class="s">"A simple mail from Scheme"</span><span class="p">)</span>
    <span class="p">(</span><span class="nb">newline</span><span class="p">)))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(with-error-to-file string thunk)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>This procedure is similar to with-output-to-file, excepted that it uses the
current error port instead of the output port.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(with-input-from-string string thunk)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>A string port is opened for input from <code>string</code>. <code>Current-input-port</code>
is set to the port and <code>thunk</code> is called. When <code>thunk</code> returns,
the previous default input port is restored. <code>With-input-from-string</code>
returns the value(s) computed by <code>thunk</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">with-input-from-string</span> <span class="s">"123 456"</span>
  <span class="p">(</span><span class="k">lambda</span> <span class="p">()</span> <span class="p">(</span><span class="nb">read</span><span class="p">)))</span>                       <span class="nv">=&gt;</span>  <span class="mi">123</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(with-output-to-string thunk)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>A string port is opened for output. <code>Current-output-port</code>
is set to it and <code>thunk</code> is called. When <code>thunk</code> returns,
the previous default output port is restored. <code>With-output-to-string</code>
returns the string containing the text written on the string port.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">with-output-to-string</span>
   <span class="p">(</span><span class="k">lambda</span> <span class="p">()</span> <span class="p">(</span><span class="nb">write</span> <span class="mi">123</span><span class="p">)</span> <span class="p">(</span><span class="nb">write</span> <span class="s">"Hello"</span><span class="p">)))</span> <span class="nv">=&gt;</span> <span class="s">"123\\"</span><span class="nv">Hello</span><span class="err">\\</span><span class="s">""</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>

</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(with-input-from-port port thunk)</code></strong><br>
<strong><code>(with-output-to-port port thunk)</code></strong><br>
<strong><code>(with-error-to-port port thunk)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>Port</code> should be a port, and <code>proc</code> should be a
procedure of no arguments. These procedures do a job similar to the
<code>with-&#8230;&#8203;-file</code> counterparts  excepted that they use an open port instead
of string specifying a file name</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(open-input-file filename)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Takes a string naming an existing file and returns an input port capable
of delivering characters from the file. If the file cannot be opened,
an error is signalled.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
if <code>filename</code> starts with the string <code>"| "</code>, this procedure returns a pipe port.
Consequently, it is not possible to open a file whose name starts with those two
characters.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(open-input-string str)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns an input string port capable of delivering characters from
<code>str</code>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(open-input-string bytevector)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Takes a bytevector and returns a binary input port that
delivers bytes from the <code>bytevector</code>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(open-input-virtual :key  (read-char #f) (ready? #f) (eof? #f) (close #f))</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns a virtual port using the <code>read-char</code> procedure to read a
character from the port, <code>ready?</code> to know if there is any data to
read from the port, <code>eof?</code> to know if the end of file is reached
on the port and finally <code>close</code> to close the port. All theses
procedure takes one parameter which is the port from which the input
takes place.  <code>Open-input-virtual</code> accepts also the special value
<code>#f</code> for the I/O procedures with the following conventions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>if <code>read-char</code> or <code>eof?</code> is <code>#f</code>, any attempt to read
the virtual port will return an eof object;</p>
</li>
<li>
<p>if <code>ready?</code> is <code>#f</code>, the file is always  ready for reading;</p>
</li>
<li>
<p>if <code>close</code> is <code>#f</code>, no action is done when the port is closed.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Hereafter is a possible implementation of <code>open-input-string</code>
using virtual ports:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="nf">open-input-string</span> <span class="nv">str</span><span class="p">)</span>
  <span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">index</span> <span class="mi">0</span><span class="p">))</span>
    <span class="p">(</span><span class="nf">open-input-virtual</span>
       <span class="nv">:read-char</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">p</span><span class="p">)</span>
                    <span class="c1">;; test on eof is already done by the system</span>
                    <span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">res</span> <span class="p">(</span><span class="nb">string-ref</span> <span class="nv">str</span> <span class="nv">index</span><span class="p">)))</span>
                      <span class="p">(</span><span class="k">set!</span> <span class="nv">index</span> <span class="p">(</span><span class="nb">+</span> <span class="nv">index</span> <span class="mi">1</span><span class="p">))</span>
                      <span class="nv">res</span><span class="p">))</span>
       <span class="nv">:eof?</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">p</span><span class="p">)</span> <span class="p">(</span><span class="nb">&gt;=</span> <span class="nv">index</span> <span class="p">(</span><span class="nb">string-length</span> <span class="nv">str</span><span class="p">))))))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(open-output-file filename)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Takes a string naming an output file to be created and returns an output
port capable of writing characters to a new file by that name. If the file
cannot be opened, an error is signalled. If a file with the given name
already exists, it is rewritten.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
if <code>filename</code> starts with the string <code>"| "</code>, this procedure returns a pipe port.
Consequently, it is not possible to open a file whose name starts with those two
characters.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(open-output-string)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns an output string port capable of receiving and collecting characters.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(open-output-bytevector)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns a binary output port that will accumulate bytes
for retrieval by <code>get-output-bytevector</code>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(open-output-virtual :key  (write-char #f) (write-string #f) (flush #f) (close #f))</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns a virtual port using the <code>write-char</code> procedure to write a
character to the port, <code>write-string</code> to write a string to the port,
<code>flush</code> to (eventuelly) flush the characters on the port and finally
<code>close`to close the port. `Write-char</code> takes two parameters: a character and
the port to which the output must be done. <code>write-string</code> takes two
parameters: a string and a port. <code>Flush</code> and <code>Close</code> take one
parameter which is the port on which the action must be done.
<code>Open-output-virtual</code> accepts also the special value <code>#f</code>
for the I/O procedures. If a procedure is <code>#f</code> nothing is done
on the corresponding action.</p>
</div>
<div class="paragraph">
<p>Hereafter is an (very inefficient) implementation of a variant of
<code>open-output-string</code> using virtual ports. The value of the output
string is printed when the port is closed:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="nf">open-output-string</span><span class="p">)</span>
  <span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">str</span> <span class="s">""</span><span class="p">))</span>
    <span class="p">(</span><span class="nf">open-output-virtual</span>
       <span class="nv">:write-char</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">c</span> <span class="nv">p</span><span class="p">)</span>
                     <span class="p">(</span><span class="k">set!</span> <span class="nv">str</span> <span class="p">(</span><span class="nb">string-append</span> <span class="nv">str</span> <span class="p">(</span><span class="nb">string</span> <span class="nv">c</span><span class="p">))))</span>
       <span class="nv">:write-string</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">s</span> <span class="nv">p</span><span class="p">)</span>
                       <span class="p">(</span><span class="k">set!</span> <span class="nv">str</span> <span class="p">(</span><span class="nb">string-append</span> <span class="nv">str</span> <span class="nv">s</span><span class="p">)))</span>
       <span class="nv">:close</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">p</span><span class="p">)</span> <span class="p">(</span><span class="nb">write</span> <span class="nv">str</span><span class="p">)</span> <span class="p">(</span><span class="nb">newline</span><span class="p">)))))</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>write-string</code> is mainly used for writing strings and is
generally more efficient than writing the string character by character.
However, if <code>write-string</code> is not provided, strings are printed with
<code>write-char</code>.  On the other hand, if <code>write-char</code> is absent,
characters are written by successive allocation of one character strings.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Hereafter is another example: a virtual file port where all characters
are converted to upper case:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="nf">open-output-uppercase-file</span> <span class="nv">file</span><span class="p">)</span>
  <span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">out</span> <span class="p">(</span><span class="nf">open-file</span> <span class="nv">file</span> <span class="s">"w"</span><span class="p">)))</span>
    <span class="p">(</span><span class="k">and</span> <span class="nv">out</span>
         <span class="p">(</span><span class="nf">open-output-virtual</span>
             <span class="nv">:write-string</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">s</span> <span class="nv">p</span><span class="p">)</span>
                             <span class="p">(</span><span class="nb">display</span> <span class="p">(</span><span class="nf">string-upper</span> <span class="nv">s</span><span class="p">)</span> <span class="nv">out</span><span class="p">))</span>
             <span class="nv">:close</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">p</span><span class="p">)</span>
                      <span class="p">(</span><span class="nf">close-port</span> <span class="nv">out</span><span class="p">))))))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(open-file filename mode)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Opens the file whose name is <code>filename</code> with the specified string
<code>mode</code> which can be:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>"r"</code> to open file for reading. The stream is positioned at
the beginning of the file.</p>
</li>
<li>
<p><code>"r+"</code> to open file for reading and writing.  The stream is
positioned at the beginning of the file.</p>
</li>
<li>
<p><code>"w"</code> to truncate file to zero length or create file for writing.
The stream is positioned at the beginning of the file.</p>
</li>
<li>
<p><code>"w+"</code> to open  file for reading and writing. The file is created
if it does not exist, otherwise it is truncated. The stream is positioned
at the beginning of the file.</p>
</li>
<li>
<p><code>"a"</code> to open for writing.  The file is created if  it  does
not exist. The stream is positioned at the end of the file.</p>
</li>
<li>
<p><code>"a+"</code> to open file for reading and writing. The file is created
if it does not exist. The stream is positioned at the end of the file.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the file can be opened, <code>open-file</code> returns the textual port associated
with the given file, otherwise it returns <code>#f</code>. Here again, the <strong><em>magic</em></strong>
string "| " permits to open a pipe port (in this case mode can only be
<code>"r"</code> or <code>"w"</code>).</p>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(get-output-string port)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns a string containing all the text that has been written on the
output string <code>port</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"> <span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">p</span> <span class="p">(</span><span class="nf">open-output-string</span><span class="p">)))</span>
    <span class="p">(</span><span class="nb">display</span> <span class="s">"Hello, world"</span> <span class="nv">p</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">get-output-string</span> <span class="nv">p</span><span class="p">))</span>         <span class="nv">=&gt;</span> <span class="s">"Hello, world"</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(get-output-bytevector port)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns a bytevector consisting of the bytes that have been
output to the <code>port</code> so far in the order they were output.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"> <span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">p</span> <span class="p">(</span><span class="nf">open-output-bytevector</span><span class="p">)))</span>
    <span class="p">(</span><span class="nf">u8-write</span> <span class="mi">65</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">u8-write</span> <span class="mi">66</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">get-output-bytevector</span> <span class="nv">p</span><span class="p">))</span>         <span class="nv">=&gt;</span> <span class="o">#</span><span class="nv">u8</span><span class="p">(</span><span class="nf">65</span> <span class="mi">66</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(close-input-port port)</code></strong><br>
<strong><code>(close-output-port port)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Closes the port associated with <code>port</code>, rendering the port incapable of
delivering or accepting characters. These routines have no effect if the
port has already been closed. The value returned is <strong><em>void</em></strong>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(close-port port)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Closes the port associated with <code>port</code>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(port-rewind port)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Sets the port position to the beginning of <code>port</code>. The value returned by
<code>port-rewind</code> is <strong><em>void</em></strong>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(port-seek port pos)</code></strong><br>
<strong><code>(port-seek port pos whence)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Sets the file position for the given <code>port</code> to the position <code>pos</code>.
The new position, measured in bytes, is obtained by adding <code>pos</code>
bytes to the position specified by <code>whence</code>. If passed, <code>whence</code>
must be one of <code>:start</code>, <code>:current</code> or <code>:end</code>. The resulting
position is relative to the start of the file, the current position
indicator, or end-of-file, respectively. If <code>whence</code> is omitted, it
defaults to <code>:start</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
After using port-seek, the value returned by
<code>port-current-line</code> may be incorrect.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(port-current-line)</code></strong><br>
<strong><code>(port-current-line port)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the current line number associated to the given input <code>port</code> as an
integer. The <code>port</code> argument may be omitted, in which case it defaults to
the value returned by <code>current-input-port</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <code>port-seek</code>, <code>read-chars</code> and <code>read-chars!</code> procedures
generally break the line-number. After using one of theses procedures, the
value returned by <code>port-current-line</code> will be <code>-1</code> (except a <code>port-seek</code>
at the beginning of the port reinitializes the line counter).
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(port-current-position)</code></strong><br>
<strong><code>(port-current-position port)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the position associated to the given <code>port</code> as an
integer (i.e. number of characters from the beginning of the port).
The <code>port</code> argument may be omitted, in which case it defaults to
the value returned by <code>current-input-port</code>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(port-file-name port)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the file name used to open <code>port</code>; <code>port</code> must be a file port.</p>
</div>
<div class="paragraph">
<p>

</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(port-idle-register! port thunk)</code></strong><br>
<strong><code>(port-idle-unregister! port thunk)</code></strong><br>
<strong><code>(port-idle-reset! port)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>port-idle-register!</code> allows to register <code>thunk</code> as an idle handler
when reading on port. That means that <code>thunk</code> will be called continuously
while waiting  an input on <code>port</code> (and only while using a reading
primitive on this port). <code>port-idle-unregister!</code> can be used to
unregister a handler previously set by <code>port-idle-register!</code>. The
primitive <code>port-idle-reset!</code> unregisters all the handlers set on
<code>port</code>.</p>
</div>
<div class="paragraph">
<p>Hereafter is a (not too realistic) example: a message will be displayed
repeatedly until a <strong><em>sexpr</em></strong> is read on the current input port.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">idle</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">()</span> <span class="p">(</span><span class="nb">display</span> <span class="s">"Nothing to read!\\n"</span><span class="p">))))</span>
  <span class="p">(</span><span class="nf">port-idle-register!</span> <span class="p">(</span><span class="nb">current-input-port</span><span class="p">)</span> <span class="nv">idle</span><span class="p">)</span>
  <span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">result</span> <span class="p">(</span><span class="nb">read</span><span class="p">)))</span>
    <span class="p">(</span><span class="nf">port-idle-unregister!</span> <span class="p">(</span><span class="nb">current-input-port</span><span class="p">)</span> <span class="nv">idle</span><span class="p">)</span>
    <span class="nv">result</span><span class="p">))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(port-closed? port)</code></strong><br>
<strong><code>(port-open?  port)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>port-closed?</code> returns <code>#t</code> if <code>port</code> is closed and <code>#f</code> otherwise.
On the contrary, <code>port-open?</code> returns <code>#t</code> if <code>port</code> is open and
<code>#f</code> otherwise.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>port-closed?</code> was the usual STklos function to
test if a port is closed. <code>port-open?</code> has been added to be the companion
of the R<sup>7</sup>RS functions <code>input-port-open?</code> and <code>output-port-open?</code>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(port-close-hook-set! port thunk)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Associate the procedure <code>thunk</code> to <code>port</code>. The thunk will be called
the first time <code>port</code> is closed.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">let*</span> <span class="p">((</span><span class="nf">tmp</span> <span class="p">(</span><span class="nf">temporary-file-name</span><span class="p">))</span>
       <span class="p">(</span><span class="nf">p</span>   <span class="p">(</span><span class="nb">open-output-file</span> <span class="nv">tmp</span><span class="p">))</span>
       <span class="p">(</span><span class="nf">foo</span> <span class="no">#t</span><span class="p">))</span>
  <span class="p">(</span><span class="nf">port-close-hook-set!</span> <span class="nv">p</span>
                     <span class="p">(</span><span class="k">lambda</span><span class="p">()</span>
                       <span class="p">(</span><span class="nf">remove-file</span> <span class="nv">tmp</span><span class="p">)</span>
                       <span class="p">(</span><span class="k">set!</span> <span class="nv">foo</span> <span class="no">#t</span><span class="p">)))</span>
  <span class="p">(</span><span class="nf">close-port</span> <span class="nv">p</span><span class="p">)</span>
  <span class="nv">foo</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(port-close-hook port)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the user close procedure associated to the given <code>port</code>.</p>
</div>
<div class="literalblock">
<div class="content">
<pre> The following procedures are defined in *link:http://srfi.schemers.org/srfi-192/srfi-192.html[SRFI-192]* (_Port Positioning_)(((SRFI-192))) which is fully
  supported:((("SRFI-192")))
(((port-has-port-position?)))</pre>
</div>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(port-has-port-position? port)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>The port-has-port-position? procedure returns #t if the port
supports the port-position operation, and #f otherwise. If the port
does not support the operation, port-position signals an error.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(port-position port)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>The port-position procedure returns an object representing the
information state  about the port current position as is
necessary to save and restore that position. This value can be useful
only as the pos argument to set-port-position!, if the latter is even
supported on the port. However, if the port is binary and the object
is an exact integer, then it is the position measured in bytes, and
can be used to compute a new position some specified number of bytes
away.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(port-has-set-port-position!? port)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>The port-has-set-port-position!? procedure returns #t if the port supports
the set-port-position! operation, and #f otherwise.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(set-port-position! port pos)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>For a textual port, it is implementation-defined what happens if pos is not
the return value of a call to port-position on port. However, a binary port
will also accept an exact integer, in which case the port position is set to
the specified number of bytes from the beginning of the port data. If this
is not sufficient information to specify the port state, or the specified
position is uninterpretable by the port, an error satisfying
i/o-invalid-position-error? is signaled.</p>
</div>
<div class="paragraph">
<p>If <code>set-port-position!</code> procedure is invoked on a port that does not support
the operation or if pos is not in the range of valid positions of port,
<code>set-port-position!</code> signals an error. Otherwise, it sets the current position
of the port to pos. If port is an output port, <code>set-port-position!</code> first flushes
port (even if the port position will not change).</p>
</div>
<div class="paragraph">
<p>If port is a binary output port and the current position is set beyond the
current end of the data in the underlying data sink, the object is not extended
until new data is written at that position. The contents of any intervening
positions are unspecified. It is also possible to set the position of a binary
input port beyond the end of the data in the data source, but a read will fail
unless the data has been extended by other means. File ports can always be
extended in this manner within the limits of the underlying operating system.
In other types of ports, if an attempt is made to set the position beyond the
current end of data in the underlying object, and the object does not support
extension, an error satisfying <code>i/o-invalid-position-error?</code> is signaled.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(make-i/o-invalid-position-error pos)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns a condition object which satisfies i/o-invalid-position-error?.
The pos argument represents a position passed to set-position!.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(i/o-invalid-position-error? obj)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns <code>#t</code> if <code>obj</code> is an object created by
<code>make-i/o-invalid-position-error?</code> or an object raised in the circumstances
described in <strong><a href="http://srfi.schemers.org/srfi-192/srfi-192.html">SRFI-192</a></strong> (attempt to access an invalid position in the
stream), or <code>#f</code> if it is not.</p>
</div>
</div>
<div class="sect3">
<h4 id="_input">4.12.2. Input</h4>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(read)</code></strong><br>
<strong><code>(read port)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>Read</code> converts external representations of Scheme objects into the
objects themselves. <code>Read</code> returns the next object parsable from the given
input port, updating port to point to the first character past the end of
the external representation of the object.</p>
</div>
<div class="paragraph">
<p>If an end of file is encountered in the input before any characters are found
that can begin an object, then an end of file object is returned. The port
remains open, and further attempts to read will also return an end of file
object. If an end of file is encountered after the beginning of an object&#8217;s
external representation, but the external representation is incomplete
and therefore not parsable, an error is signalled.</p>
</div>
<div class="paragraph">
<p>The port argument may be omitted, in which case it defaults to the value
returned by <code>current-input-port</code>. It is an error to read from a closed port.</p>
</div>
<div class="paragraph">
<p><strong><em>STklos</em></strong> <code>read</code> supports the <strong><a href="http://srfi.schemers.org/srfi-10/srfi-10.html">SRFI-10</a></strong> <code>#,()</code> form that can be used
to denote values that do not have a convenient printed representation. See
the SRFI document for more information.</p>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(read-with-shared-structure)</code></strong><br>
<strong><code>(read-with-shared-structure  port)</code></strong><br>
<strong><code>(read/ss)</code></strong><br>
<strong><code>(read/ss port)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>read-with-shared-structure</code> is identical to <code>read</code>. It has been added to
be compatible with ,(link-srfi 38). STklos always knew how to deal with
recursive input data. <code>read/ss</code> is only a shorter name for
<code>read-with-shared-structure</code>.</p>
</div>
<div id="readerctor" class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(define-reader-ctor tag proc)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>This procedure permits to define a new user to reader constructor procedure
at run-time. It is defined in ,(link-srfi 10) document. See  SRFI document
for more information.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">define-reader-ctor</span> <span class="ss">'rev</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">x</span> <span class="nv">y</span><span class="p">)</span> <span class="p">(</span><span class="nb">cons</span> <span class="nv">y</span> <span class="nv">x</span><span class="p">)))</span>
<span class="p">(</span><span class="nf">with-input-from-string</span> <span class="s">"#,(rev 1 2)"</span> <span class="nv">read</span><span class="p">)</span>
                             <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">2</span> <span class="o">.</span> <span class="mi">1</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(read-char)</code></strong><br>
<strong><code>(read-char port)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the next character available from the input <code>port</code>, updating the <code>port</code>
to point to the following character. If no more characters are available,
an end of file object is returned. <code>Port</code> may be omitted, in which case
it defaults to the value returned by <code>current-input-port</code>.</p>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(read-bytes size)</code></strong><br>
<strong><code>(read-bytes size port)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns a newly allocated string made of <code>size</code> characters read from <code>port</code>.
If less than <code>size</code> characters are available on the input port, the returned
string is smaller than <code>size</code> and its size is the number of available
characters. <code>Port</code> may be omitted, in which case it defaults to the
value returned by <code>current-input-port</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This function was previously called <code>read-chars</code>. Usage
of the old name is deprecated.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(read-bytevector k)</code></strong><br>
<strong><code>(read-bytevector k port)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Reads the next <code>k</code> bytes, or as many as are available
before the end of file, from the textual input <code>port</code> into a
newly allocated string in left-to-right order and returns the
string. If no characters are available before the end of file,
an end-of-file object is returned.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(read-bytevector! k)</code></strong><br>
<strong><code>(read-bytevector! k port)</code></strong><br>
<strong><code>(read-bytevector! k port start)</code></strong><br>
<strong><code>(read-bytevector! k port start end)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Reads the next <code>end - start</code> bytes, or as many as are available
before the end of file, from the binary input port
into <code>bytevector</code> in left-to-right order beginning at the start
position. If <code>end</code> is not supplied, reads until the end of
<code>bytevector</code> has been reached. If <code>start</code> is not supplied, reads
beginning at position 0. Returns the number of bytes read.
If no bytes are available, an end-of-file object is returned.</p>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(read-bytes! str)</code></strong><br>
<strong><code>(read-bytes! str port)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>This function reads the characters available from <code>port</code> in the string <code>str</code>
by chuncks whose size is equal to the length of <code>str</code>.
The value returned by <code>read-bytes!</code> is an integer indicating the number
of characters read. <code>Port</code> may be omitted, in which case it defaults to the
value returned by <code>current-input-port</code>.</p>
</div>
<div class="paragraph">
<p>This function is similar to <code>read-bytes</code> except that it avoids to allocate
a new string for each read.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="nf">copy-file</span> <span class="nv">from</span> <span class="nv">to</span><span class="p">)</span>
  <span class="p">(</span><span class="k">let*</span> <span class="p">((</span><span class="nf">size</span> <span class="mi">1024</span><span class="p">)</span>
         <span class="p">(</span><span class="nf">in</span>  <span class="p">(</span><span class="nb">open-input-file</span> <span class="nv">from</span><span class="p">))</span>
         <span class="p">(</span><span class="nf">out</span> <span class="p">(</span><span class="nb">open-output-file</span> <span class="nv">to</span><span class="p">))</span>
         <span class="p">(</span><span class="nf">s</span>   <span class="p">(</span><span class="nb">make-string</span> <span class="nv">size</span><span class="p">)))</span>
    <span class="p">(</span><span class="k">let</span> <span class="nv">Loop</span> <span class="p">()</span>
      <span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">n</span> <span class="p">(</span><span class="nf">read-bytes!</span> <span class="nv">s</span> <span class="nv">in</span><span class="p">)))</span>
        <span class="p">(</span><span class="k">cond</span>
          <span class="p">((</span><span class="nb">=</span> <span class="nv">n</span> <span class="nv">size</span><span class="p">)</span>
             <span class="p">(</span><span class="nf">write-chars</span> <span class="nv">s</span> <span class="nv">out</span><span class="p">)</span>
             <span class="p">(</span><span class="nf">Loop</span><span class="p">))</span>
          <span class="p">(</span><span class="k">else</span>
             <span class="p">(</span><span class="nf">write-chars</span> <span class="p">(</span><span class="nb">substring</span> <span class="nv">s</span> <span class="mi">0</span> <span class="nv">n</span><span class="p">)</span> <span class="nv">out</span><span class="p">)</span>
             <span class="p">(</span><span class="nf">close-port</span> <span class="nv">out</span><span class="p">)))))))</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This function was previously called <code>read-chars!</code>. Usage
of the old name is deprecated.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(read-byte)</code></strong><br>
<strong><code>(read-byte port)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the next character available from the input <code>port</code> as an integer.
If the end of file is reached, this function returns the end of file
object.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(peek-char)</code></strong><br>
<strong><code>(peek-char port)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the next character available from the input <code>port</code>, without updating
the port to point to the following character. If no more characters are
available, an end of file object is returned. <code>Port</code> may be omitted, in
which case it defaults to the value returned by <code>current-input-port</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The value returned by a call to <code>peek-char</code> is the same as the
value that would have been returned by a call to <code>read-char</code> with the same
port. The only difference is that the very next call to <code>read-char</code> or
<code>peek-char</code> on that port will return the value returned by the preceding
call to <code>peek-char</code>. In particular, a call to <code>peek-char</code> on an interactive
port will hang waiting for input whenever a call to <code>read-char</code> would have
hung.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(peek-byte)</code></strong><br>
<strong><code>(peek-byte port)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the next character available from the input <code>port</code>, without updating
the port to point to the following character. Whereas <code>peek-char</code>
returns a character, this function returns an integer between 0and 255.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(eof-object? obj)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns <code>#t</code> if <code>obj</code> is an end of file object, otherwise returns <code>#f</code>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(eof-object)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>
end of file
Returns an end of file object. Note that the special notation <code>#eof</code> is
another way to return such an end of file object.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(char-ready?)</code></strong><br>
<strong><code>(char-ready? port)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns <code>#t</code> if a character is ready on the input port and returns <code>#f</code>
otherwise. If char-ready returns <code>#t</code> then the next read-char operation on
the given port is guaranteed not to hang. If the port is at end of file
then <code>char-ready?</code> returns <code>#t</code>. Port may be omitted, in which case it
defaults to the value returned by <code>current-input-port</code>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(read-string k)</code></strong><br>
<strong><code>(read-string k port)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Reads the next <code>k</code> characters, or as many as are available
before the end of file, from the textual input <code>port</code> into a
newly allocated string in left-to-right order and returns the
string. If no characters are available before the end of file,
an end-of-file object is returned.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(read-u8)</code></strong><br>
<strong><code>(read-u8 port)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the next byte available from the binary input <code>port</code>,
updating the <code>port</code> to point to the following byte. If no more
bytes are available, an end-of-file object is returned.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This function is similar to the <code>read-byte</code>
function, excepted that it can be used only on  a binary port.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(peek-u8)</code></strong><br>
<strong><code>(peek-u8 port)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the next byte available from the binary input <code>port</code>,
but without updating the <code>port</code> to point to the following
byte. If no more bytes are available, an end-of-file object
is returned.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This function is similar to the <code>peek-byte</code>
function, excepted that it can be used only on  a binary port.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(u8-ready?)</code></strong><br>
<strong><code>(u8-ready? port)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns <code>#t</code> if a byte is ready on the binary input <code>port</code> and
returns <code>#f</code> otherwise. If <code>u8-ready?</code> returns <code>#t</code> then the
next read-u8 operation on the given port is guaranteed
not to hang. If the <code>port</code> is at end of file then <code>u8-ready?</code>
returns <code>#t</code>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(read-line)</code></strong><br>
<strong><code>(read-line port)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Reads the next line available from the input port <code>port</code>. This function
returns 2 values: the first one is is the string which contains the line
read, and the second one is the end of line delimiter. The end of line
delimiter can be an end of file object, a character or a string in case
of a multiple character delimiter. If no more characters are available
on <code>port</code>, an end of file object is returned.  <code>Port</code> may be omitted,
in which case it defaults to the value returned by <code>current-input-port</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
As said in <em><a href="_standard_procedures.html#values">primitive <code>values</code></a></em>, if <code>read-line</code> is not
used in  the context of <code>call-with-values</code>, the second value returned by
this procedure is ignored.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(read-from-string str)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Performs a read from the given <code>str</code>. If <code>str</code> is the empty string,
an end of file object is returned.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">read-from-string</span> <span class="s">"123 456"</span><span class="p">)</span> <span class="nv">=&gt;</span> <span class="mi">123</span>
<span class="p">(</span><span class="nf">read-from-string</span> <span class="s">""</span><span class="p">)</span>        <span class="nv">=&gt;</span> <span class="nv">an</span> <span class="nv">eof</span> <span class="nv">object</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>

</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(port&#8594;string port)</code></strong><br>
<strong><code>(port&#8594;sexp-list port)</code></strong><br>
<strong><code>(port&#8594;string-list port)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>All these procedures take a port opened for reading. <code>Port&#8594;string</code> reads
<code>port</code> until the it reads an end of file object and returns all the
characters read as a string. <code>Port&#8594;sexp-list</code> and <code>port&#8594;string-list</code>
do the same things except that they return a list of S-expressions and
a list of strings respectively. For the following example we suppose that
file <code>"foo"</code> is formed of two lines which contains respectively the number
<code>100</code> and the string <code>"bar"</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">port-&gt;sexp-list</span> <span class="p">(</span><span class="nb">open-input-file</span> <span class="s">"foo"</span><span class="p">))</span>   <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">100</span> <span class="s">"bar"</span><span class="p">)</span>
<span class="p">(</span><span class="nf">port-&gt;string-list</span> <span class="p">(</span><span class="nb">open-input-file</span> <span class="s">"foo"</span><span class="p">))</span> <span class="nv">=&gt;</span> <span class="p">(</span><span class="s">"100"</span> <span class="s">"\"bar\""</span><span class="p">)</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_output">4.12.3. Output</h4>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(write obj)</code></strong><br>
<strong><code>(write obj port)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Writes a written representation of <code>obj</code> to the given <code>port</code>. Strings that
appear in the written representation are enclosed in doublequotes, and
within those strings backslash and doublequote characters are escaped
by backslashes. Character objects are written using the ,(emph "#\\") notation.
<code>Write</code> returns an unspecified value. The <code>port</code> argument may be omitted, in
which case it defaults to the value returned by <code>current-output-port</code>.</p>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(write-shared obj)</code></strong><br>
<strong><code>(write-shared obj port)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Writes a written representation of <code>obj</code> to the given port.  The
main difference with the <code>write</code> procedure is that <code>write*</code>
handles data structures with cycles. Circular structure written by
this procedure use the <code>"&#35;n="</code>)) and  <code>"&#35;n&#35;"</code>))
notations (see <a href="_introduction.html#_other_notations">Section 1.2.4</a>).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This function is also called <code>write*</code>.
The name <code>write*</code> was the name used by <strong><em>STklos</em></strong> for
<code>write-shared</code> before it was introduced in R<sup>7</sup>RS.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(write-with-shared-structure obj)</code></strong><br>
<strong><code>(write-with-shared-structure obj port)</code></strong><br>
<strong><code>(write-with-shared-structure obj port optarg)</code></strong><br>
<strong><code>(write/ss obj)</code></strong><br>
<strong><code>(write/ss obj port)</code></strong><br>
<strong><code>(write/ss obj port optarg)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>write-with-shared-structure</code> has been added to be compatible with
<strong><a href="http://srfi.schemers.org/srfi-38/srfi-38.html">SRFI-38</a></strong> (<em>External representation of shared structures</em>). It is is identical to <code>write*</code>, except that it accepts one
more parameter (<code>optarg</code>). This parameter, which is not specified
in <strong><a href="http://srfi.schemers.org/srfi-38/srfi-38.html">SRFI-38</a></strong>, is always ignored. <code>write/ss</code> is only a shorter name for
<code>write-with-shared-structure</code>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(display obj)</code></strong><br>
<strong><code>(display obj port)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Writes a representation of <code>obj</code> to the given <code>port</code>. Strings that
appear in the written representation are not enclosed in
doublequotes, and no characters are escaped within those
strings. Character objects appear in the representation as if
written by <code>write-char</code> instead of by <code>write</code>. <code>Display</code> returns an
unspecified value. The <code>port</code> argument may be omitted, in which
case it defaults to the value returned by <code>current-output-port</code>.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<code>Write</code> is intended for producing machine-readable
output and <code>display</code> is for producing human-readable output.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
As required by R<sup>7</sup>RS does not loop forever when
<code>obj</code> contains self-references.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(display-shared obj)</code></strong><br>
<strong><code>(display-shared obj port)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>The <code>display-shared</code> procedure is the same as <code>display</code>, except
that shared structure are represented using datum labels.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(display-simple obj)</code></strong><br>
<strong><code>(display-simple obj port)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>The <code>display-simple</code> procedure is the same as <code>display</code>, except
that shared structure is never represented using datum labels.
This can cause <code>display-simple</code> not to terminate if <code>obj</code>
contains circular structure.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(newline)</code></strong><br>
<strong><code>(newline port)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Writes an end of line to <code>port</code>. Exactly how this is done differs from
one operating system to another. Returns an unspecified value. The <code>port</code>
argument may be omitted, in which case it defaults to the value returned
by <code>current-output-port</code>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(write-string string)</code></strong><br>
<strong><code>(write-string string port)</code></strong><br>
<strong><code>(write-string string port start)</code></strong><br>
<strong><code>(write-string string port start end)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Writes the characters of <code>string</code> from <code>start</code> to <code>end</code> in
left-to-right order to the textual output <code>port</code>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(write-u8 byte)</code></strong><br>
<strong><code>(write-u8 byte port)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Writes the <code>byte</code> to the given binary output port.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(write-bytevector bytevector)</code></strong><br>
<strong><code>(write-bytevector bytevector port)</code></strong><br>
<strong><code>(write-bytevector bytevector port start)</code></strong><br>
<strong><code>(write-bytevector bytevector port start end)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Writes the bytes of <code>bytevector</code> from <code>start</code> to <code>end</code> in
left-to-right order to the binary output <code>port</code>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(write-char char)</code></strong><br>
<strong><code>(write-char char port)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Writes the character <code>char</code> (not an external representation of the
character) to the given <code>port</code> and returns an unspecified value.
The <code>port</code> argument may be omitted, in which case it defaults to the
value returned by <code>current-output-port</code>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(write-chars str)</code></strong><br>
<strong><code>(write-chars str port)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Writes the characters of string <code>str</code> to the given <code>port</code> and
returns an unspecified value.  The <code>port</code> argument may be omitted,
in which case it defaults to the value returned by
<code>current-output-port</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This function is generally
faster than <code>display</code> for strings. Furthermore, this primitive does
not use the buffer associated to <code>port</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(write-byte b)</code></strong><br>
<strong><code>(write-byte b port)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Write byte <code>b</code> to the port. <code>b</code> must be an exact integer in range between 0
and 255.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div id="format" class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(format port str obj &#8230;&#8203;)</code></strong><br>
<strong><code>(format str obj)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Writes the <code>obj`s to the given `port</code>, according to the format
string <code>str</code>. <code>Str</code> is written literally, except for the following
sequences:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>~a</code> or <code>~A</code> is replaced by the printed representation of the
next <code>obj</code>.</p>
</li>
<li>
<p><code>~s</code> or <code>~S</code> is replaced by the <em>slashified</em> printed
representation of the next <code>obj</code>.</p>
</li>
<li>
<p><code>~w</code> or <code>~W</code> is replaced by the printed representation
of the next <code>obj</code> (circular structures are correctly handled and
printed using <code>write*</code>).</p>
</li>
<li>
<p><code>~d</code> or <code>~D</code> is replaced by the decimal printed representation
of the next <code>obj</code> (which must be a number).</p>
</li>
<li>
<p><code>~x</code> or <code>~X</code> is replaced by the hexadecimal printed representation
of the next <code>obj</code> (which must be a number).</p>
</li>
<li>
<p><code>~o</code> or <code>~O</code> is replaced by the octal printed representation
of the next <code>obj</code> (which must be a number).</p>
</li>
<li>
<p><code>~b</code> or <code>~B</code> is replaced by the binary printed representation
of the next <code>obj</code> (which must be a number).</p>
</li>
<li>
<p><code>~c</code> or <code>~C</code> is replaced by the printed representation
of the next <code>obj</code> (which must be a character).</p>
</li>
<li>
<p><code>~y</code> or <code>~Y</code> is replaced by the pretty-printed representation
of the next <code>obj</code>. The standard pretty-printer is used here.</p>
</li>
<li>
<p><code>~?</code> is replaced by the result of the recursive call of <code>format</code>
with the two next <code>obj</code>: the first item should be a string, and the
second, a list with the arguments.</p>
</li>
<li>
<p><code>~k</code> or <code>~K</code> is another name for <code>~?</code></p>
</li>
<li>
<p><code>~[w[,d]]f</code> or <code>~[w[,d]]F</code> is replaced by the printed
representation of next <code>obj</code> (which must be a number) with width <code>w</code>
and <code>d</code> digits after the decimal. Eventually, <code>d</code> may be omitted.</p>
</li>
<li>
<p><code>~~</code> is replaced by a single tilde character.</p>
</li>
<li>
<p><code>~%</code> is replaced by a newline</p>
</li>
<li>
<p><code>~t</code> or <code>~T</code> is replaced by a tabulation character.</p>
</li>
<li>
<p><code>~&amp;</code> is replaced by a newline character if it is known that the
previous character was not a newline</p>
</li>
<li>
<p><code>~_</code> is replaced by a space</p>
</li>
<li>
<p><code>~h</code> or <code>~H</code> provides some help</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>Port</code> can be a boolean or a port. If <code>port</code> is <code>#t</code>, output goes to
the current output port; if <code>port</code> is <code>#f</code>, the output is returned as a
string.  Otherwise, the output is printed on the specified port.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme">   <span class="p">(</span><span class="nf">format</span> <span class="no">#f</span> <span class="s">"A test."</span><span class="p">)</span>        <span class="nv">=&gt;</span> <span class="s">"A test."</span>
   <span class="p">(</span><span class="nf">format</span> <span class="no">#f</span> <span class="s">"A ~a."</span> <span class="s">"test"</span><span class="p">)</span>   <span class="nv">=&gt;</span> <span class="s">"A test."</span>
   <span class="p">(</span><span class="nf">format</span> <span class="no">#f</span> <span class="s">"A ~s."</span> <span class="s">"test"</span><span class="p">)</span>   <span class="nv">=&gt;</span> <span class="s">"A \"test\"."</span>
   <span class="p">(</span><span class="nf">format</span> <span class="s">"~8,2F"</span> <span class="mi">1</span><span class="nv">/3</span><span class="p">)</span>         <span class="nv">=&gt;</span> <span class="s">"    0.33"</span>
   <span class="p">(</span><span class="nf">format</span> <span class="s">"~6F"</span> <span class="mi">32</span><span class="p">)</span>            <span class="nv">=&gt;</span> <span class="s">"    32"</span>
   <span class="p">(</span><span class="nf">format</span> <span class="s">"~1,2F"</span> <span class="mi">4321</span><span class="p">)</span>        <span class="nv">=&gt;</span> <span class="s">"4321.00"</span>
   <span class="p">(</span><span class="nf">format</span> <span class="s">"~1,2F"</span> <span class="p">(</span><span class="nb">sqrt</span> <span class="mf">-3.9</span><span class="p">))</span> <span class="nv">=&gt;</span> <span class="s">"0.00+1.97i"</span>
   <span class="p">(</span><span class="nf">format</span> <span class="s">"#d~d #x~x #o~o #b~b~%"</span> <span class="mi">32</span> <span class="mi">32</span> <span class="mi">32</span> <span class="mi">32</span><span class="p">)</span>
                                <span class="nv">=&gt;</span> <span class="s">"#d32 #x20 #o40 #b100000\n"</span>
   <span class="p">(</span><span class="nf">format</span> <span class="no">#f</span> <span class="s">"~&amp;1~&amp;~&amp;2~&amp;~&amp;~&amp;3~%"</span><span class="p">)</span>
                                <span class="nv">=&gt;</span> <span class="s">"\n1\n2\n3\n"</span>
   <span class="p">(</span><span class="nf">format</span> <span class="s">"~a ~? ~a"</span> <span class="ss">'a</span> <span class="s">"~s"</span> <span class="o">'</span><span class="p">(</span><span class="nf">new</span><span class="p">)</span> <span class="ss">'test</span><span class="p">)</span>
                                <span class="nv">=&gt;</span> <span class="s">"a new test"</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The second form of <code>format</code> is compliant with <strong><a href="http://srfi.schemers.org/srfi-28/srfi-28.html">SRFI-28</a></strong> (<em>Basic Format Strings</em>).
That is, when <code>port</code> is omitted, the output is returned as a string as if
<code>port</code> was given the value <code>#f</code>.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Since version 0.58, <code>format</code> is also compliant with <strong><a href="http://srfi.schemers.org/srfi-48/srfi-48.html">SRFI-48</a></strong> (<em>Intermediate Format Strings</em>).
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(flush-output-port)</code></strong><br>
<strong><code>(flush-output-port port)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Flushes the buffer associated with the given output <code>port</code>. The
<code>port</code> argument may be omitted, in which case it defaults to the value
returned by <code>current-output-port</code></p>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(print obj &#8230;&#8203;)</code></strong><br>
<strong><code>(printerr obj &#8230;&#8203;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>These procedures display all their arguments followed by a newline. The
procedure <code>print</code> uses the standard output port, whereas <code>printerr</code> uses the
current error port</p>
</div>
<div class="paragraph">
<p>

</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(printf fmt obj &#8230;&#8203;)</code></strong><br>
<strong><code>(fprintf port fmt obj &#8230;&#8203;)</code></strong><br>
<strong><code>(eprintf fmt obj &#8230;&#8203;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>These procedures are specialized versions of <em><a href="_standard_procedures.html#format"><code>format</code> primitive</a></em>.
In these procedures, <code>fmt</code> is a string using the <code>format</code> conventions.
<code>printf</code> outputs go on the current output port.
<code>fprintf</code> outputs go on the specified <code>port</code>.
<code>eprintf</code> outputs go on the current error port (note that eprintf always
flushes the characters printed).</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_system_interface">4.13. System interface</h3>
<div class="paragraph">
<p>The <strong><em>STklos</em></strong> system interface offers all the functions defined in
R<sup>7</sup>RS. Note, that the base implementation provides also a subset of the
functions defined in <strong><a href="http://srfi.schemers.org/srfi-170/srfi-170.html">SRFI-170</a></strong> (<em>POSIX API</em>). These functions are described here.</p>
</div>
<div class="paragraph">
<p>Note, however that <strong><a href="http://srfi.schemers.org/srfi-170/srfi-170.html">SRFI-170</a></strong> is fully supported and accessing the
other functions it defines can be done by requiring it, as the other SRFIs
that STklos supports.</p>
</div>
<div class="sect3">
<h4 id="_loading_code">4.13.1. Loading code</h4>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(load filename)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>

<code>Filename</code> should be a string naming an existing file containing Scheme
expressions. <code>Load</code> has been extended in STklos to allow loading of
file containing Scheme compiled code as well as object files (<em>aka</em>
shared objects). The loading of object files is not available on
all architectures. The value returned by <code>load</code> is <strong><em>void</em></strong>.</p>
</div>
<div class="paragraph">
<p>If the file whose name is <code>filename</code> cannot be located, <code>load</code> will try
to find it in one of the directories given by <code>"load-path"</code>
with the suffixes given by <code>"load-suffixes"</code>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(try-load filename)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>try-load</code> tries to load the file named <code>filename</code>. As <code>load</code>,
<code>try-load</code> tries to find the file given the current load path
and a set of suffixes if <code>filename</code> cannot be loaded. If <code>try-load</code>
is able to find a readable file, it is loaded, and <code>try-load</code> returns
<code>#t</code>. Otherwise,  <code>try-load</code> retuns <code>#f</code>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(find-path str)</code></strong><br>
<strong><code>(find-path str path)</code></strong><br>
<strong><code>(find-path str path suffixes)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>In its first form, <code>find-path</code> returns the path name of the file
that should be loaded by the procedure  <code>load</code> given the name <code>str</code>.
The string returned depends of the current  load path and of the
currently accepted suffixes.</p>
</div>
<div class="paragraph">
<p>The other forms of <code>find-path</code> are more general and allow to give a path
list (a list of strings representing supposed directories) and a set
of suffixes (given as a list of strings too) to try for finding a file.
If no file is found, <code>find-path</code> returns <code>#f</code>.</p>
</div>
<div class="paragraph">
<p>For instance, on a "classical" Unix box:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">find-path</span> <span class="s">"passwd"</span> <span class="o">'</span><span class="p">(</span><span class="s">"/bin"</span> <span class="s">"/etc"</span> <span class="s">"/tmp"</span><span class="p">))</span>
            <span class="nv">=&gt;</span> <span class="s">"/etc/passwd"</span>
<span class="p">(</span><span class="nf">find-path</span> <span class="s">"stdio"</span> <span class="o">'</span><span class="p">(</span><span class="s">"/usr"</span> <span class="s">"/usr/include"</span><span class="p">)</span> <span class="o">'</span><span class="p">(</span><span class="s">"c"</span> <span class="s">"h"</span> <span class="s">"stk"</span><span class="p">))</span>
            <span class="nv">=&gt;</span> <span class="s">"/usr/include/stdio.h"</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(current-loading-file)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the path of the file that is currently being load.</p>
</div>
<div class="paragraph">
<p>


</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(require string)</code></strong><br>
<strong><code>(provide string)</code></strong><br>
<strong><code>(require/provide string)</code></strong><br>
<strong><code>(provided? string)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>Require</code> loads the file whose name is <code>string</code> if it was not
previously "<em>provided</em>". <code>Provide</code> permits to store <code>string</code> in
the list of already provided files. Providing a file permits to avoid
subsequent loads of this file. <code>Require/provide</code> is more or less equivalent to
a <code>require</code> followed by a <code>provide</code>. <code>Provided?</code> returns <code>#t</code> if
<code>string</code> was already provided; it returns <code>#f</code> otherwise.</p>
</div>
</div>
<div class="sect3">
<h4 id="_file_primitives">4.13.2. File Primitives</h4>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(temp-file-prefix)</code></strong><br>
<strong><code>(temp-file-prefix value)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>This parameter object permits to change the default prefix used to build
temporary file name. Its default value is built using the <code>TMPDIR</code>
environment variable (if it is defined) and the current process ID.
If a value is provided, it must be a string designating a valid prefix path.</p>
</div>
<div class="paragraph">
<p>This parameter object is also defined in <strong><a href="http://srfi.schemers.org/srfi-170/srfi-170.html">SRFI-170</a></strong> (<em>POSIX API</em>).</p>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(create-temp-file)</code></strong><br>
<strong><code>(create-temp-file prefix)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Creates a new temporary file and returns two values: its name and an opened
file port on it. The optional argument specifies the filename prefix
to use, and defaults to the result of invoking <code>temp-file-prefix</code>.
The returned file port is opened in read/write mode. It ensures that
the name cannot be reused by another process before being used
in the program that calls <code>create-temp-file</code>.
Note, that if the opened port is not used, it can be closed and collected
by the GC.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">let-values</span> <span class="p">(((</span><span class="nf">name</span> <span class="nv">port</span><span class="p">)</span> <span class="p">(</span><span class="nf">create-temp-file</span><span class="p">)))</span>
  <span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">msg</span> <span class="p">(</span><span class="nf">format</span> <span class="s">"Name: ~s\n"</span> <span class="nv">name</span><span class="p">)))</span>
    <span class="p">(</span><span class="nb">display</span> <span class="nv">msg</span><span class="p">)</span>
    <span class="p">(</span><span class="nb">display</span> <span class="nv">msg</span> <span class="nv">port</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">close-port</span> <span class="nv">port</span><span class="p">)))</span>     <span class="nv">=&gt;</span> <span class="nv">prints</span> <span class="nv">the</span> <span class="nv">name</span> <span class="nv">of</span> <span class="nv">the</span> <span class="nv">temp</span><span class="o">.</span> <span class="nv">file</span> <span class="nv">on</span> <span class="nv">the</span>
                               <span class="nv">current</span> <span class="nv">output</span> <span class="nv">port</span> <span class="nv">and</span> <span class="nv">in</span> <span class="nv">the</span> <span class="nv">file</span> <span class="nv">itself</span><span class="o">.</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This function is also defined in <strong><a href="http://srfi.schemers.org/srfi-170/srfi-170.html">SRFI-170</a></strong> (<em>POSIX API</em>).However,
in SRFI-170, <code>create-temp-file</code> returns only the name of the temporary file.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>temporary-file-name</code> is another name for this function.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(create-temp-directory)</code></strong><br>
<strong><code>(create-temp-directory prefix)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Creates a new temporary directory and returns its name as a string.
The optional argument specifies the filename prefix to use, and
defaults to the result of invoking <code>temp-file-prefix</code>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(rename-file string1 string2)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Renames the file whose path-name is <code>string1</code> to a file whose path-name is
<code>string2</code>. The result of <code>rename-file</code> is <strong><em>void</em></strong>.</p>
</div>
<div class="paragraph">
<p>This function is also defined in <strong><a href="http://srfi.schemers.org/srfi-170/srfi-170.html">SRFI-170</a></strong> (<em>POSIX API</em>).</p>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(delete-file string)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Removes the file whose path name is given in <code>string</code>.
The result of <code>delete-file</code> is <strong><em>void</em></strong>.</p>
</div>
<div class="paragraph">
<p>This function is also called <code>remove-file</code> for compatibility
reasons. ,(index "remove-file")</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(copy-file string1 string2)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Copies the file whose path-name is <code>string1</code> to a file whose path-name is
<code>string2</code>. If the file <code>string2</code> already exists, its content prior
the call to <code>copy-file</code> is lost. The result of <code>copy-file</code> is <strong><em>void</em></strong>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(copy-port in out)</code></strong><br>
<strong><code>(copy-port in out max)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Copy the content of port <code>in</code>, which must be opened for reading, on
port <code>out</code>, which must be opened for writing. If <code>max</code> is not specified,
All the characters from the input port are copied on ouput port. If <code>max</code>
is specified, it must be an integer indicating the maximum number of characters
which are copied from <code>in</code> to <code>out</code>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(file-exists? string)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns <code>#t</code> if the path name given in <code>string</code> denotes an existing file;
returns <code>#f</code> otherwise.</p>
</div>
<div class="paragraph">
<p>



</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(file-is-directory?  string)</code></strong><br>
<strong><code>(file-is-regular?    string)</code></strong><br>
<strong><code>(file-is-readable?   string)</code></strong><br>
<strong><code>(file-is-writable?   string)</code></strong><br>
<strong><code>(file-is-executable? string)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns <code>#t</code> if the predicate is true for the path name given in
<code>string</code>; returns <code>#f</code> otherwise (or if <code>string</code> denotes a file
which does not exist).</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(file-size string)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the size of the file whose path name is given in
<code>string</code>. If <code>string</code> denotes a file which does not exist,
<code>file-size</code> returns <code>#f</code>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(getcwd)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns a string containing the current working directory.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(chmod str)</code></strong><br>
<strong><code>(chmod str option1 &#8230;&#8203;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Change the access mode of the file whose path name is given in <code>string</code>.
The options must be composed of either an integer or one of the
following symbols <code>read</code>, <code>write</code> or <code>execute</code>. Giving no option to <code>chmod</code>
is equivalent to pass it the integer <code>0</code>. If the operation succeeds,
<code>chmod</code> returns <code>#t</code>; otherwise it returns <code>#f</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">chmod</span> <span class="s">"~/.stklos/stklosrc"</span> <span class="ss">'read</span> <span class="ss">'execute</span><span class="p">)</span>
<span class="p">(</span><span class="nf">chmod</span> <span class="s">"~/.stklos/stklosrc"</span> <span class="mo">#o644</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(chdir dir)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Changes the current directory to the directory given in string <code>dir</code>.</p>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(create-directory dir)</code></strong><br>
<strong><code>(create-directory dir permissions)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Create a directory with name <code>dir</code>. If <code>permissions</code> is omitted, it
defaults to #o775 (masked by the current umask).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This function is also defined in <strong><a href="http://srfi.schemers.org/srfi-170/srfi-170.html">SRFI-170</a></strong> (<em>POSIX API</em>). The old name
<code>make-directory</code> is deprecated.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(create-directories dir)</code></strong><br>
<strong><code>(create-directories dir permissions)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Create a directory with name <code>dir</code>. No error is signaled if <code>dir</code> already exists.
Parent directories of <code>dir</code> are created as needed. If <code>permissions</code> is omitted,
it defaults to #o775 (masked by the current umask).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This function was also called <code>make-directories</code>. This old name is
obsolete.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(ensure-directories-exist path)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Create a directory with name <code>dir</code> (and its parent directories if needed), if it
does not exist yet.</p>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(delete-directory dir)</code></strong><br>
<strong><code>(remove-directory dir)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Delete the directory with name <code>dir</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This function is also defined in <strong><a href="http://srfi.schemers.org/srfi-170/srfi-170.html">SRFI-170</a></strong> (<em>POSIX API</em>). The name
<code>remove-directory</code> is kept for compatibility.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(directory-files path)</code></strong><br>
<strong><code>(directory-files path dotfiles?)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the list of the files in the directory <code>path</code>. The <code>dotfiles?</code> flag
(default <code>#f</code>) causes files beginning with ,(q ".") to be included in the list.
Regardless of the value of <code>dotfiles?</code>, the two files ,(q ".") and ,(q "..")
are never  returned.</p>
</div>
<div class="paragraph">
<p>This function is also defined in <strong><a href="http://srfi.schemers.org/srfi-170/srfi-170.html">SRFI-170</a></strong> (<em>POSIX API</em>).</p>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(expand-file-name path)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>Expand-file-name</code> expands the filename given in <code>path</code> to
an absolute path.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme">  <span class="c1">;; Current directory is ~eg/stklos (i.e. /users/eg/stklos)</span>
  <span class="p">(</span><span class="nf">expand-file-name</span> <span class="s">".."</span><span class="p">)</span>            <span class="nv">=&gt;</span> <span class="s">"/users/eg"</span>
  <span class="p">(</span><span class="nf">expand-file-name</span> <span class="s">"~eg/../eg/bin"</span><span class="p">)</span> <span class="nv">=&gt;</span> <span class="s">"/users/eg/bin"</span>
  <span class="p">(</span><span class="nf">expand-file-name</span> <span class="s">"~/stklos)"</span>      <span class="nv">=&gt;</span> <span class="s">"/users/eg/stk"</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(canonical-file-name path)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Expands all symbolic links in <code>path</code> and returns its canonicalized
absolute path name. The resulting path does not have symbolic links.
If <code>path</code> doesn&#8217;t designate a valid path name, <code>canonical-file-name</code>
returns <code>#f</code>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(decompose-file-name string)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns an <code>`exploded'' list of the path name components given in
`string</code>.
The first element in the list denotes if the given <code>string</code> is an
absolute path or a relative one, being "/" or "." respectively.
Each component of this list is a string.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">decompose-file-name</span> <span class="s">"/a/b/c.stk"</span><span class="p">)</span> <span class="nv">=&gt;</span> <span class="p">(</span><span class="s">"/"</span> <span class="s">"a"</span> <span class="s">"b"</span> <span class="s">"c.stk"</span><span class="p">)</span>
<span class="p">(</span><span class="nf">decompose-file-name</span> <span class="s">"a/b/c.stk"</span><span class="p">)</span>  <span class="nv">=&gt;</span> <span class="p">(</span><span class="s">"."</span> <span class="s">"a"</span> <span class="s">"b"</span> <span class="s">"c.stk"</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(winify-file-name fn)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>On Win32 system, when compiled with the Cygwin environment,
file names are internally represented in a POSIX-like internal form.
<code>Winify-file-bame</code> permits to obtain back the Win32 name of an interned
file name</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">winify-file-name</span> <span class="s">"/tmp"</span><span class="p">)</span>
    <span class="nv">=&gt;</span> <span class="s">"C:\\cygwin\\tmp"</span>
<span class="p">(</span><span class="nb">list</span> <span class="p">(</span><span class="nf">getcwd</span><span class="p">)</span> <span class="p">(</span><span class="nf">winify-file-name</span> <span class="p">(</span><span class="nf">getcwd</span><span class="p">)))</span>
    <span class="nv">=&gt;</span> <span class="p">(</span><span class="s">"//saxo/homes/eg/Projects/STklos"</span>
        <span class="s">"\\\\saxo\\homes\\eg\\Projects\\STklos"</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(posixify-file-name fn)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>On Win32 system, when compiled with the Cygwin environment,
file names are internally represented in a POSIX-like internal form.
<code>posixify-file-bame</code> permits to obtain the interned file name from
its external form.
file name</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">posixify-file-name</span> <span class="s">"C:\\cygwin\\tmp"</span><span class="p">)</span>
       <span class="nv">=&gt;</span> <span class="s">"/tmp"</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(basename str)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns a string containing the last component of the path name
given in <code>str</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">basename</span> <span class="s">"/a/b/c.stk"</span><span class="p">)</span> <span class="nv">=&gt;</span> <span class="s">"c.stk"</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(dirname str)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns a string containing all but the last component of the path
name given in <code>str</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">dirname</span> <span class="s">"/a/b/c.stk"</span><span class="p">)</span> <span class="nv">=&gt;</span> <span class="s">"/a/b"</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(file-suffix pathname)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the suffix of given <code>pathname</code>. If no suffix is found, <code>file-suffix</code>
returns #f.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">file-suffix</span> <span class="s">"./foo.tar.gz"</span><span class="p">)</span> <span class="nv">=&gt;</span> <span class="s">"gz"</span>
<span class="p">(</span><span class="nf">file-suffix</span> <span class="s">"./a.b/c"</span><span class="p">)</span>      <span class="nv">=&gt;</span> <span class="no">#f</span>
<span class="p">(</span><span class="nf">file-suffix</span> <span class="s">"./a.b/c."</span><span class="p">)</span>     <span class="nv">=&gt;</span> <span class="s">""</span>
<span class="p">(</span><span class="nf">file-suffix</span> <span class="s">"~/.profile"</span><span class="p">)</span>   <span class="nv">=&gt;</span> <span class="no">#f</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(file-prefix pathname)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the prefix of given <code>pathname</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">file-prefix</span> <span class="s">"./foo.tar.gz"</span><span class="p">)</span> <span class="nv">=&gt;</span> <span class="s">"./foo.tar"</span>
<span class="p">(</span><span class="nf">file-prefix</span> <span class="s">"./a.b/c"</span><span class="p">)</span>      <span class="nv">=&gt;</span> <span class="s">"./a.b/c"</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(file-separator)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Retuns the operating system file separator as a character. This is typically
<code>&#35;\/</code> on Unix (or Cygwin) systems and <code>&#35;\\</code> on Windows.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(make-path dirname .  names)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Builds a file name from the directory <code>dirname</code> and <code>names</code>. For instance,
on a Unix system:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">make-path</span> <span class="s">"a"</span> <span class="s">"b"</span> <span class="s">"c"</span><span class="p">)</span>   <span class="nv">=&gt;</span> <span class="s">"a/b/c"</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(glob pattern &#8230;&#8203;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>Glob</code> performs file name <code>`globbing'' in a fashion similar to the
csh shell. `Glob</code> returns a list of the filenames that match at least
one of <code>pattern</code> arguments.  The <code>pattern</code> arguments may contain
the following special characters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>?</code> Matches any single character.</p>
</li>
<li>
<p><code>*</code> Matches any sequence of zero or more characters.</p>
</li>
<li>
<p><code>\[chars\]</code> Matches any single character in <code>chars</code>.
If chars contains a sequence of the form <code>a-b</code> then any character
between <code>a</code> and <code>b</code> (inclusive) will match.</p>
</li>
<li>
<p><code>\x</code> Matches the character <code>x</code>.</p>
</li>
<li>
<p><code>{a,b,&#8230;&#8203;}</code> Matches any of the strings <code>a</code>, <code>b</code>, etc.
)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>As with csh, a '.' at the beginning of a file&#8217;s name or just after
a '/' must be matched explicitly or with a <code>@{@}</code> construct.
In addition, all '/' characters must be matched explicitly.</p>
</div>
<div class="paragraph">
<p>If the first character in a pattern is '~' then it refers to
the home directory of the user whose name follows the '~'.
If the '~' is followed immediately by '/' then the value of
the environment variable HOME is used.</p>
</div>
<div class="paragraph">
<p><code>Glob</code> differs from csh globbing in two ways:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>it does not  sort its result list (use the <code>sort</code> procedure
if you want the list  sorted).</p>
</li>
<li>
<p><code>glob</code> only returns the names of files that actually exist;
in csh no check for existence is made unless a pattern contains a
<code>?</code>, <code>*</code>, or <code>[]</code> construct.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(posix-error? obj)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>This procedure returns <code>#t</code> if <code>obj</code> is a condition object that describes a
POSIX error, and <code>#f</code> otherwise.</p>
</div>
<div class="paragraph">
<p>This function is defined in <strong><a href="http://srfi.schemers.org/srfi-170/srfi-170.html">SRFI-170</a></strong> (<em>POSIX API</em>).</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(posix-error-name posix-error)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>This procedure returns a symbol that is the name associated with the
value of <code>errno</code> when the POSIX function reported an error. This can be
used to provide programmatic recovery when a POSIX function can return
more than one value of <code>errno</code>.</p>
</div>
<div class="paragraph">
<p>This function is defined in <strong><a href="http://srfi.schemers.org/srfi-170/srfi-170.html">SRFI-170</a></strong> (<em>POSIX API</em>).</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(posix-error-message posix-error)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>This procedure returns a string that is an error message reflecting the
value of errno when the POSIX function reported an error. This string
is useful for reporting the cause of the error to the user</p>
</div>
<div class="paragraph">
<p>This function is defined in <strong><a href="http://srfi.schemers.org/srfi-170/srfi-170.html">SRFI-170</a></strong> (<em>POSIX API</em>).</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(posix-error-errno posix-error)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>This procedure returns the value of <code>errno</code> (an exact integer).</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(posix-error-procedure posix-error)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>This procedure returns the name of the Scheme procedure that raised
the error.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(posix-error-args posix-error)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>This procedure returns the list of the Scheme procedure arguments
that raised the error.</p>
</div>
</div>
<div class="sect3">
<h4 id="_environment">4.13.3. Environment</h4>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(getenv str)</code></strong><br>
<strong><code>(getenv)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Looks for the environment variable named <code>str</code> and returns its
value as a string, if it exists. Otherwise, <code>getenv</code> returns <code>#f</code>.
If <code>getenv</code> is called without parameter, it returns the list of
all the environment variables accessible from the program as an
A-list.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">getenv</span> <span class="s">"SHELL"</span><span class="p">)</span>
     <span class="nv">=&gt;</span> <span class="s">"/bin/zsh"</span>
<span class="p">(</span><span class="nf">getenv</span><span class="p">)</span>
     <span class="nv">=&gt;</span> <span class="p">((</span><span class="s">"TERM"</span> <span class="o">.</span> <span class="s">"xterm"</span><span class="p">)</span> <span class="p">(</span><span class="s">"PATH"</span> <span class="o">.</span> <span class="s">"/bin:/usr/bin"</span><span class="p">)</span> <span class="o">...</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(setenv! var value)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Sets the environment variable <code>var</code> to <code>value</code>. <code>Var</code> and
<code>value</code> must be strings. The result of <code>setenv!</code> is <strong><em>void</em></strong>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(unsetenv! var)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Unsets the environment variable <code>var</code>. <code>Var</code> must be a string.
The result of <code>unsetenv!</code> is <strong><em>void</em></strong>.</p>
</div>
<hr>
<div class="paragraph">
<p><strong><em>STklos</em></strong> defines also the R<sup>7</sup>RS (and <strong><a href="http://srfi.schemers.org/srfi-96/srfi-96.html">SRFI-96</a></strong>) standard
primivitives to acess environment variables.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(get-environment-variable name)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the value of the named environment variable as a string, or
<code>#f</code> if the named environment variable is not found. The name argument
is expected to be a string. This function is similar to the <code>getenv</code>. It
has been added to be  support <strong><a href="http://srfi.schemers.org/srfi-98/srfi-98.html">SRFI-98</a></strong> (<em>Interface to access environment variables</em>).</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(get-environment-variables)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns names and values of all the environment variables as an a-list.
This function is defined by <strong><a href="http://srfi.schemers.org/srfi-98/srfi-98.html">SRFI-98</a></strong> (<em>Interface to access environment variables</em>).</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(build-path-from-shell-variable var)</code></strong><br>
<strong><code>(build-path-from-shell-variable var sep)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Builds a path as a list of strings (which is the way STklos represents
paths) from the environment variable <code>var</code>, given the separator characters
given in <code>sep</code> (which defaults to <code>":"</code>, the standrad Unix path separator).
If the <code>var</code> is not definied in the environment,
<code>build-path-from-shell-variable</code> returns the empty list.</p>
</div>
<div class="paragraph">
<p>If the shell variable <code>MYPATH</code> is "/bin:/sbin:/usr/bin"`, then</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">build-path-from-shell-variable</span> <span class="s">"MYPATH"</span><span class="p">)</span>       <span class="nv">=&gt;</span> <span class="p">(</span><span class="s">"/bin"</span> <span class="s">"/sbin"</span> <span class="s">"/usr/bin"</span><span class="p">)</span>
<span class="p">(</span><span class="nf">build-path-from-shell-variable</span> <span class="s">"MYPATH"</span> <span class="s">"/:"</span><span class="p">)</span>  <span class="nv">=&gt;</span> <span class="p">(</span><span class="s">"bin"</span> <span class="s">"sbin"</span> <span class="s">"usr"</span> <span class="s">"bin"</span><span class="p">)</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_time">4.13.4. Time</h4>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(current-second)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns an inexact number representing the current time on the
International Atomic Time (TAI) scale.  The value 0.0 represents
midnight on January 1, 1970 TAI (equivalent to ten seconds before
midnight Universal Time) and the value 1.0 represents one TAI
second later.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(current-jiffy)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the number of <em>jiffies</em> as an exact integer that
have elapsed since an arbitrary, implementation-defined
epoch. A jiffy is an implementation-defined fraction of
a second which is defined by the return value of the
<code>jiffies-per-second</code> procedure. The starting epoch is
guaranteed to be constant during a run of the program,
but may vary between runs.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(jiffies-per-seconds)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns an exact integer representing the number of jiffies
per second.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="nf">time-length</span><span class="p">)</span>
  <span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nb">list</span> <span class="p">(</span><span class="nf">make-list</span> <span class="mi">100000</span><span class="p">))</span>
        <span class="p">(</span><span class="nf">start</span> <span class="p">(</span><span class="nf">current-jiffy</span><span class="p">)))</span>
    <span class="p">(</span><span class="nb">length</span> <span class="nv">list</span><span class="p">)</span>
    <span class="p">(</span><span class="nb">/</span> <span class="p">(</span><span class="nb">-</span> <span class="p">(</span><span class="nf">current-jiffy</span><span class="p">)</span> <span class="nv">start</span><span class="p">)</span>
       <span class="p">(</span><span class="nf">jiffies-per-second</span><span class="p">))))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(clock)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns an approximation of processor time, in milliseconds, used so far by the
program.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(sleep n)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Suspend the execution of the program for at <code>ms</code> milliseconds. Note that due
to system clock resolution, the pause may be a little bit longer. If a
signal arrives during the pause, the execution may be resumed.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> syntax</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(time expr1 expr2 &#8230;&#8203;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Evaluates the expressions <code>expr1</code>, <code>expr2</code>, &#8230;&#8203; and returns the
result of the last expression. This form prints also the time spent
for this evaluation, in milliseconds, on the current error port.
This is CPU time, and not real ("wall") time.</p>
</div>
</div>
<div class="sect3">
<h4 id="_system_information">4.13.5. System Information</h4>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(features)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns a list of the feature identifiers which <code>cond-expand</code>
treats as true. Here is an
example of what <code>features</code> might return:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">features</span><span class="p">)</span> <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">STklos</span> <span class="nv">STklos-1</span><span class="o">.</span><span class="mi">70</span> <span class="nv">exact-complex</span>
               <span class="nv">ieee-float</span> <span class="nv">full-unicode</span> <span class="nv">ratios</span> <span class="nv">little-endian</span> <span class="o">...</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(running-os)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the name of the underlying Operating System which is running
the program.
The value returned by <code>runnin-os</code> is a symbol. For now, this procedure
returns either <code>unix</code>, <code>android</code>, <code>windows</code>, or <code>cygwin-windows</code>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(hostname)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Return the  host name of the current processor as a string.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(command-line)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the command line passed to the process as a list
of strings. The first string corresponds to the command
name.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(command-name)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returnd the name of the running program if it is a standalone and #f
otherwise. This function is defined in <strong><a href="http://srfi.schemers.org/srfi-193/srfi-193.html">SRFI-193</a></strong> (<em>Command line</em>).</p>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(command-args)</code></strong><br>
<strong><code>(argv)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns a list of the arguments given on the shell command line. The
interpreter options are no included in the result. The name <code>argv</code> is
deprecated and should not be used.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(argc)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the number of arguments present on the command line.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(program-name)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the invocation name of the current program as a string. If the file is
not a script (in sense of <strong><a href="http://srfi.schemers.org/srfi-193/srfi-193.html">SRFI-193</a></strong>), it is the name of the
running <strong><em>STklos</em></strong> interpreter, otherwise it is the name of the running script.
This function always returns a string wheareas the <code>command-name</code> procedure returns
<code>#f</code> when the program name is not a script.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(script-file)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the absolute path of the current script.
If the calling program is not a script, #f is returned.
This function is defined in <strong><a href="http://srfi.schemers.org/srfi-193/srfi-193.html">SRFI-193</a></strong> (<em>Command line</em>).</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(script-directory)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the non-filename part of script-file as a string.
As with <code>script-file</code>, this is an absolute pathname.</p>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(version)</code></strong><br>
<strong><code>(implementation-version)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns a string identifying the current version of the system. A
version is constituted of two numbers separated by a point: the version
and the release numbers. Note that <code>implementation-version</code> corresponds
to the <strong><a href="http://srfi.schemers.org/srfi-112/srfi-112.html">SRFI-112</a></strong> (<em>Environment Inquiry</em>) name of this function.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(machine-type)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns a string identifying the kind of machine which is running the
program. The result string is of the form
<code>[os-name]-[os-version]-[cpu-architecture]</code>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(implementation-name)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>This function is defined in <strong><a href="http://srfi.schemers.org/srfi-112/srfi-112.html">SRFI-112</a></strong> (<em>Environment Inquiry</em>); it returns the Scheme
implementation (i.e. the string <code>"STklos"</code>).</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(cpu-architecture)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>This function is defined in <strong><a href="http://srfi.schemers.org/srfi-112/srfi-112.html">SRFI-112</a></strong> (<em>Environment Inquiry</em>); it returns the CPU
architecture, real or virtual, on which this implementation
is executing.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(machine-name)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>This function is defined in <strong><a href="http://srfi.schemers.org/srfi-112/srfi-112.html">SRFI-112</a></strong> (<em>Environment Inquiry</em>); it returns a name for the
particular machine on which the implementation is running.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(os-name)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>This function is defined in <strong><a href="http://srfi.schemers.org/srfi-112/srfi-112.html">SRFI-112</a></strong> (<em>Environment Inquiry</em>); it returns the name for
the operating system, platform, or equivalent on which the
implementation is running.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(os-version)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>This function is defined in <strong><a href="http://srfi.schemers.org/srfi-112/srfi-112.html">SRFI-112</a></strong> (<em>Environment Inquiry</em>); it returns the version for
the operating system, platform, or equivalent on which the
implementation is running.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(getpid)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the system process number of the current program (i.e. the
Unix <em>PID</em> as an integer).</p>
</div>
</div>
<div class="sect3">
<h4 id="_program_arguments_parsing">4.13.6. Program Arguments Parsing</h4>
<div class="paragraph">
<p>
<strong><em>STklos</em></strong> provides a simple way to parse program arguments with the
<code>parse-arguments</code> special form. This form is generally used into
the <code>main</code>| function in a Scheme script. See <strong><a href="http://srfi.schemers.org/srfi-22/srfi-22.html">SRFI-22</a></strong> (<em>Running Scheme Scripts on Unix</em>) on how to
use a <code>main</code> function in a Scheme program.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(parse-arguments &lt;args&gt; &lt;clause1&gt; &lt;clause2&gt; &#8230;&#8203;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>The <code>parse-arguments</code> special form is used to parse the
command line arguments of a Scheme script. The implementation of
this form internally uses the GNU C <code>getopt</code> function. As a
consequence <code>parse-arguments</code> accepts options which start with
the '-' (short option) or '--' characters (long option).</p>
</div>
<div class="paragraph">
<p>The first argument of <code>parse-arguments</code> is a list of the arguments
given to the program (comprising the program name in the CAR of this
list). Following arguments are clauses. Clauses are described later.</p>
</div>
<div class="paragraph">
<p>By  default, <code>parse-arguments</code> permutes the contents of (a copy) of
the arguments as it scans, so that eventually all the non-options are
at the end. However, if the shell environment variable <code>POSIXLY_CORRECT</code>
is set, then option processing stops as soon as a non-option argument
is encountered.</p>
</div>
<div class="paragraph">
<p>A clause must follow the syntax:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>&lt;clause&gt;       =&gt; string | &lt;list-clause&gt;
&lt;list clause&gt;  =&gt; (&lt;option descr&gt; &lt;expr&gt; ...) | (else &lt;expr&gt; ...)
&lt;option descr&gt; =&gt; (&lt;option name&gt; [&lt;keyword&gt; value]*)
&lt;option name&gt;  =&gt; string
&lt;keyword&gt;      =&gt; :alternate | :arg | :help</code></pre>
</div>
</div>
<div class="paragraph">
<p>A string clause is used to build the  help associated to the command.
A list clause must follow the syntax describes an option. The
<code>&lt;expr&gt;</code>s associated to a list clauses are executed when the option
is recognized.
The <code>else</code> clauses is executed when all parameters have
been parsed. The <code>:alternate</code> key permits to have an alternate name for an
option (generally a short or long name if the option name is a
short or long name).  The <code>:help</code> is used to provide help about the
the option. The <code>:arg</code> is used when the option admit a parameter:
the symbol given after <code>:arg</code> will be bound to the value of the option
argument when the corresponding `&lt;expr&gt;`s will be executed.</p>
</div>
<div class="paragraph">
<p>In an <code>else</code> clause the symbol <code>other-arguments</code> is bound to the
list of the arguments which are not options.</p>
</div>
<div class="paragraph">
<p>The following example shows a rather complete usage of the
<code>parse-arguments</code> form</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="o">#</span><span class="nv">!/usr/bin/env</span> <span class="nv">stklos-script</span>

<span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="nf">main</span> <span class="nv">args</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">parse-arguments</span> <span class="nv">args</span>
     <span class="s">"Usage: foo [options] [parameter ...]"</span>
     <span class="s">"General options:"</span>
         <span class="p">((</span><span class="s">"verbose"</span> <span class="nv">:alternate</span> <span class="s">"v"</span> <span class="nv">:help</span> <span class="s">"be more verbose"</span><span class="p">)</span>
           <span class="p">(</span><span class="nf">printf</span> <span class="s">"Seen the verbose option~%"</span><span class="p">))</span>
         <span class="p">((</span><span class="s">"long"</span> <span class="nv">:help</span> <span class="s">"a long option alone"</span><span class="p">)</span>
           <span class="p">(</span><span class="nf">printf</span> <span class="s">"Seen the long option~%"</span><span class="p">))</span>
         <span class="p">((</span><span class="s">"s"</span> <span class="nv">:help</span> <span class="s">"a short option alone"</span><span class="p">)</span>
           <span class="p">(</span><span class="nf">printf</span> <span class="s">"Seen the short option~%"</span><span class="p">))</span>
     <span class="s">"File options:"</span>
         <span class="p">((</span><span class="s">"input"</span> <span class="nv">:alternate</span> <span class="s">"f"</span> <span class="nv">:arg</span> <span class="nv">file</span>
                   <span class="nv">:help</span> <span class="s">"use &lt;file&gt; as input"</span><span class="p">)</span>
           <span class="p">(</span><span class="nf">printf</span> <span class="s">"Seen the input option with ~S argument~%"</span> <span class="nv">file</span><span class="p">))</span>
         <span class="p">((</span><span class="s">"output"</span> <span class="nv">:alternate</span> <span class="s">"o"</span> <span class="nv">:arg</span> <span class="nv">file</span>
                    <span class="nv">:help</span> <span class="s">"use &lt;file&gt; as output"</span><span class="p">)</span>
           <span class="p">(</span><span class="nf">printf</span> <span class="s">"Seen the output option with ~S argument~%"</span> <span class="nv">file</span><span class="p">))</span>
     <span class="s">"Misc:"</span>
         <span class="p">((</span><span class="s">"help"</span> <span class="nv">:alternate</span> <span class="s">"h"</span>
                  <span class="nv">:help</span> <span class="s">"provides help for the command"</span><span class="p">)</span>
           <span class="p">(</span><span class="nf">arg-usage</span> <span class="p">(</span><span class="nf">current-error-port</span><span class="p">))</span>
           <span class="p">(</span><span class="nf">exit</span> <span class="mi">1</span><span class="p">))</span>
     <span class="p">(</span><span class="k">else</span>
         <span class="p">(</span><span class="nf">printf</span> <span class="s">"All options parsed. Remaining arguments are ~S~%"</span>
                 <span class="nv">other-arguments</span><span class="p">))))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The following program invocation</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="nv">foo</span> <span class="nv">-vs</span> <span class="nv">--input</span> <span class="nv">in</span> <span class="nv">-o</span> <span class="nv">out</span> <span class="nv">arg1</span> <span class="nv">arg2</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>produces the following output</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>Seen the verbose option
Seen the short option
Seen the input option with "in" argument
Seen the output option with "out" argument
All options parsed. Remaining arguments are ("arg1" "arg2")</code></pre>
</div>
</div>
<div class="paragraph">
<p>Finally, the program invocation</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="nv">foo</span> <span class="nv">--help</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>produces the following output</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>Usage: foo [options] [parameter ...]
General options:
  --verbose, -v               be more verbose
  --long                      a long option alone
  -s                          a short option alone
File options:
  --input=&lt;file&gt;, -f &lt;file&gt;   use &lt;file&gt; as input
  --output=&lt;file&gt;, -o &lt;file&gt;  use &lt;file&gt; as output
Misc:
  --help, -h                  provides help for the command</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Notes:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Short option can be concatenated. That is,</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="nv">prog</span> <span class="nv">-abc</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>is equivalent to the following program call</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="nv">prog</span> <span class="nv">-a</span> <span class="nv">-b</span> <span class="nv">-c</span></code></pre>
</div>
</div>
</li>
<li>
<p>Any argument following a '--' argument is no more considered as
an option, even if it starts with a '-' or '--'.</p>
</li>
<li>
<p>Option with a parameter can be written in several ways. For instance
to set the output in the <code>bar</code> file for the previous example can be
expressed as</p>
<div class="ulist">
<ul>
<li>
<p><code>--output=bar</code>, or</p>
</li>
<li>
<p><code>-o bar</code>, or</p>
</li>
<li>
<p><code>-obar</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(arg-usage port)</code></strong><br>
<strong><code>(arg-usage port as-sexpr)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>This procedure is only bound inside a <code>parse-arguments</code> form.
It pretty prints the help associated to the clauses of the
<code>parse-arguments</code> form on the given port. If the argument
<code>as-sexpr</code> is passed and is not <code>#f</code>, the help strings are
printed on <code>port</code> as <em>Sexpr</em>s. This is useful if the help
strings need to be manipulated by a program.</p>
</div>
</div>
<div class="sect3">
<h4 id="_misc_system_procedures">4.13.7. Misc. System Procedures</h4>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(system string)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Sends the given <code>string</code> to the system shell <code>/bin/sh</code>. The result of
<code>system</code> is the integer status code the shell returns.</p>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(exec str)</code></strong><br>
<strong><code>(exec-list str)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>These procedures execute the command given in <code>str</code>. The command given
in <code>str</code> is passed to <code>/bin/sh</code>. <code>Exec</code> returns a string which contains
all the characters that the command <code>str</code> has printed on it&#8217;s standard
output, whereas <code>exec-list</code> returns a list of the lines which constitute
the output of <code>str</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">exec</span> <span class="s">"echo A; echo B"</span><span class="p">)</span>                <span class="nv">=&gt;</span> <span class="s">"A\nB\n"</span>
<span class="p">(</span><span class="nf">exec-list</span> <span class="s">"echo A; echo B"</span><span class="p">)</span>           <span class="nv">=&gt;</span> <span class="p">(</span><span class="s">"A"</span> <span class="s">"B"</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(address-of obj)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the address of the object <code>obj</code> as an integer.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(exit)</code></strong><br>
<strong><code>(exit ret-code)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Exits the program with the specified integer return code. If <code>ret-code</code>
is omitted, the program terminates with a return code of 0.
If  program has registered exit functions with <code>register-exit-function!</code>,
they are called (in an order which is the reverse of their call order).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <strong><em>STklos</em></strong> <code>exit</code> primitive accepts also an
integer value as parameter (R<sup>7</sup>RS accepts only a boolean).
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(emergency-exit)</code></strong><br>
<strong><code>(emergency-exit ret-code)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Terminates the program without running any outstanding
dynamic-wind <em>after</em> procedures and communicates an exit
value to the operating system in the same manner as <code>exit</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <strong><em>STklos</em></strong> <code>emergency-exit</code> primitive accepts also an
integer value as parameter (R<sup>7</sup>RS accepts only a boolean).
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(die message)</code></strong><br>
<strong><code>(die message status)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>Die</code> prints the given <code>message</code> on the current error port and exits
the program with the <code>status</code> value. If <code>status</code> is omitted, it
defaults to 1.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(get-password)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>This primitive permits to enter a password (character echoing
being turned off). The value returned by <code>get-password</code> is the entered
password as a string.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(register-exit-function! proc)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>This function registers <code>proc</code> as an exit function. This function will
be called when the program exits. When called, <code>proc</code> will be passed one
parmater which is the status given to the <code>exit</code> function (or 0 if the
programe terminates normally). The result of  <code>register-exit-function!</code>
is undefined.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">let*</span> <span class="p">((</span><span class="nf">tmp</span> <span class="p">(</span><span class="nf">temporary-file-name</span><span class="p">))</span>
       <span class="p">(</span><span class="nf">out</span> <span class="p">(</span><span class="nb">open-output-file</span> <span class="nv">tmp</span><span class="p">)))</span>
  <span class="p">(</span><span class="nf">register-exit-function!</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">n</span><span class="p">)</span>
                             <span class="p">(</span><span class="nf">when</span> <span class="p">(</span><span class="nb">zero?</span> <span class="nv">n</span><span class="p">)</span>
                               <span class="p">(</span><span class="nf">delete-file</span> <span class="nv">tmp</span><span class="p">))))</span>
  <span class="nv">out</span><span class="p">)</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_keywords">4.14. Keywords</h3>
<div class="paragraph">
<p>




Keywords are symbolic constants which evaluate to themselves.
   By default, a keyword is a symbol whose first (or last) character is a colon
   (<strong><em>":"</em></strong>). Alternatively, to be compatible with other Scheme
   implementations, the notation <code>#:foo</code> is also available to denote
   the keyword of name <code>foo</code>.</p>
</div>
<div class="paragraph">
<p>Note that the four directives <code>keyword-colon-position-xxx</code> or the
   parameter object ` keyword-colon-position` permit to change the
   default behavior. See section~Identifiers for more
   information.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(keyword obj)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns <code>#t</code> if <code>obj</code> is a keyword, otherwise returns <code>#f</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">keyword?</span> <span class="ss">'foo</span><span class="p">)</span>     <span class="nv">=&gt;</span> <span class="no">#f</span>
<span class="p">(</span><span class="nf">keyword?</span> <span class="ss">':foo</span><span class="p">)</span>    <span class="nv">=&gt;</span> <span class="no">#t</span>  <span class="c1">; depends of keyword-colon-position</span>
<span class="p">(</span><span class="nf">keyword?</span> <span class="ss">'foo:</span><span class="p">)</span>    <span class="nv">=&gt;</span> <span class="no">#t</span>  <span class="c1">; depends of keyword-colon-position</span>
<span class="p">(</span><span class="nf">keyword?</span> <span class="o">'#</span><span class="nv">:foo</span><span class="p">)</span>   <span class="nv">=&gt;</span> <span class="no">#t</span>  <span class="c1">; always</span>
<span class="p">(</span><span class="nf">keyword?</span> <span class="nv">:foo</span><span class="p">)</span>     <span class="nv">=&gt;</span> <span class="no">#t</span>  <span class="c1">; depends of keyword-colon-position</span>
<span class="p">(</span><span class="nf">keyword?</span> <span class="nv">foo:</span><span class="p">)</span>     <span class="nv">=&gt;</span> <span class="no">#t</span>  <span class="c1">; depends of keyword-colon-position</span>
<span class="p">(</span><span class="nf">keyword?</span> <span class="o">#</span><span class="nv">:foo</span><span class="p">)</span>    <span class="nv">=&gt;</span> <span class="no">#t</span>  <span class="c1">; always</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(make-keyword s)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Builds a keyword from the given <code>s</code>. The parameter <code>s</code> must be a symbol
or a string.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">make-keyword</span> <span class="s">"test"</span><span class="p">)</span>    <span class="nv">=&gt;</span> <span class="o">#</span><span class="nv">:test</span>
<span class="p">(</span><span class="nf">make-keyword</span> <span class="ss">'test</span><span class="p">)</span>     <span class="nv">=&gt;</span> <span class="o">#</span><span class="nv">:test</span>
<span class="p">(</span><span class="nf">make-keyword</span> <span class="s">":hello"</span><span class="p">)</span>  <span class="nv">=&gt;</span> <span class="o">#</span><span class="nv">::hello</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(keyword&#8594;string key)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the name of <code>key</code> as a string. The result does not contain a colon.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(string&#8594;keyword str)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>This function function has been added to be compatibe with SRFI-88.
It is equivalent to make-keyword, except that the parameter cannot be
a symbol.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(key-get list key)</code></strong><br>
<strong><code>(key-get list key default)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>List</code> must be a list of keywords and their respective values.
<code>key-get</code> scans the <code>list</code> and returns the value
associated with the given <code>key</code>. If  <code>key</code> does
not appear in an odd position in <code>list</code>, the specified
<code>default</code> is returned, or an error is raised if no <code>default</code> was
specified.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">key-get</span> <span class="o">'</span><span class="p">(</span><span class="o">#</span><span class="nv">:one</span> <span class="mi">1</span> <span class="o">#</span><span class="nv">:two</span> <span class="mi">2</span><span class="p">)</span> <span class="o">#</span><span class="nv">:one</span><span class="p">)</span>     <span class="nv">=&gt;</span> <span class="mi">1</span>
<span class="p">(</span><span class="nf">key-get</span> <span class="o">'</span><span class="p">(</span><span class="o">#</span><span class="nv">:one</span> <span class="mi">1</span> <span class="o">#</span><span class="nv">:two</span> <span class="mi">2</span><span class="p">)</span> <span class="o">#</span><span class="nv">:four</span> <span class="no">#f</span><span class="p">)</span> <span class="nv">=&gt;</span> <span class="no">#f</span>
<span class="p">(</span><span class="nf">key-get</span> <span class="o">'</span><span class="p">(</span><span class="o">#</span><span class="nv">:one</span> <span class="mi">1</span> <span class="o">#</span><span class="nv">:two</span> <span class="mi">2</span><span class="p">)</span> <span class="o">#</span><span class="nv">:four</span><span class="p">)</span>    <span class="nv">=&gt;</span> <span class="nv">error</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(key-set! list key value)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>List</code> must be a list of keywords and their respective values.
<code>key-set!</code> sets the value associated to <code>key</code> in the keyword list.
If the key is already present in <code>list</code>, the keyword list is
,(emph "physically") changed.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">l</span> <span class="p">(</span><span class="nb">list</span> <span class="o">#</span><span class="nv">:one</span> <span class="mi">1</span> <span class="o">#</span><span class="nv">:two</span> <span class="mi">2</span><span class="p">)))</span>
  <span class="p">(</span><span class="k">set!</span> <span class="nv">l</span> <span class="p">(</span><span class="nf">key-set!</span> <span class="nv">l</span> <span class="o">#</span><span class="nv">:three</span> <span class="mi">3</span><span class="p">))</span>
  <span class="p">(</span><span class="nb">cons</span> <span class="p">(</span><span class="nf">key-get</span> <span class="nv">l</span> <span class="o">#</span><span class="nv">:one</span><span class="p">)</span>
        <span class="p">(</span><span class="nf">key-get</span> <span class="nv">l</span> <span class="o">#</span><span class="nv">:three</span><span class="p">)))</span>            <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">1</span> <span class="o">.</span> <span class="mi">3</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(key-delete  list key)</code></strong><br>
<strong><code>(key-delete! list key)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>List</code> must be a list of keywords and their respective values.
<code>key-delete</code> remove the <code>key</code> and its associated value of the keyword
list. The key can be absent of the list.</p>
</div>
<div class="paragraph">
<p><code>key-delete!</code> does the same job than <code>key-delete</code> by physically
modifying its <code>list</code> argument.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">key-delete</span> <span class="o">'</span><span class="p">(</span><span class="nf">:one</span> <span class="mi">1</span> <span class="nv">:two</span> <span class="mi">2</span><span class="p">)</span> <span class="nv">:two</span><span class="p">)</span>    <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">:one</span> <span class="mi">1</span><span class="p">)</span>
<span class="p">(</span><span class="nf">key-delete</span> <span class="o">'</span><span class="p">(</span><span class="nf">:one</span> <span class="mi">1</span> <span class="nv">:two</span> <span class="mi">2</span><span class="p">)</span> <span class="nv">:three</span><span class="p">)</span>  <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">:one</span> <span class="mi">1</span> <span class="nv">:two</span> <span class="mi">2</span><span class="p">)</span>
<span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">l</span> <span class="p">(</span><span class="nb">list</span> <span class="nv">:one</span> <span class="mi">1</span> <span class="nv">:two</span> <span class="mi">2</span><span class="p">)))</span>
   <span class="p">(</span><span class="nf">key-delete!</span> <span class="nv">l</span> <span class="nv">:two</span><span class="p">)</span>
   <span class="nv">l</span><span class="p">)</span>                                 <span class="nv">=&gt;</span>  <span class="p">(</span><span class="nf">:one</span> <span class="mi">1</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(keyword-colon-position)</code></strong><br>
<strong><code>(keyword-colon-position value)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>This parameter object indicates the convention used by the reader to
denote keywords. The allowed values are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>none</strong>, to forbid a symbol with colon to be interpreted as a keyword,</p>
</li>
<li>
<p><strong>before</strong>, to read symbols starting with a colon as keywords,</p>
</li>
<li>
<p><strong>after</strong>, to read symbols ending with a colon as keywords,</p>
</li>
<li>
<p><strong>both</strong>,  to read symbols starting or ending with a colon as keywords.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Note that the notation <code>#:key</code> is always read as a keyword independently
of the value of <code>keyword-colon-position</code>. Hence, we have</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nb">list</span> <span class="p">(</span><span class="nf">keyword?</span> <span class="ss">':a</span><span class="p">)</span>
      <span class="p">(</span><span class="nf">keyword?</span> <span class="ss">'a:</span><span class="p">)</span>
      <span class="p">(</span><span class="nf">keyword?</span> <span class="o">'#</span><span class="nv">:a</span><span class="p">))</span>
                 <span class="nv">=&gt;</span> <span class="p">(</span><span class="no">#f</span> <span class="no">#f</span> <span class="no">#t</span><span class="p">)</span>  <span class="c1">; if keyword-colon-position is none</span>
                 <span class="nv">=&gt;</span> <span class="p">(</span><span class="no">#t</span> <span class="no">#f</span> <span class="no">#t</span><span class="p">)</span>  <span class="c1">; if keyword-colon-position is before</span>
                 <span class="nv">=&gt;</span> <span class="p">(</span><span class="no">#f</span> <span class="no">#t</span> <span class="no">#t</span><span class="p">)</span>  <span class="c1">; if keyword-colon-position is after</span>
                 <span class="nv">=&gt;</span> <span class="p">(</span><span class="no">#t</span> <span class="no">#t</span> <span class="no">#t</span><span class="p">)</span>  <span class="c1">; if keyword-colon-position is both</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_hash_tables">4.15. Hash Tables</h3>
<div class="paragraph">
<p>
A hash table consists of zero or more entries, each consisting of a key
and a value. Given the key for an entry, the hashing function can very
quickly locate the entry, and hence the corresponding value. There may
be at most one entry in a hash table with a particular key, but many
entries may have the same value.</p>
</div>
<div class="paragraph">
<p><strong><em>STklos</em></strong> hash tables grow gracefully as the number of entries
increases, so that there are always less than three entries per hash
bucket, on average.  This allows for fast lookups regardless of the
number of entries in a table.</p>
</div>
<div class="paragraph">
<p><strong><em>STklos</em></strong> hash tables procedures are identical to the ones
defined in <strong><a href="http://srfi.schemers.org/srfi-69/srfi-69.html">SRFI-69</a></strong> (<em>Basic Hash Tables</em>). Note that the default comparison function
is <code>eq?</code> whereas it is <code>equal?</code> in this SRFI. See
SRFI&#8217;s documentation for more information.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(make-hash-table)</code></strong><br>
<strong><code>(make-hash-table comparison)</code></strong><br>
<strong><code>(make-hash-table comparison hash)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>Make-hash-table</code> admits three different forms.  The most general form
admit two arguments. The first argument is a comparison function which
determines how keys are compared; the second argument is a function which
computes a hash code for an object and returns the hash code as a non
negative integer. Objets with the same hash code are stored in an A-list
registered in the bucket corresponding to the key.</p>
</div>
<div class="paragraph">
<p>If omitted,</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>hash</code> defaults to the <code>hash-table-hash</code> procedure
(see <em><a href="_standard_procedures.html#hashtablehash"><code>hash-table-hash</code> primitive</a></em>).</p>
</li>
<li>
<p><code>comparison</code> defaults to the <code>eq?</code> procedure
(see <em><a href="_standard_procedures.html#eqprim"><code>eq?</code> primitive</a></em>)).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Consequently,</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">define</span> <span class="nv">h</span> <span class="p">(</span><span class="nf">make-hash-table</span><span class="p">))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>is equivalent to</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">define</span> <span class="nv">h</span> <span class="p">(</span><span class="nf">make-hash-table</span> <span class="nv">eq?</span> <span class="nv">hash-table-hash</span><span class="p">))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>An interesting example is</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">define</span> <span class="nv">h</span> <span class="p">(</span><span class="nf">make-hash-table</span> <span class="nv">string-ci=?</span> <span class="nv">string-length</span><span class="p">))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>which defines a new hash table which uses <code>string-ci=?</code> for
comparing keys. Here, we use the string-length as a (very simple)
hashing function. Of course, a function which gives a key depending
of the characters composing the string gives a better repartition
and should probably enhance performances. For instance, the following
call to <code>make-hash-table</code> should return a more efficient, even if
not perfect, hash table:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">make-hash-table</span>
   <span class="nv">string-ci=?</span>
   <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">s</span><span class="p">)</span>
     <span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">len</span> <span class="p">(</span><span class="nb">string-length</span> <span class="nv">s</span><span class="p">)))</span>
       <span class="p">(</span><span class="k">do</span> <span class="p">((</span><span class="nf">h</span> <span class="mi">0</span><span class="p">)</span>  <span class="p">(</span><span class="nf">i</span> <span class="mi">0</span> <span class="p">(</span><span class="nb">+</span> <span class="nv">i</span> <span class="mi">1</span><span class="p">)))</span>
           <span class="p">((</span><span class="nb">=</span> <span class="nv">i</span> <span class="nv">len</span><span class="p">)</span> <span class="nv">h</span><span class="p">)</span>
         <span class="p">(</span><span class="k">set!</span> <span class="nv">h</span>
               <span class="p">(</span><span class="nb">+</span> <span class="nv">h</span> <span class="p">(</span><span class="nb">char-&gt;integer</span>
                      <span class="p">(</span><span class="nb">char-downcase</span> <span class="p">(</span><span class="nb">string-ref</span> <span class="nv">s</span> <span class="nv">i</span><span class="p">)))))))))</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Hash tables with a comparison function equal to <code>eq?</code> or
<code>string=?</code> are handled in an more efficient way (in fact, they don&#8217;t use
the <code>hash-table-hash</code> function to speed up hash table retrievals).
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(hash-table? obj)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns <code>#t</code> if <code>obj</code> is a hash table, returns <code>#f</code> otherwise.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div id="hashtablehash" class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(hash-table-hash obj)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Computes a hash code for an object and returns this hash code as a
non negative integer. A property of <code>hash-table-hash</code> is that</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nb">equal?</span> <span class="nv">x</span> <span class="nv">y</span><span class="p">)</span> <span class="nv">=&gt;</span> <span class="p">(</span><span class="nb">equal?</span> <span class="p">(</span><span class="nf">hash-table-hash</span> <span class="nv">x</span><span class="p">)</span> <span class="p">(</span><span class="nf">hash-table-hash</span> <span class="nv">y</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>as the the Common Lisp <code>sxhash</code> function from which this procedure is
modeled.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(alist&#8594;hash-table alist)</code></strong><br>
<strong><code>(alist&#8594;hash-table alist comparison)</code></strong><br>
<strong><code>(alist&#8594;hash-table alist comparison hash)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns hash-table built from the <em>association list</em>
<code>alist</code>. This function maps the <code>car</code> of every element in <code>alist</code>
to the <code>cdr</code> of corresponding elements in <code>alist</code>. the <code>comparison</code> and
<code>hash</code> functions are interpreted as in <code>make-hash-table</code>. If some key
occurs multiple times in <code>alist</code>, the value in the first
association will take precedence over later ones.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(hash-table&#8594;alist hash)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns an <em>association list</em> built from the entries in <code>hash</code>.
Each entry in <code>hash</code> will be represented as a pair whose <code>car</code> is the
entry&#8217;s key and whose <code>cdr</code> is its value.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
the order of pairs in the resulting list is unspecified.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">h</span> <span class="p">(</span><span class="nf">make-hash-table</span><span class="p">)))</span>
  <span class="p">(</span><span class="nf">dotimes</span> <span class="p">(</span><span class="nf">i</span> <span class="mi">5</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">hash-table-set!</span> <span class="nv">h</span> <span class="nv">i</span> <span class="p">(</span><span class="nb">number-&gt;string</span> <span class="nv">i</span><span class="p">)))</span>
  <span class="p">(</span><span class="nf">hash-table-&gt;alist</span> <span class="nv">h</span><span class="p">))</span>
       <span class="nv">=&gt;</span> <span class="p">((</span><span class="nf">3</span> <span class="o">.</span> <span class="s">"3"</span><span class="p">)</span> <span class="p">(</span><span class="nf">4</span> <span class="o">.</span> <span class="s">"4"</span><span class="p">)</span> <span class="p">(</span><span class="nf">0</span> <span class="o">.</span> <span class="s">"0"</span><span class="p">)</span>
           <span class="p">(</span><span class="nf">1</span> <span class="o">.</span> <span class="s">"1"</span><span class="p">)</span> <span class="p">(</span><span class="nf">2</span> <span class="o">.</span> <span class="s">"2"</span><span class="p">))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(hash-table-set! hash key value)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Enters an association between <code>key</code> and <code>value</code> in the`hash` table.
The value returned by <code>hash-table-set!</code> is <strong><em>void</em></strong>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(hash-table-ref hash key)</code></strong><br>
<strong><code>(hash-table-ref hash key thunk)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the value associated with <code>key</code> in the given <code>hash</code> table. If no
value has been associated with <code>key</code> in <code>hash</code>, the specified <code>thunk</code> is
called and its value is returned; otherwise an error is raised.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">define</span> <span class="nv">h1</span> <span class="p">(</span><span class="nf">make-hash-table</span><span class="p">))</span>
<span class="p">(</span><span class="nf">hash-table-set!</span> <span class="nv">h1</span> <span class="ss">'foo</span> <span class="p">(</span><span class="nb">list</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">))</span>
<span class="p">(</span><span class="nf">hash-table-ref</span>  <span class="nv">h1</span> <span class="ss">'foo</span><span class="p">)</span>                 <span class="nv">=&gt;</span>  <span class="p">(</span><span class="nf">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span>
<span class="p">(</span><span class="nf">hash-table-ref</span>  <span class="nv">h1</span> <span class="ss">'bar</span>
                    <span class="p">(</span><span class="k">lambda</span> <span class="p">()</span> <span class="ss">'absent</span><span class="p">))</span>  <span class="nv">=&gt;</span>  <span class="nv">absent</span>
<span class="p">(</span><span class="nf">hash-table-ref</span>  <span class="nv">h1</span> <span class="ss">'bar</span><span class="p">)</span>                 <span class="nv">=&gt;</span>  <span class="nv">error</span>
<span class="p">(</span><span class="nf">hash-table-set!</span> <span class="nv">h1</span> <span class="o">'</span><span class="p">(</span><span class="nf">a</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">)</span> <span class="ss">'present</span><span class="p">)</span>
<span class="p">(</span><span class="nf">hash-table-ref</span>  <span class="nv">h1</span> <span class="o">'</span><span class="p">(</span><span class="nf">a</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">)</span>
                     <span class="p">(</span><span class="k">lambda</span> <span class="p">()</span> <span class="ss">'absent</span><span class="p">))</span> <span class="nv">=&gt;</span> <span class="nv">absent</span>

<span class="p">(</span><span class="k">define</span> <span class="nv">h2</span> <span class="p">(</span><span class="nf">make-hash-table</span> <span class="nv">equal?</span><span class="p">))</span>
<span class="p">(</span><span class="nf">hash-table-set!</span> <span class="nv">h2</span> <span class="o">'</span><span class="p">(</span><span class="nf">a</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">)</span> <span class="ss">'present</span><span class="p">)</span>
<span class="p">(</span><span class="nf">hash-table-ref</span>  <span class="nv">h2</span> <span class="o">'</span><span class="p">(</span><span class="nf">a</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">))</span>             <span class="nv">=&gt;</span> <span class="nv">present</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(hash-table-ref/default hash key default)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>This function is equivalent to</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">hash-table-ref</span> <span class="nv">hash</span> <span class="nv">key</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">()</span> <span class="nv">default</span><span class="p">))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(hash-table-delete! hash key)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Deletes the entry for <code>key</code> in <code>hash</code>, if it exists. Result of
<code>hash-table-delete!</code> is <strong><em>void</em></strong>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">define</span> <span class="nv">h</span> <span class="p">(</span><span class="nf">make-hash-table</span><span class="p">))</span>
<span class="p">(</span><span class="nf">hash-table-set!</span> <span class="nv">h</span> <span class="ss">'foo</span> <span class="p">(</span><span class="nb">list</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">))</span>
<span class="p">(</span><span class="nf">hash-table-ref</span> <span class="nv">h</span> <span class="ss">'foo</span><span class="p">)</span>                <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span>
<span class="p">(</span><span class="nf">hash-table-delete!</span> <span class="nv">h</span> <span class="ss">'foo</span><span class="p">)</span>
<span class="p">(</span><span class="nf">hash-table-ref</span> <span class="nv">h</span> <span class="ss">'foo</span>
                  <span class="p">(</span><span class="k">lambda</span> <span class="p">()</span> <span class="ss">'absent</span><span class="p">)</span>  <span class="nv">=&gt;</span> <span class="nv">absent</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(hash-table-exists? hash key)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns <code>#t</code> if there is any association of <code>key</code> in
<code>hash</code>. Returns <code>#f</code> otherwise.</p>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(hash-table-update! hash key update-fun thunk)</code></strong><br>
<strong><code>(hash-table-update!/default hash key update-fun default)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Update the value associated to <code>key</code> in table <code>hash</code> if key is already in
table with the value <code>(update-fun current-value)</code>. If no value is
associated to <code>key</code>, a new entry in the table is first inserted
before updating it (this new entry being the result of calling <code>thunk</code>).</p>
</div>
<div class="paragraph">
<p>Note that the expression</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">hash-table-update!/default</span> <span class="nv">hash</span> <span class="nv">key</span> <span class="nv">update-fun</span> <span class="nv">default</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>is equivalent to</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">hash-table-update!</span> <span class="nv">hash</span> <span class="nv">key</span> <span class="nv">update-fun</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">()</span> <span class="nv">default</span><span class="p">))</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">h</span>   <span class="p">(</span><span class="nf">make-hash-table</span><span class="p">))</span>
      <span class="p">(</span><span class="nf">1+</span>  <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">n</span><span class="p">)</span> <span class="p">(</span><span class="nb">+</span> <span class="nv">n</span> <span class="mi">1</span><span class="p">))))</span>
  <span class="p">(</span><span class="nf">hash-table-update!/default</span> <span class="nv">h</span> <span class="ss">'test</span> <span class="mi">1</span><span class="nv">+</span> <span class="mi">100</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">hash-table-update!/default</span> <span class="nv">h</span> <span class="ss">'test</span> <span class="mi">1</span><span class="nv">+</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">hash-table-ref</span> <span class="nv">h</span> <span class="ss">'test</span><span class="p">))</span>             <span class="nv">=&gt;</span> <span class="mi">102</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(hash-table-for-each hash proc)</code></strong><br>
<strong><code>(hash-table-walk hash proc)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>Proc</code> must be a procedure taking two arguments. <code>Hash-table-for-each</code>
calls <code>proc</code> on each key/value association in <code>hash</code>, with the key as
the first argument and the value as the second.  The value returned by
<code>hash-table-for-each</code> is <strong><em>void</em></strong>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The order of application of <code>proc</code> is unspecified.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>hash-table-walk</code> is another name for <code>hash-table-for-each</code>
(this is the name used in <strong><a href="http://srfi.schemers.org/srfi-69/srfi-69.html">SRFI-69</a></strong> (<em>Basic Hash Tables</em>).
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">h</span>   <span class="p">(</span><span class="nf">make-hash-table</span><span class="p">))</span>
      <span class="p">(</span><span class="nf">sum</span> <span class="mi">0</span><span class="p">))</span>
  <span class="p">(</span><span class="nf">hash-table-set!</span> <span class="nv">h</span> <span class="ss">'foo</span> <span class="mi">2</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">hash-table-set!</span> <span class="nv">h</span> <span class="ss">'bar</span> <span class="mi">3</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">hash-table-for-each</span> <span class="nv">h</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">key</span> <span class="nv">value</span><span class="p">)</span>
                           <span class="p">(</span><span class="k">set!</span> <span class="nv">sum</span> <span class="p">(</span><span class="nb">+</span> <span class="nv">sum</span> <span class="nv">value</span><span class="p">))))</span>
  <span class="nv">sum</span><span class="p">)</span>           <span class="nv">=&gt;</span>  <span class="mi">5</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(hash-table-map hash proc)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>Proc</code> must be a procedure taking two arguments. <code>Hash-table-map</code>
calls <code>proc</code> on each key/value association in <code>hash</code>, with the key as
the first argument and the value as the second.  The result of
<code>hash-table-map</code> is a list of the values returned by <code>proc</code>, in an
unspecified order.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The order of application of <code>proc</code> is unspecified.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">h</span> <span class="p">(</span><span class="nf">make-hash-table</span><span class="p">)))</span>
  <span class="p">(</span><span class="nf">dotimes</span> <span class="p">(</span><span class="nf">i</span> <span class="mi">5</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">hash-table-set!</span> <span class="nv">h</span> <span class="nv">i</span> <span class="p">(</span><span class="nb">number-&gt;string</span> <span class="nv">i</span><span class="p">)))</span>
  <span class="p">(</span><span class="nf">hash-table-map</span> <span class="nv">h</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">key</span> <span class="nv">value</span><span class="p">)</span>
                       <span class="p">(</span><span class="nb">cons</span> <span class="nv">key</span> <span class="nv">value</span><span class="p">))))</span>
             <span class="nv">=&gt;</span> <span class="p">((</span><span class="nf">3</span> <span class="o">.</span> <span class="s">"3"</span><span class="p">)</span> <span class="p">(</span><span class="nf">4</span> <span class="o">.</span> <span class="s">"4"</span><span class="p">)</span> <span class="p">(</span><span class="nf">0</span> <span class="o">.</span> <span class="s">"0"</span><span class="p">)</span> <span class="p">(</span><span class="nf">1</span> <span class="o">.</span> <span class="s">"1"</span><span class="p">)</span> <span class="p">(</span><span class="nf">2</span> <span class="o">.</span> <span class="s">"2"</span><span class="p">))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(hash-table-keys hash)</code></strong><br>
<strong><code>(hash-table-values hash)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the keys or the values of <code>hash</code>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(hash-table-fold hash func init-value)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>This procedure calls <code>func</code> for every association in <code>hash</code>
with three arguments: the key of the association key, the value
of the association value, and an accumulated value, <code>val</code>. <code>Val</code> is
init-value for the first invocation of <code>func</code>, and for subsequent
invocations of <code>func</code>, the return value of the previous invocation of
<code>func</code>. The value <code>final-value</code> returned by <code>hash-table-fold</code> is the
return value of the last invocation of <code>func</code>. The order in which <code>func</code> is
called for different associations is unspecified.</p>
</div>
<div class="paragraph">
<p>For instance, the following expression</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">hash-table-fold</span> <span class="nv">ht</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">k</span> <span class="nv">v</span> <span class="nv">acc</span><span class="p">)</span> <span class="p">(</span><span class="nb">+</span> <span class="nv">acc</span> <span class="mi">1</span><span class="p">))</span> <span class="mi">0</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>computes the number of associations present in the <code>ht</code> hash table.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(hash-table-copy hash)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns a copy of <code>hash</code>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(hash-table-merge! hash1 hash2)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Adds all mappings in <code>hash2</code> into <code>hash1</code> and returns the resulting
hash table. This function may modify <code>hash1</code> destructively.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(hash-table-equivalence-function hash)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the equivalence predicate used for keys in <code>hash</code>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(hash-table-hash-function hash)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the hash function used for keys in <code>hash</code>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(hash-table-size hash)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the number of entries in the <code>hash</code>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(hash-table-stats hash)</code></strong><br>
<strong><code>(hash-table-stats hash port)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Prints  overall information about <code>hash</code>, such as the number of entries
it contains, the number of buckets in its hash array, and the utilization
of the buckets. Informations are printed on <code>port</code>. If no <code>port</code> is given
to <code>hash-table-stats</code>, information are printed on the current output port
(see <em><a href="_standard_procedures.html#curroport"><code>current-output-port</code> primitive</a></em>).</p>
</div>
</div>
<div class="sect2">
<h3 id="_dates_and_times">4.16. Dates and Times</h3>
<div class="paragraph">
<p><strong><em>STklos</em></strong> stores dates and times with a compact
representation which consists is an integer which represents the
number of seconds elapsed since the <strong><em>Epoch</em></strong> (00:00:00 on
January 1, 1970, Coordinated Universal Time --UTC). Dates can
also be represented with date structures.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(current-second)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns an inexact number representing the current time on the
International Atomic Time (TAI) scale.  The value 0.0 represents
midnight on January 1, 1970 TAI (equivalent to ten seconds before
midnight Universal Time) and the value 1.0 represents one TAI
second later.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(current-seconds)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the time since the Epoch (that is 00:00:00 UTC, January 1, 1970),
measured in seconds.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This <strong><em>STklos</em></strong> function should not be confused with
the R<sup>7</sup>RS  primitive <code>current-second</code> which returns an inexact number
and whose result is expressed using  the International Atomic Time
instead of UTC.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(current-time)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns a time object corresponding to the current time.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(time? obj)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Return <code>#t</code> if <code>obj</code> is a time object, othererwise returns <code>#f</code>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(time&#8594;seconds time)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Convert the time object <code>time</code> into an inexact real number representing
the number of seconds elapsed since the Epoch.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">time-&gt;seconds</span> <span class="p">(</span><span class="nf">current-time</span><span class="p">))</span>  <span class="nv">==&gt;</span>  <span class="mf">1138983411.09337</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(seconds&#8594;time x)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Converts into a time object the real number <code>x</code> representing the number
of seconds elapsed since the Epoch.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">seconds-&gt;time</span> <span class="p">(</span><span class="nb">+</span> <span class="mi">10</span> <span class="p">(</span><span class="nf">time-&gt;seconds</span> <span class="p">(</span><span class="nf">current-time</span><span class="p">))))</span>
         <span class="nv">==&gt;</span>  <span class="nv">a</span> <span class="nv">time</span> <span class="nv">object</span> <span class="nv">representing</span> <span class="mi">10</span> <span class="nv">seconds</span> <span class="nv">in</span> <span class="nv">the</span> <span class="nv">future</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(current-date)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the current system date.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(make-date :key second minute hour day month year)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Build a date from its argument. <code>hour</code>, <code>minute</code>, <code>second</code> default to 0;
<code>day</code> and <code>month</code> default to 1; <code>year</code> defaults to 1970</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(date? obj)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Return <code>#t</code> if <code>obj</code> is a date, and otherwise returns <code>#f</code>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(date-second d)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Return the second of date <code>d</code>, in the range 0 to 59.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(date-minute d)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Return the minute of date <code>d</code>, in the range 0 to 59.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(date-hour d)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Return the hour of date <code>d</code>, in the range 0 to 23.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(date-day d)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Return the day of date <code>d</code>, in the range 1 to 31</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(date-month d)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Return the month of date <code>d</code>, in the range 1 to 12</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(date-year d)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Return the year of date <code>d</code>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(date-week-day d)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Return the week day of date <code>d</code>, in the range 0 to 6 (0 is Sunday).</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(date-year-day d)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Return the the number of days since January 1 of date <code>d</code>, in the range
1 to 366.</p>
</div>
<div id="datedst" class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(date-dst d)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Return an indication about daylight saving adjustment:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>0 if no daylight saving adjustment</p>
</li>
<li>
<p>1 if daylight saving adjustment</p>
</li>
<li>
<p>-1 if the information is not available</p>
</li>
</ul>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(date-tz d)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Return the time zone of date <code>d</code>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(date&#8594;seconds d)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Convert the date <code>d</code> to the number of seconds since the <em>Epoch"</em>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(date&#8594;string format d)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Convert the date <code>d</code> using the string <code>format</code> as a
specification. Conventions for format are the same as the one
of <em><a href="_standard_procedures.html#seconds2string">primitive <code>seconds&#8594;string</code></a></em>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(seconds&#8594;date n)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Convert the date <code>n</code> expressed as a number of seconds since the Epoch
to a date.</p>
</div>
<div id="seconds2string" class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(seconds&#8594;string format n)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Convert a date expressed in seconds using the string <code>format</code> as a
specification. Conventions for <code>format</code> are given below:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>~~</strong> a literal ~</p>
</li>
<li>
<p><strong>~a</strong> locale&#8217;s abbreviated weekday name (Sun&#8230;&#8203;Sat)</p>
</li>
<li>
<p><strong>~A</strong> locale&#8217;s full weekday name (Sunday&#8230;&#8203;Saturday)</p>
</li>
<li>
<p><strong>~b</strong> locale&#8217;s abbreviate month name (Jan&#8230;&#8203;Dec)</p>
</li>
<li>
<p><strong>~B</strong> locale&#8217;s full month day (January&#8230;&#8203;December)</p>
</li>
<li>
<p><strong>~c</strong> locale&#8217;s date and time
(e.g., ,(code "Fri Jul 14 20:28:42-0400 2000"))</p>
</li>
<li>
<p><strong>~d</strong> day of month, zero padded (01&#8230;&#8203;31)</p>
</li>
<li>
<p><strong>~D</strong> date (mm/dd/yy)</p>
</li>
<li>
<p><strong>~e</strong> day of month, blank padded ( 1&#8230;&#8203;31)</p>
</li>
<li>
<p><strong>~f</strong> seconds+fractional seconds, using locale&#8217;s
decimal separator (e.g. 5.2).</p>
</li>
<li>
<p><strong>~h</strong> same as ~b</p>
</li>
<li>
<p><strong>~H</strong> hour, zero padded, 24-hour clock (00&#8230;&#8203;23)</p>
</li>
<li>
<p><strong>~I</strong> hour, zero padded, 12-hour clock (01&#8230;&#8203;12)</p>
</li>
<li>
<p><strong>~j</strong> day of year, zero padded</p>
</li>
<li>
<p><strong>~k</strong> hour, blank padded, 24-hour clock (00&#8230;&#8203;23)</p>
</li>
<li>
<p><strong>~l</strong> hour, blank padded, 12-hour clock (01&#8230;&#8203;12)</p>
</li>
<li>
<p><strong>~m</strong> month, zero padded (01&#8230;&#8203;12)</p>
</li>
<li>
<p><strong>~M</strong> minute, zero padded (00&#8230;&#8203;59)</p>
</li>
<li>
<p><strong>~n</strong> new line</p>
</li>
<li>
<p><strong>~p</strong> locale&#8217;s AM or PM</p>
</li>
<li>
<p><strong>~r</strong> time, 12 hour clock, same as "~I:~M:~S ~p"</p>
</li>
<li>
<p><strong>~s</strong> number of full seconds since <em>the epoch</em> (in UTC)</p>
</li>
<li>
<p><strong>~S</strong> second, zero padded (00&#8230;&#8203;61)</p>
</li>
<li>
<p><strong>~t</strong> horizontal tab</p>
</li>
<li>
<p><strong>~T</strong> time, 24 hour clock, same as "~H:~M:~S"</p>
</li>
<li>
<p><strong>~U</strong> week number of year with Sunday as first day of week
(00&#8230;&#8203;53)</p>
</li>
<li>
<p><strong>~V</strong> weekISO 8601:1988 week number of year (01&#8230;&#8203;53)
(week 1 is the first week that has at least 4 days in
the current year, and  with  Monday  as  the first day
of the week)</p>
</li>
<li>
<p><strong>~w</strong> day of week (1&#8230;&#8203;7, 1 is Monday)</p>
</li>
<li>
<p><strong>~W</strong> week number of year with Monday as first day of week
(01&#8230;&#8203;52)</p>
</li>
<li>
<p><strong>~x</strong> week number of year with Monday as first day of week
(00&#8230;&#8203;53)</p>
</li>
<li>
<p><strong>~X</strong> locale&#8217;s date representation, for example: "07/31/00"</p>
</li>
<li>
<p><strong>~y</strong> last two digits of year (00&#8230;&#8203;99)</p>
</li>
<li>
<p><strong>~Y</strong> year</p>
</li>
<li>
<p><strong>~z</strong> time zone in RFC-822 style</p>
</li>
<li>
<p><strong>~Z</strong> symbol time zone</p>
</li>
</ul>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(seconds&#8594;list sec)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns a keyword list for the date given by <code>sec</code> (a date based on the
Epoch). The keyed values returned are</p>
</div>
<div class="ulist">
<ul>
<li>
<p>second : 0 to 59 (but can be up to 61 to allow for leap seconds)</p>
</li>
<li>
<p>minute : 0 to 59</p>
</li>
<li>
<p>hour : 0 to 23</p>
</li>
<li>
<p>day : 1 to 31</p>
</li>
<li>
<p>month : 1 to 12</p>
</li>
<li>
<p>year : e.g., 2002</p>
</li>
<li>
<p>week-day : 0 (Sunday) to 6 (Saturday)</p>
</li>
<li>
<p>year-day : 0 to 365 (365 in leap years)</p>
</li>
<li>
<p>dst : indication about daylight savings time
(see <em><a href="_standard_procedures.html#datedst">primitive <code>date-dst</code></a></em>).</p>
</li>
<li>
<p>tz : the difference between Coordinated Universal Time
(UTC) and local standard time in seconds.])</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">seconds-&gt;list</span> <span class="p">(</span><span class="nf">current-second</span><span class="p">))</span>
       <span class="nv">=&gt;</span> <span class="p">(</span><span class="o">#</span><span class="nv">:second</span> <span class="mi">21</span> <span class="o">#</span><span class="nv">:minute</span> <span class="mi">35</span> <span class="o">#</span><span class="nv">:hour</span> <span class="mi">20</span> <span class="o">#</span><span class="nv">:day</span> <span class="mi">10</span> <span class="o">#</span><span class="nv">:month</span> <span class="mi">1</span>
           <span class="o">#</span><span class="nv">:year</span> <span class="mi">2022</span> <span class="o">#</span><span class="nv">:week-day</span> <span class="mi">1</span> <span class="o">#</span><span class="nv">:year-day</span> <span class="mi">10</span> <span class="o">#</span><span class="nv">:dst</span> <span class="mi">0</span> <span class="o">#</span><span class="nv">:tz</span> <span class="mi">-3600</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(date)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the current date in a string.</p>
</div>
</div>
<div class="sect2">
<h3 id="_boxes">4.17. Boxes</h3>
<div class="paragraph">
<p>Boxes are objects which contain one or several states.  A box may
be constructed with the box, constant-box. <strong><em>STklos</em></strong> boxes are
compatible with the one defined in <strong><a href="http://srfi.schemers.org/srfi-111/srfi-111.html">SRFI-111</a></strong> (<em>Boxes</em>) or <strong><a href="http://srfi.schemers.org/srfi-195/srfi-195.html">SRFI-195</a></strong> (<em>Multiple-value boxes</em>).  Boxes of
SRFI-111 can contain only one value, whereas SRFI-195 boxes can contain multiple
values. Furthermore, <strong><em>STklos</em></strong> defines also the notion of constant boxes which
are not mutable.</p>
</div>
<div class="paragraph">
<p>The read primitive can also make single valued boxes (using the <code>#&amp;</code>
notation). Such boxes are mutable.</p>
</div>
<div class="paragraph">
<p>Note that two boxes are <code>equal?</code> <strong><em>iff</em></strong> their content are <code>equal?</code>.</p>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(box value &#8230;&#8203;)</code></strong><br>
<strong><code>(make-box value &#8230;&#8203;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns a new box that contains all the given `value`s.
The box is mutable.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">x</span> <span class="p">(</span><span class="nf">box</span> <span class="mi">10</span><span class="p">)))</span>
  <span class="p">(</span><span class="nb">list</span> <span class="mi">10</span> <span class="nv">x</span><span class="p">))</span>        <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">10</span> <span class="o">#</span><span class="nv">&amp;10</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The name <code>make-box</code> is now obsolete and kept only for compatibility.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(constant-box value &#8230;&#8203;)</code></strong><br>
<strong><code>(make-constant-box value &#8230;&#8203;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns a new box that contains all the given `value`s. The box is immutable.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The name <code>make-constant-box</code> is now obsolete and kept only for compatibility.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(box? obj)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns <code>#t</code> if <code>obj</code> is a box, <code>#f</code> otherwise.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(box-mutable? obj)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns <code>#t</code> if <code>obj</code> is a mutable box, <code>#f</code> otherwise.</p>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(set-box! box value &#8230;&#8203;)</code></strong><br>
<strong><code>(box-set! box value &#8230;&#8203;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Changes <code>box</code> to hold <code>value`s. It is an error if `set-box!</code> is called
with a number of values that differs from the number of values in the box
being set. (In other words, <code>set-box!</code> does not allocate memory.)
It is also an error to call <code>set-box!</code> on a box which is not mutable.</p>
</div>
<div class="paragraph">
<p>The name <code>box-set!</code> is now obsolete and kept only for compatibility.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(unbox box)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the values currently in <code>box</code>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(box-arity box)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the number of values in <code>box</code>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(unbox-value box i)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the <code>i</code>th value of <code>box</code>. It is an error if <code>i</code> is not an exact integer
between 0 and <code>n</code>-1, when <code>n</code> is the number of values in <code>box</code>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(set-box-value! box i obj)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Changes the <code>i</code>th value of <code>box</code> to <code>obj</code>. It is an error if <code>i</code> is not an
exact integer between 0 and <code>n</code>-1, when <code>n</code> is the number of values in <code>box</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_processes">4.18. Processes</h3>
<div class="paragraph">
<p>

<strong><em>STklos</em></strong> provides access to Unix processes as first class objects.
Basically, a process contains several informations such as the standard
system process identification (aka PID on Unix Systems), the files where
the standard files of the process are redirected.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(run-process command p1 p2 &#8230;&#8203;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>run-process</code> creates a new process and run the executable
specified in <code>command</code>. The <code>p</code> correspond to the command line
arguments. The following values of <code>p</code> have a special meaning:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>:input</code> permits to redirect the standard input file of the
process. Redirection can come from a file or from a pipe. To redirect
the standard input from a file, the name of this file must be
specified after <code>:input</code>. Use the special keyword <code>:pipe</code> to
redirect the standard input from a pipe.</p>
</li>
<li>
<p><code>:output</code> permits to redirect the standard output file of the
process. Redirection can go to a file or to a pipe. To redirect
the standard output to a file, the name of this file must be
specified after <code>:output</code>. Use the special keyword <code>:pipe</code> to
redirect the standard output to a pipe.</p>
</li>
<li>
<p><code>:error</code> permits to redirect the standard error file of the
process. Redirection can go to a file or to a pipe. To redirect
the standard error to a file, the name of this file must be
specified after <code>error</code>. Use the special keyword <code>:pipe</code> to
redirect the standard error to a pipe.</p>
</li>
<li>
<p><code>:wait</code> must be followed by a boolean value. This value
specifies if the process must be run asynchronously or not. By
default, the process is run asynchronously (i.e. <code>:wait</code> is <code>#f</code>).</p>
</li>
<li>
<p><code>:host</code> must be followed by a string. This string represents
the name of the machine on which the command must be executed. This
option uses the external command <code>rsh</code>. The shell variable
<code>PATH</code> must be correctly set for accessing it without specifying its
abolute path.</p>
</li>
<li>
<p><code>:fork</code> must be followed by a boolean value. This value
specifies if a <em>fork"</em> system call must be done before running
the process. If the process is run without <em>fork</em> the Scheme
program is lost. This feature mimics the <code>``exec&#8217;' primitive of the
Unix shells. By default, a fork is executed before running the process
(i.e. `:fork</code> is <code>#t</code>). This option works on Unix implementations only.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following example launches a process which executes the
Unix command <code>ls</code> with the arguments <code>-l</code> and <code>/bin</code>. The lines
printed by this command are stored in the file <code>/tmp/X</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">run-process</span> <span class="s">"ls"</span> <span class="s">"-l"</span> <span class="s">"/bin"</span> <span class="nv">:output</span> <span class="s">"/tmp/X"</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(process? obj)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns <code>#t</code> if <code>obj</code> is a process , otherwise returns <code>#f</code>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(process-alive? proc)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns <code>#t</code> if process <code>proc</code> is currently running, otherwise returns <code>#f</code>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(process-pid proc)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns an integer which represents the Unix identification (PID) of the
processus.</p>
</div>
<div class="paragraph">
<p>

</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(process-input proc)</code></strong><br>
<strong><code>(process-output proc)</code></strong><br>
<strong><code>(process-error proc)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the file port associated to the standard input, output or error
of <code>proc</code>, if it is redirected in (or to) a pipe; otherwise
returns <code>#f</code>. Note that the returned port is opened for reading
when calling <code>process-output</code> or <code>process-error</code>; it is opened
for writing when calling <code>process-input</code>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(process-wait proc)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Stops the current process (the Scheme process) until <code>proc</code> completion.
<code>Process-wait</code> returns <code>#f</code> when <code>proc</code> is already terminated; it returns
<code>#t</code> otherwise.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(process-exit-status proc)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the exit status of <code>proc</code> if it has finished its execution;
returns <code>#f</code> otherwise.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(process-signal proc sig)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Sends the integer signal <code>sig</code> to <code>proc</code>. Since value of <code>sig</code> is system
dependant, use the symbolic defined signal constants to make your program
independant of the running system (see <a href="_standard_procedures.html#_signals">Section 4.20</a>).
The result of <code>process-signal</code> is <strong><em>void</em></strong>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(process-kill proc)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Kills (brutally) <code>process</code>. The result of <code>process-kill</code>
is <em>void</em>. This procedure is equivalent to</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">process-signal</span> <span class="nv">process</span> <span class="ss">'SIGTERM</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(process-stop proc)</code></strong><br>
<strong><code>(process-continue proc)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>Process-stop</code> stops the execution of <code>proc</code> and <code>process-continue</code> resumes
its execution. They are equivalent, respectively, to</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">process-signal</span> <span class="nv">process</span> <span class="ss">'SIGSTOP</span><span class="p">)</span>
<span class="p">(</span><span class="nf">process-signal</span> <span class="nv">process</span> <span class="ss">'SIGCONT</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(process-list)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the list of processes which are currently running (i.e. alive).</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(fork)</code></strong><br>
<strong><code>(fork thunk)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>This procedure is a wrapper around the standard Unix <code>fork</code> system
call which permits to create a new (heavy) process.
When called without parameter, this procedure returns two times
(one time in the parent process and one time in the child process).
The value returned in the parent process is a process object
representing the child process and the value returned in the child
process is always the value <code>#f</code>.
When called with a parameter (which must be a thunk), the new process
excutes <code>thunk</code> and terminate it execution when <code>thunk</code> returns. The
value returned in the parent process is a process object representing
the child process.</p>
</div>
</div>
<div class="sect2">
<h3 id="_sockets">4.19. Sockets</h3>
<div class="paragraph">
<p>
<strong><em>STklos</em></strong> defines <strong>sockets</strong>, on systems which support them,
as first class objects. Sockets permits processes to communicate even if
they are on different machines. Sockets are useful for creating client-server
applications.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(make-client-socket hostname port-number)</code></strong><br>
<strong><code>(make-client-socket hostname port_number line-buffered)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>make-client-socket</code> returns a new socket object. This socket
establishes a link between the running program and the application
listening on port <code>port-number</code> of <code>hostname</code>.  If  the optional argument
<code>line-buffered</code> has a true value, a line buffered policy is used when writing
to the client socket (i.e. characters on the socket are tranmitted as soon
as a <code>"#\newline</code> character is encountered). The default value of
<code>line-buffered</code> is <code>#t</code>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(make-server-socket)</code></strong><br>
<strong><code>(make-server-socket port-number)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>make-server-socket</code> returns a new socket object. If <code>port-number</code>
is specified, the socket is listening on the specified port;
otherwise, the communication port is chosen by the system.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(socket-shutdown sock)</code></strong><br>
<strong><code>(socket-shutdown sock close)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>Socket-shutdown</code> shutdowns the connection associated to
<code>socket</code>. If the socket is a server socket, <code>socket-shutdown</code> is called
on all the client sockets connected to this server.
<code>Close</code> indicates if the the socket must be closed or not, when
the connection is destroyed. Closing the socket forbids further
connections on the same port with the <code>socket-accept</code> procedure.
Omitting a value for <code>close</code> implies the closing of socket.</p>
</div>
<div class="paragraph">
<p>The following example shows a simple server: when there is
a new connection on the port number 12345, the server displays
the first line sent to it by the client, discards the others and
go back waiting for further client connections.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">s</span> <span class="p">(</span><span class="nf">make-server-socket</span> <span class="mi">12345</span><span class="p">)))</span>
   <span class="p">(</span><span class="k">let</span> <span class="nv">loop</span> <span class="p">()</span>
      <span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">ns</span> <span class="p">(</span><span class="nf">socket-accept</span> <span class="nv">s</span><span class="p">)))</span>
        <span class="p">(</span><span class="nf">format</span> <span class="no">#t</span> <span class="s">"I've read: ~A\\n"</span>
                <span class="p">(</span><span class="nf">read-line</span> <span class="p">(</span><span class="nf">socket-input</span> <span class="nv">ns</span><span class="p">)))</span>
        <span class="p">(</span><span class="nf">socket-shutdown</span> <span class="nv">ns</span> <span class="no">#f</span><span class="p">)</span>
        <span class="p">(</span><span class="nf">loop</span><span class="p">))))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(socket-accept socket)</code></strong><br>
<strong><code>(socket-accept socket line-buffered)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>socket-accept</code> waits for a client connection on the given
<code>socket</code>. If no client is already waiting for a connection, this
procedure blocks its caller; otherwise, the first connection request
on the queue of pending connections is connected and <code>socket-accept</code>
returns a new client socket to serve this request.
This procedure must be called on a server socket created
with <code>make-server-socket</code>. The result of <code>socket-accept</code> is undefined.
<code>Line-buffered</code> indicates if the port should be considered as a
line buffered. If <code>line-buffered</code> is omitted, it defaults to <code>#t</code>.</p>
</div>
<div class="paragraph">
<p>The following example is a simple server which waits for a connection
on the port 12345 <sup class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup></p>
</div>
<div class="paragraph">
<p>Once the connection with the distant program is established, we read
a line on the input port  associated to the socket and we write the
length of this line on its output port.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">let*</span> <span class="p">((</span><span class="nf">server</span> <span class="p">(</span><span class="nf">make-server-socket</span> <span class="mi">12345</span><span class="p">))</span>
       <span class="p">(</span><span class="nf">client</span> <span class="p">(</span><span class="nf">socket-accept</span> <span class="nv">server</span><span class="p">))</span>
       <span class="p">(</span><span class="nf">l</span>      <span class="p">(</span><span class="nf">read-line</span> <span class="p">(</span><span class="nf">socket-input</span> <span class="nv">client</span><span class="p">))))</span>
  <span class="p">(</span><span class="nf">format</span> <span class="p">(</span><span class="nf">socket-output</span> <span class="nv">client</span><span class="p">)</span>
          <span class="s">"Length is: ~a\n"</span> <span class="p">(</span><span class="nb">string-length</span> <span class="nv">l</span><span class="p">))</span>
  <span class="p">(</span><span class="nf">socket-shutdown</span> <span class="nv">server</span><span class="p">))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that shutting down the <code>server</code> socket suffices here to close
also the connection to <code>client</code>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(socket? obj)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns <code>#t</code> if <code>socket</code> is a socket, otherwise returns <code>#f</code>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(socket-server? obj)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns <code>#t</code> if <code>socket</code> is a server socket, otherwise returns <code>#f</code>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(socket-client? obj)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns <code>#t</code> if <code>socket</code> is a client socket, otherwise returns <code>#f</code>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(socket-host-name socket)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns a string which contains the name of the distant host
attached to <code>socket</code>. If <code>socket</code> has been created with
<code>make-client-socket</code> this procedure returns the official name of
the distant machine used for connection. If <code>socket</code> has been
created with <code>make-server-socket</code>, this function returns the
 official name of the client connected to the socket. If no client
has used yet <code>socket</code>, this function returns <code>#f</code>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(socket-host-address socket)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns a string which contains the IP number of the distant host
attached to <code>socket</code>. If <code>socket</code> has been created with
<code>make-client-socket</code> this procedure returns the IP number of the
distant machine used for connection. If <code>socket</code> has been created
with <code>make-server-socket</code>, this function returns the address of the
client connected to the socket.  If no client has used yet
<code>socket</code>, this function returns <code>#f</code>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(socket-local-address socket)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns a string which contains the IP number of the local host
attached to <code>socket</code>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(socket-port-number socket)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the integer number of the port used for <code>socket</code>.</p>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(socket-input socket)</code></strong><br>
<strong><code>(socket-output socket)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the port associated for reading or writing with the
program connected with <code>socket</code>. Note that this port is both textual
and binary. If no connection has already been established,
these functions return <code>#f</code>.</p>
</div>
<div class="paragraph">
<p>The following example shows how to make a client socket. Here we
create a socket on port 13 of the machine
<code>kaolin.unice.fr</code> <sup class="footnote">[<a id="_footnoteref_2" class="footnote" href="#_footnotedef_2" title="View footnote.">2</a>]</sup>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">s</span> <span class="p">(</span><span class="nf">make-client-socket</span> <span class="s">"kaolin.unice.fr"</span> <span class="mi">13</span><span class="p">)))</span>
  <span class="p">(</span><span class="nf">format</span> <span class="no">#t</span> <span class="s">"Time is: ~A~%"</span> <span class="p">(</span><span class="nf">read-line</span> <span class="p">(</span><span class="nf">socket-input</span> <span class="nv">s</span><span class="p">)))</span>
  <span class="p">(</span><span class="nf">socket-shutdown</span>  <span class="nv">s</span><span class="p">))</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_signals">4.20. Signals</h3>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
This section needs to be written
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_parameter_objects">4.21. Parameter Objects</h3>
<div class="paragraph">
<p><strong><em>STklos</em></strong> parameters correspond to the ones defined in <strong><a href="http://srfi.schemers.org/srfi-39/srfi-39.html">SRFI-39</a></strong> (<em>Parameters objects</em>).
See SRFI document for more information.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(make-parameter init)</code></strong><br>
<strong><code>(make-parameter init converter)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns a new parameter object which is bound in the global dynamic
environment to a cell containing the value returned by the call
<code>(converter init)</code>. If the conversion procedure <code>converter</code> is not
specified the identity function is used instead.</p>
</div>
<div class="paragraph">
<p>The parameter object is a procedure which accepts zero or one
argument. When it is called with no argument, the content of the
cell bound to this parameter object in the current dynamic
environment is returned. When it is called with one argument, the
content of the cell bound to this parameter object in the current
dynamic environment is set to the result of the call
<code>(converter arg)</code>, where <code>arg</code> is the argument passed to the
parameter object, and
an unspecified value is returned.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">define</span> <span class="nv">radix</span>
    <span class="p">(</span><span class="nf">make-parameter</span> <span class="mi">10</span><span class="p">))</span>

<span class="p">(</span><span class="k">define</span> <span class="nv">write-shared</span>
   <span class="p">(</span><span class="nf">make-parameter</span>
      <span class="no">#f</span>
      <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">x</span><span class="p">)</span>
        <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">boolean?</span> <span class="nv">x</span><span class="p">)</span>
            <span class="nv">x</span>
            <span class="p">(</span><span class="nf">error</span> <span class="ss">'write-shared</span> <span class="s">"bad boolean ~S"</span> <span class="nv">x</span><span class="p">)))))</span>

 <span class="p">(</span><span class="nf">radix</span><span class="p">)</span>           <span class="nv">=&gt;</span>  <span class="mi">10</span>
 <span class="p">(</span><span class="nf">radix</span> <span class="mi">2</span><span class="p">)</span>
 <span class="p">(</span><span class="nf">radix</span><span class="p">)</span>           <span class="nv">=&gt;</span>  <span class="mi">2</span>
 <span class="p">(</span><span class="nf">write-shared</span> <span class="mi">0</span><span class="p">)</span>  <span class="nv">=&gt;</span> <span class="nv">error</span>

 <span class="p">(</span><span class="k">define</span> <span class="nv">prompt</span>
   <span class="p">(</span><span class="nf">make-parameter</span>
     <span class="mi">123</span>
     <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">x</span><span class="p">)</span>
       <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">string?</span> <span class="nv">x</span><span class="p">)</span>
           <span class="nv">x</span>
           <span class="p">(</span><span class="nf">with-output-to-string</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">()</span> <span class="p">(</span><span class="nb">write</span> <span class="nv">x</span><span class="p">)))))))</span>

 <span class="p">(</span><span class="nf">prompt</span><span class="p">)</span>       <span class="nv">=&gt;</span>  <span class="s">"123"</span>
 <span class="p">(</span><span class="nf">prompt</span> <span class="s">"&gt;"</span><span class="p">)</span>
 <span class="p">(</span><span class="nf">prompt</span><span class="p">)</span>       <span class="nv">=&gt;</span>  <span class="s">"&gt;"</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> syntax</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(parameterize ((expr1 expr2) &#8230;&#8203;) &lt;body&gt;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>The expressions <code>expr1</code> and <code>expr2</code> are evaluated in an unspecified order.
The value of the <code>expr1</code> expressions must be parameter objects.
For each <code>expr1</code> expression and in an unspecified order, the local
dynamic environment is extended with a binding of the parameter object
<code>expr1</code> to a new cell whose content is the result of the call
<code>(converter val)</code>, where <code>val</code> is the value of <code>expr2</code> and converter
is the conversion procedure of the parameter object. The resulting
dynamic environment is then used for the evaluation of <code>&lt;body&gt;</code>
(which refers to the R<sup>5</sup>RS grammar nonterminal of that name).
The result(s) of the parameterize form are the result(s) of
the <code>&lt;body&gt;</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">radix</span><span class="p">)</span>                                              <span class="nv">=&gt;</span>  <span class="mi">2</span>
<span class="p">(</span><span class="nf">parameterize</span> <span class="p">((</span><span class="nf">radix</span> <span class="mi">16</span><span class="p">))</span> <span class="p">(</span><span class="nf">radix</span><span class="p">))</span>                  <span class="nv">=&gt;</span>  <span class="mi">16</span>
<span class="p">(</span><span class="nf">radix</span><span class="p">)</span>                                              <span class="nv">=&gt;</span>  <span class="mi">2</span>

<span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="nf">f</span> <span class="nv">n</span><span class="p">)</span> <span class="p">(</span><span class="nb">number-&gt;string</span> <span class="nv">n</span> <span class="p">(</span><span class="nf">radix</span><span class="p">)))</span>

<span class="p">(</span><span class="nf">f</span> <span class="mi">10</span><span class="p">)</span>                                               <span class="nv">=&gt;</span>  <span class="s">"1010"</span>
<span class="p">(</span><span class="nf">parameterize</span> <span class="p">((</span><span class="nf">radix</span> <span class="mi">8</span><span class="p">))</span> <span class="p">(</span><span class="nf">f</span> <span class="mi">10</span><span class="p">))</span>                    <span class="nv">=&gt;</span>  <span class="s">"12"</span>
<span class="p">(</span><span class="nf">parameterize</span> <span class="p">((</span><span class="nf">radix</span> <span class="mi">8</span><span class="p">)</span> <span class="p">(</span><span class="nf">prompt</span> <span class="p">(</span><span class="nf">f</span> <span class="mi">10</span><span class="p">)))</span> <span class="p">(</span><span class="nf">prompt</span><span class="p">))</span>  <span class="nv">=&gt;</span>  <span class="s">"1010"</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(parameter? obj)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns <code>#t</code> if <code>obj</code> is a parameter object, otherwise returns <code>#f</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_misc">4.22. Misc</h3>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(gc)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Force a garbage collection step.</p>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(void)</code></strong><br>
<strong><code>(void arg1 &#8230;&#8203;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the special <strong><em>void</em></strong> object. If arguments are passed to <code>void</code>,
they are evalued and simply ignored.</p>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(error str obj &#8230;&#8203;)</code></strong><br>
<strong><code>(error name str obj &#8230;&#8203;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>error</code> is used to signal an error to the user. The second form
of <code>error</code> takes  a symbol as first parameter; it is generally used for the
name of the procedure which raises the error.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The specification string may follow the <em>tilde conventions</em> of
<code>format</code> (see <em><a href="_standard_procedures.html#format">primitive <code>format</code></a></em>); in this case this
procedure builds an error message according to the specification
given in <code>str</code>. Otherwise,
this procedure is conform to the <code>error</code> procedure defined in
<strong><a href="http://srfi.schemers.org/srfi-23/srfi-23.html">SRFI-23</a></strong> (<em>Error reporting mechanism</em>) and  <code>str</code> is printed with the <code>display</code> procedure,
whereas the <code>obj`s are printed  with the `write</code> procedure.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Hereafter, are some calls of the <code>error</code> procedure using a formatted string</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">error</span> <span class="s">"bad integer ~A"</span> <span class="s">"a"</span><span class="p">)</span>
                     <span class="nv">|-</span> <span class="nv">bad</span> <span class="nv">integer</span> <span class="nv">a</span>
<span class="p">(</span><span class="nf">error</span> <span class="ss">'vector-ref</span> <span class="s">"bad integer ~S"</span> <span class="s">"a"</span><span class="p">)</span>
                     <span class="nv">|-</span> <span class="nv">vector-ref:</span> <span class="nv">bad</span> <span class="nv">integer</span> <span class="s">"a"</span>
<span class="p">(</span><span class="nf">error</span> <span class="ss">'foo</span> <span class="s">"~A is not between ~A and ~A"</span> <span class="s">"bar"</span> <span class="mi">0</span> <span class="mi">5</span><span class="p">)</span>
                     <span class="nv">|-</span> <span class="nv">foo:</span> <span class="nv">bar</span> <span class="nv">is</span> <span class="nv">not</span> <span class="nv">between</span> <span class="mi">0</span> <span class="nv">and</span> <span class="mi">5</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>and some conform to <strong><a href="http://srfi.schemers.org/srfi-23/srfi-23.html">SRFI-23</a></strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">error</span> <span class="s">"bad integer"</span> <span class="s">"a"</span><span class="p">)</span>
                    <span class="nv">|-</span> <span class="nv">bad</span> <span class="nv">integer</span> <span class="s">"a"</span>
<span class="p">(</span><span class="nf">error</span> <span class="ss">'vector-ref</span> <span class="s">"bad integer"</span> <span class="s">"a"</span><span class="p">)</span>
                   <span class="nv">|-</span> <span class="nv">vector-ref:</span> <span class="nv">bad</span> <span class="nv">integer</span> <span class="s">"a"</span>
<span class="p">(</span><span class="nf">error</span> <span class="s">"bar"</span> <span class="s">"is not between"</span> <span class="mi">0</span> <span class="s">"and"</span> <span class="mi">5</span><span class="p">)</span>
                   <span class="nv">|-</span> <span class="nv">bar</span> <span class="s">"is not between"</span> <span class="mi">0</span> <span class="s">"and"</span> <span class="mi">5</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(signal-error cond str obj &#8230;&#8203;)</code></strong><br>
<strong><code>(signal-error cond name str obj &#8230;&#8203;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>This procedure is similar to error, except that the type of the error
can be passed as the first parameter. The type of the error must be a
condition which inherits from <code>&amp;error-message</code>.</p>
</div>
<div class="paragraph">
<p>Note that <code>(error arg &#8230;&#8203;)</code> is equivalent to</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">signal-error</span> <span class="nv">&amp;error-message</span> <span class="nv">arg</span> <span class="o">...</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(read-error? obj)</code></strong><br>
<strong><code>(file-error? obj)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Error type predicates. Returns #t if <code>obj</code> is an object raised
by the read procedure or by the inability to open an input or
output port on a file, respectively. Otherwise, it returns #f.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(error-object? obj )</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns #t if obj is an object created by error. Otherwise,
it returns #f.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(error-object-message error-object)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the message encapsulated by <code>error-object</code>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(error-object-irritants error-object)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the message encapsulated by <code>error-object</code>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(error-object-location error-object)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the location encapsulated by <code>error-object</code> if it exists.
Returns #f otherwise. The location corresponds generally to the name
of the procedure which raised the error.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">guard</span> <span class="p">(</span><span class="nf">cnd</span>
         <span class="p">(</span><span class="k">else</span> <span class="p">(</span><span class="nf">error-object-location</span> <span class="nv">cnd</span><span class="p">)))</span>
  <span class="p">(</span><span class="nf">error</span> <span class="ss">'foo</span> <span class="s">"error message"</span><span class="p">))</span>  <span class="nv">=&gt;</span> <span class="nv">foo</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> syntax</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(require-extension &lt;clause&gt; &#8230;&#8203;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>The syntax of require-extension is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">require-extension</span> <span class="nv">&lt;clause&gt;</span> <span class="o">...</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>A clause has the form:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"> <span class="p">(</span><span class="nf">srfi</span> <span class="nv">&lt;extension-argument&gt;</span> <span class="o">...</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>where <code>&lt;extension-argument&gt;</code>s may be any Scheme-values.</p>
</div>
<div class="paragraph">
<p>If an <code>&lt;extension-argument&gt;</code> is a nonnegative integer, the functionality
of the indicated SRFIs is made available in the context in
which the require-extension form appears. For instance,</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">require-extension</span> <span class="p">(</span><span class="nf">srfi</span> <span class="mi">1</span> <span class="mi">2</span><span class="p">))</span>
               <span class="c1">; Make the SRFI 1 and 2 available</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This form is compatible with <strong><a href="http://srfi.schemers.org/srfi-55/srfi-55.html">SRFI-55</a></strong> (<em>Require-extension</em>). However, STklos
accepts also some symbolic names for requiring some extensions.
For instance,</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">require-extension</span> <span class="p">(</span><span class="nf">srfi</span> <span class="nv">lists</span> <span class="nv">and-let*</span><span class="p">))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>is equivalent to the previous <code>require-extension</code>. A list of available
symbols as <code>&lt;extension-argument&gt;</code> is given in <a href="_srfis.html">Chapter 14</a>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(require-feature feature)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>This primitive ensures that the <code>feature</code> (in sense of SRFI-0 feature)
can be used. In particular, it eventually requires the loading of the
files needed to used <code>feature</code>. The <code>feature</code> can be expressed as a
string or a symbol, If feature is an integer <code>n</code>, it is equivalent to <code>srfi-n</code>.
Consequently, to use <strong><a href="http://srfi.schemers.org/srfi-1/srfi-1.html">SRFI-1</a></strong> the following forms are equivalent:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">require-feature</span> <span class="ss">'srfi-1</span><span class="p">)</span>
<span class="p">(</span><span class="nf">require-feature</span> <span class="s">"srfi-1"</span><span class="p">)</span>
<span class="p">(</span><span class="nf">require-feature</span> <span class="mi">1</span><span class="p">)</span>
<span class="p">(</span><span class="nf">require-feature</span> <span class="ss">'lists</span><span class="p">)</span>      <span class="c1">;; Since this feature name is an alias for SRFI-1</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>See also <a href="_srfis.html">Chapter 14</a> for more information.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(repl)</code></strong><br>
<strong><code>(repl :in inport :out outport :err errport)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>This procedure launches a new Read-Eval-Print-Loop. Calls to <code>repl</code> can be
embedded. The ports used for input/output as well as the error port can
be passed when <code>repl</code> is called. If not passed, they default to
<code>current-input-port</code>, <code>current-output-port</code> and <code>current-error-port</code>.</p>
</div>
<div id="assume" class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> syntax</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(assume obj &#8230;&#8203;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>The special form <code>assume</code> is defined in <strong><a href="http://srfi.schemers.org/srfi-145/srfi-145.html">SRFI-145</a></strong> (<em>Assumptions</em>).
When <strong><em>STklos</em></strong> is in debug mode, this special form is an expression
that evaluates to the value of <code>obj</code> if <code>obj</code> evaluates to a true
value and it is an error if <code>obj</code> evaluates to a false value.</p>
</div>
<div class="paragraph">
<p>When <strong><em>STklos</em></strong> is not in debug mode, the call to <code>assume</code> is elided.</p>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(version-alist)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>This function returns an association list of STklos properties as defined by
<strong><a href="http://srfi.schemers.org/srfi-176/srfi-176.html">SRFI-176</a></strong> (<em>Version flag</em>).</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(apropos obj)</code></strong><br>
<strong><code>(apropos obj module)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>Apropos</code> returns a list of symbols whose print name contains the
characters of <code>obj</code> as a substring . The given <code>obj</code> can be a string or
symbol. This function returns the list of matched symbols which can
be accessed from the given <code>module</code> (defaults to the current module if not
provided).</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(help obj)</code></strong><br>
<strong><code>(help)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>When called with an argument, <code>help</code> tries to give some help on the
given object, which could be a symbol, a procedure, a generic function
or a method. Whe called called without arguments, <code>help</code> enters a
read-help-print loop. The documentation for an object is searched in
the object itself or, if absent, in STklos documentation.  Inserting
the documentation in an objet is very similar to Emacs docstrings: a
documentation string is defined among the code. Exemples of such
strings are given below</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="nf">foo</span> <span class="nv">n</span><span class="p">)</span>
  <span class="s">"If the function body starts with a string, it's a docstring"</span>
  <span class="p">(</span><span class="nb">+</span> <span class="nv">n</span> <span class="mi">1</span><span class="p">))</span>

<span class="p">(</span><span class="nf">define-generic</span> <span class="nv">bar</span>
  <span class="nv">:documentation</span> <span class="s">"Generic function docsting for bar"</span><span class="p">)</span>

<span class="p">(</span><span class="nf">define-method</span> <span class="nv">bar</span> <span class="p">((</span><span class="nf">x</span> <span class="nv">&lt;integer&gt;</span><span class="p">))</span>
  <span class="s">"Probably less useful: as in functions, methods can have docstrings"</span>
  <span class="p">(</span><span class="nb">-</span> <span class="nv">x</span> <span class="mi">1</span><span class="p">))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(describe obj)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Shows a brief description of <code>obj</code>. If the object is structured
such as a struct, class or instance, some information about its
internal structure will be shown.</p>
</div>
<div class="paragraph">
<p><strong>Using <code>describe</code> on simple values</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">describe</span> <span class="mi">5</span><span class="p">)</span>
  <span class="mi">5</span> <span class="nv">is</span> <span class="nv">an</span> <span class="nv">integer</span><span class="o">.</span>

<span class="p">(</span><span class="nf">describe</span> <span class="mf">5.4</span><span class="p">)</span>
  <span class="mf">5.4</span> <span class="nv">is</span> <span class="nv">a</span> <span class="nv">real</span><span class="o">.</span>

<span class="p">(</span><span class="nf">describe</span> <span class="mi">2</span><span class="nv">+3i</span><span class="p">)</span>
  <span class="mi">2</span><span class="nv">+3i</span> <span class="nv">is</span> <span class="nv">a</span> <span class="nv">complex</span> <span class="nv">number</span><span class="o">.</span>

<span class="p">(</span><span class="nf">describe</span> <span class="sc">#\A</span><span class="p">)</span>
  <span class="sc">#\A</span> <span class="nv">is</span> <span class="nv">a</span> <span class="nv">character,</span> <span class="nv">ascii</span> <span class="nv">value</span> <span class="nv">is</span> <span class="mi">65</span><span class="o">.</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Using `describe on a class</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">describe</span> <span class="nv">&lt;integer&gt;</span><span class="p">)</span>
  <span class="nv">&lt;integer&gt;</span> <span class="nv">is</span> <span class="nv">a</span> <span class="nv">class</span><span class="o">.</span> <span class="nv">It</span><span class="ss">'s</span> <span class="nv">an</span> <span class="nv">instance</span> <span class="nv">of</span> <span class="nv">&lt;class&gt;</span><span class="o">.</span>
  <span class="nv">Superclasses</span> <span class="nv">are:</span>
      <span class="nv">&lt;rational&gt;</span>
  <span class="p">(</span><span class="nf">No</span> <span class="nv">direct</span> <span class="nv">slot</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">No</span> <span class="nv">direct</span> <span class="nv">subclass</span><span class="p">)</span>
  <span class="nv">Class</span> <span class="nv">Precedence</span> <span class="nv">List</span> <span class="nv">is:</span>
      <span class="nv">&lt;integer&gt;</span>
      <span class="nv">&lt;rational&gt;</span>
      <span class="nv">&lt;real&gt;</span>
      <span class="nv">&lt;complex&gt;</span>
      <span class="nv">&lt;number&gt;</span>
      <span class="nv">&lt;top&gt;</span>
  <span class="p">(</span><span class="nf">No</span> <span class="nv">direct</span> <span class="nv">method</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Using <code>describe</code> on structures</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">define-struct</span> <span class="nv">person</span> <span class="nv">name</span> <span class="nv">email</span><span class="p">)</span>
<span class="p">(</span><span class="k">define</span> <span class="nv">one</span> <span class="p">(</span><span class="nf">make-person</span> <span class="s">"Some One"</span> <span class="s">"one@domain.org"</span><span class="p">))</span>

<span class="p">(</span><span class="nf">describe</span> <span class="nv">person</span><span class="p">)</span>
  <span class="o">#</span><span class="p">[</span><span class="nf">struct-type</span> <span class="nv">person</span> <span class="mi">139786494092352</span><span class="p">]</span> <span class="nv">is</span> <span class="nv">a</span> <span class="nv">structure</span> <span class="nv">type</span> <span class="nv">whose</span> <span class="nv">name</span> <span class="nv">is</span> <span class="nv">person</span><span class="o">.</span>
  <span class="nv">Parent</span> <span class="nv">structure</span> <span class="nv">type:</span> <span class="no">#f</span>
  <span class="nv">Slots</span> <span class="nv">are:</span>
       <span class="nv">name</span>
       <span class="nv">email</span>

<span class="p">(</span><span class="nf">describe</span> <span class="nv">one</span><span class="p">)</span>
  <span class="o">#</span><span class="p">[</span><span class="nf">struct</span> <span class="nv">person</span> <span class="mi">139786494288064</span><span class="p">]</span> <span class="nv">is</span> <span class="nv">an</span> <span class="nv">instance</span> <span class="nv">of</span> <span class="nv">the</span> <span class="nv">structure</span> <span class="nv">type</span> <span class="nv">person</span><span class="o">.</span>
  <span class="nv">Slots</span> <span class="nv">are:</span>
       <span class="nv">name</span> <span class="nv">=</span> <span class="s">"Some One"</span>
       <span class="nv">email</span> <span class="nv">=</span> <span class="s">"one@domain.org"</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> syntax</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(trace f-name &#8230;&#8203;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Invoking <code>trace</code> with one or more function names causes the functions
named to be traced. Henceforth, whenever such a function is invoked,
information about the call and the returned values, if any, will be
printed on the current error port.</p>
</div>
<div class="paragraph">
<p>Calling <code>trace</code> with no argument returns the list of traced functions.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> syntax</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(untrace f-name &#8230;&#8203;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Invoking <code>untrace</code> with one or more function names causes the functions
named not to be traced anymore.</p>
</div>
<div class="paragraph">
<p>Calling <code>untrace</code> with no argument will untrace all the functions
currently traced.</p>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(pretty-print sexpr :key port width)</code></strong><br>
<strong><code>(pp sexpr :key port width)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>This function tries to obtain a pretty-printed representation of <code>sexpr</code>.
The pretty-printed form is written on <code>port</code> with lines which are no
more long than <code>width</code> characters. If <code>port</code> is omitted if defaults to
the current error port. As a special convention, if <code>port</code> is <code>#t</code>,
output goes to the current output port and if <code>port</code> is <code>#f</code>, the output
is returned as a string by <code>pretty-print</code>.
Note that <code>pp</code> is another name for <code>pretty-print</code>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(disassemble proc)</code></strong><br>
<strong><code>(disassemble proc port)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>This function prints on the given port (by default the current output
port) the instructions of procedure <code>proc</code>. The printed code uses an
<em>ad-hoc</em> instruction set that should be quite understandable.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="nf">fact</span> <span class="nv">n</span><span class="p">)</span>
  <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">&lt;</span> <span class="nv">n</span> <span class="mi">2</span><span class="p">)</span>
      <span class="mi">1</span>
      <span class="p">(</span><span class="nb">*</span> <span class="nv">n</span> <span class="p">(</span><span class="nf">fact</span> <span class="p">(</span><span class="nb">-</span> <span class="nv">n</span> <span class="mi">1</span><span class="p">)))))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The call <code>(disassemble fact)</code> will produce the following output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme">   <span class="mi">000</span><span class="nv">:</span>  <span class="nv">LOCAL-REF0-PUSH</span>
   <span class="mi">001</span><span class="nv">:</span>  <span class="nv">SMALL-INT</span>            <span class="mi">2</span>
   <span class="mi">003</span><span class="nv">:</span>  <span class="nv">JUMP-NUMGE</span>           <span class="mi">2</span>  <span class="c1">;; ==&gt; 007</span>
   <span class="mi">005</span><span class="nv">:</span>  <span class="nv">IM-ONE</span>
   <span class="mi">006</span><span class="nv">:</span>  <span class="nv">RETURN</span>
   <span class="mi">007</span><span class="nv">:</span>  <span class="nv">LOCAL-REF0-PUSH</span>
   <span class="mi">008</span><span class="nv">:</span>  <span class="nv">PREPARE-CALL</span>
   <span class="mi">009</span><span class="nv">:</span>  <span class="nv">LOCAL-REF0</span>
   <span class="mi">010</span><span class="nv">:</span>  <span class="nv">IN-SINT-ADD2</span>         <span class="mi">-1</span>
   <span class="mi">012</span><span class="nv">:</span>  <span class="nv">PUSH-GREF-INVOKE</span>     <span class="mi">0</span> <span class="mi">1</span>
   <span class="mi">015</span><span class="nv">:</span>  <span class="nv">IN-MUL2</span>
   <span class="mi">016</span><span class="nv">:</span>  <span class="nv">RETURN</span></code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
The code of a procedure may be patched after the first execution
of <code>proc</code> to optimize it.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If <code>proc</code> is an anonymous function, you can use the special
notation <code>#pxxx</code> to disassemble it:
*</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">disassemble</span> <span class="o">#</span><span class="nv">p7fee1dd82f80</span><span class="p">)</span>  <span class="c1">;; (address-of (lambda() 42))</span>

      <span class="mi">000</span><span class="nv">:</span>  <span class="nv">SMALL-INT</span>            <span class="mi">42</span>
      <span class="mi">002</span><span class="nv">:</span>  <span class="nv">RETURN</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(disassemble-expr sexpr)</code></strong><br>
<strong><code>(disassemble-expr sexpr show-consts)</code></strong><br>
<strong><code>(disassemble-expr sexpr show-consts port)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>This function prints on the given <code>port</code> (by default the current output
port) the instructions of the given <code>sexpr</code>. If <code>show-consts</code> is true,
the table of the contants used in <code>sexpr</code> is also printed.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">disassemble-expr</span> <span class="o">'</span><span class="p">(</span><span class="k">begin</span>
                      <span class="p">(</span><span class="k">define</span> <span class="nv">x</span> <span class="p">(</span><span class="nb">+</span> <span class="nv">y</span> <span class="mi">10</span><span class="p">))</span>
                      <span class="p">(</span><span class="nb">cons</span> <span class="nv">x</span> <span class="nv">y</span><span class="p">))</span>
                    <span class="no">#t</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>will print:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="mi">000</span><span class="nv">:</span>  <span class="nv">GLOBAL-REF</span>           <span class="mi">0</span>
<span class="mi">002</span><span class="nv">:</span>  <span class="nv">IN-SINT-ADD2</span>         <span class="mi">10</span>
<span class="mi">004</span><span class="nv">:</span>  <span class="nv">DEFINE-SYMBOL</span>        <span class="mi">1</span>
<span class="mi">006</span><span class="nv">:</span>  <span class="nv">GLOBAL-REF-PUSH</span>      <span class="mi">1</span>
<span class="mi">008</span><span class="nv">:</span>  <span class="nv">GLOBAL-REF</span>           <span class="mi">0</span>
<span class="mi">010</span><span class="nv">:</span>  <span class="nv">IN-CONS</span>
<span class="mi">011</span><span class="nv">:</span>

<span class="nv">Constants:</span>
<span class="mi">0</span><span class="nv">:</span> <span class="nv">y</span>
<span class="mi">1</span><span class="nv">:</span> <span class="nv">x</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(uri-parse str)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Parses the string <code>str</code> as a RFC-2396 URI and return a keyed list with the
following components</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>scheme</code> : the scheme used as a string (defaults to <code>"file"</code>)</p>
</li>
<li>
<p><code>user</code>: the user information (generally expressed as <code>login:password</code>)</p>
</li>
<li>
<p><code>host</code> : the host as a string (defaults to "")</p>
</li>
<li>
<p><code>port</code> : the port as an integer (0 if no port specified)</p>
</li>
<li>
<p><code>path</code> : the path</p>
</li>
<li>
<p><code>query</code> : the qury part of the URI as a string (defaults to the
empty string)</p>
</li>
<li>
<p><code>fragment</code> : the fragment of the URI as a string (defaults to the
empty string)</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">uri-parse</span> <span class="s">"http://google.com"</span><span class="p">)</span>
   <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">:scheme</span> <span class="s">"http"</span> <span class="nv">:user</span> <span class="s">""</span> <span class="nv">:host</span> <span class="s">"google.com"</span> <span class="nv">:port</span> <span class="mi">80</span>
        <span class="nv">:path</span> <span class="s">"/"</span> <span class="nv">:query</span> <span class="s">""</span> <span class="nv">:fragment</span> <span class="s">""</span><span class="p">)</span>

<span class="p">(</span><span class="nf">uri-parse</span> <span class="s">"http://stklos.net:8080/a/file?x=1;y=2#end"</span><span class="p">)</span>
    <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">:scheme</span> <span class="s">"http"</span> <span class="nv">:user</span> <span class="s">""</span> <span class="nv">:host</span> <span class="s">"stklos.net"</span> <span class="nv">:port</span> <span class="mi">8080</span>
        <span class="nv">:path</span> <span class="s">"/a/file"</span> <span class="nv">:query</span> <span class="s">"x=1;y=2"</span> <span class="nv">:fragment</span> <span class="s">"end"</span><span class="p">)</span>

<span class="p">(</span><span class="nf">uri-parse</span> <span class="s">"http://foo:secret@stklos.net:2000/a/file"</span><span class="p">)</span>
    <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">:scheme</span> <span class="s">"http"</span> <span class="nv">:user</span> <span class="s">"foo:secret"</span> <span class="nv">:host</span> <span class="s">"stklos.net"</span>
        <span class="nv">:port</span> <span class="mi">2000</span>  <span class="nv">:path</span> <span class="s">"/a/file"</span> <span class="nv">:query</span> <span class="s">""</span> <span class="nv">:fragment</span> <span class="s">""</span><span class="p">)</span>

<span class="p">(</span><span class="nf">uri-parse</span> <span class="s">"/a/file"</span><span class="p">)</span>
   <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">:scheme</span> <span class="s">"file"</span> <span class="nv">:user</span> <span class="s">""</span> <span class="nv">:host</span> <span class="s">""</span> <span class="nv">:port</span> <span class="mi">0</span> <span class="nv">:path</span> <span class="s">"/a/file"</span>
       <span class="nv">:query</span> <span class="s">""</span> <span class="nv">:fragment</span> <span class="s">""</span><span class="p">)</span>

<span class="p">(</span><span class="nf">uri-parse</span> <span class="s">""</span><span class="p">)</span>
   <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">:scheme</span> <span class="s">"file"</span>  <span class="nv">:user</span> <span class="s">""</span> <span class="nv">:host</span> <span class="s">""</span> <span class="nv">:port</span> <span class="mi">0</span> <span class="nv">:path</span> <span class="s">""</span>
       <span class="nv">:query</span> <span class="s">""</span> <span class="nv">:fragment</span> <span class="s">""</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(string&#8594;html str)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>This primitive is a convenience function; it returns a string where
the HTML special chars are properly translated. It can easily written
in Scheme, but this version is fast.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">string-&gt;html</span> <span class="s">"Just a &lt;test&gt;"</span><span class="p">)</span>
   <span class="nv">=&gt;</span> <span class="s">"Just a &amp;lt;test&amp;gt;"</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(md5sum obj)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Return a string contening the md5 sum of <code>obj</code>. The given parameter can
be a string or an open input port.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(md5sum-file str)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Return a string contening the md5 sum of the file whose name is <code>str</code>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(base64-encode in)</code></strong><br>
<strong><code>(base64-encode in out)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Encode in Base64 the characters from input port <code>in</code> to the output port
<code>out</code>. If <code>out</code> is not specified, it defaults to the current output port.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">with-input-from-string</span> <span class="s">"Hello"</span>
  <span class="p">(</span><span class="k">lambda</span> <span class="p">()</span>
    <span class="p">(</span><span class="nf">with-output-to-string</span>
      <span class="p">(</span><span class="k">lambda</span> <span class="p">()</span>
        <span class="p">(</span><span class="nf">base64-encode</span> <span class="p">(</span><span class="nb">current-input-port</span><span class="p">))))))</span> <span class="nv">=&gt;</span> <span class="s">"SGVsbG8="</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(base64-decode in)</code></strong><br>
<strong><code>(base64-decode in out)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Decode the Base64 characters from input port <code>in</code> to the output port
<code>out</code>. If <code>out</code> is not specified, it defaults to the current output port.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">with-input-from-string</span> <span class="s">"SGVsbG8="</span>
  <span class="p">(</span><span class="k">lambda</span> <span class="p">()</span>
    <span class="p">(</span><span class="nf">with-output-to-string</span>
      <span class="p">(</span><span class="k">lambda</span> <span class="p">()</span>
        <span class="p">(</span><span class="nf">base64-decode</span> <span class="p">(</span><span class="nb">current-input-port</span><span class="p">))))))</span>  <span class="nv">=&gt;</span> <span class="s">"Hello"</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(base64-encode-string str)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Return a string contening the contents of <code>str</code> converted to Base64
encoded format.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(base64-encode-string str)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Decode the contents of <code>str</code> expressed in Base64.</p>
</div>
</div>
</div>
</div>
<div class="paragraph nav-footer">
<p>Previous:<a href="_program_structure.html">Program structure</a>| Up:<a href="stklos-ref-multi.html">STklos Reference Manual : (version 1.70)</a>| Next:<a href="_regular_expressions.html">Regular Expressions</a></p>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. Documentation about hygienic macros has been stolen in the SLIB manual
</div>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. In fact <code>define-module</code> on a given name defines a new module only the first time it is invoked on this name. By this way, interactively reloading a module does not define a new entity, and the other modules which use it are not altered.
</div>
<div class="footnote" id="_footnotedef_2">
<a href="#_footnoteref_2">2</a>. This transcript uses the default toplevel loop             which displays the name of the current module in the evaluator             prompt.
</div>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. Under Unix, you can simply connect to a listening socket with the <code>telnet</code> of <code>netcat</code> command. For the given example, this can be achieved with <code>netcat localhost 12345</code>
</div>
<div class="footnote" id="_footnotedef_2">
<a href="#_footnoteref_2">2</a>. Port 13, if open,  can  used for testing: making a connection to it permits to know the distant system&#8217;s idea of the time of day.
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2022-02-04 11:04:12 +0100
</div>
</div>
</body>
</html>